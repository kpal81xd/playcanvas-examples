/**
 * A frustum is a shape that defines the viewing space of a camera. It can be used to determine
 * visibility of points and bounding spheres. Typically, you would not create a Frustum shape
 * directly, but instead query {@link CameraComponent#frustum}.
 *
 * @category Math
 */
class Frustum {
  /**
   * Create a new Frustum instance.
   *
   * @example
   * const frustum = new pc.Frustum();
   */
  constructor() {
    this.planes = [];
    for (let i = 0; i < 6; i++) this.planes[i] = [];
  }

  /**
   * Updates the frustum shape based on the supplied 4x4 matrix.
   *
   * @param {import('../math/mat4.js').Mat4} matrix - The matrix describing the shape of the
   * frustum.
   * @example
   * // Create a perspective projection matrix
   * const projMat = pc.Mat4();
   * projMat.setPerspective(45, 16 / 9, 1, 1000);
   *
   * // Create a frustum shape that is represented by the matrix
   * const frustum = new pc.Frustum();
   * frustum.setFromMat4(projMat);
   */
  setFromMat4(matrix) {
    const vpm = matrix.data;
    let plane;
    const planes = this.planes;

    // Extract the numbers for the RIGHT plane
    plane = planes[0];
    plane[0] = vpm[3] - vpm[0];
    plane[1] = vpm[7] - vpm[4];
    plane[2] = vpm[11] - vpm[8];
    plane[3] = vpm[15] - vpm[12];
    // Normalize the result
    let t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);
    plane[0] /= t;
    plane[1] /= t;
    plane[2] /= t;
    plane[3] /= t;

    // Extract the numbers for the LEFT plane
    plane = planes[1];
    plane[0] = vpm[3] + vpm[0];
    plane[1] = vpm[7] + vpm[4];
    plane[2] = vpm[11] + vpm[8];
    plane[3] = vpm[15] + vpm[12];
    // Normalize the result
    t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);
    plane[0] /= t;
    plane[1] /= t;
    plane[2] /= t;
    plane[3] /= t;

    // Extract the BOTTOM plane
    plane = planes[2];
    plane[0] = vpm[3] + vpm[1];
    plane[1] = vpm[7] + vpm[5];
    plane[2] = vpm[11] + vpm[9];
    plane[3] = vpm[15] + vpm[13];
    // Normalize the result
    t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);
    plane[0] /= t;
    plane[1] /= t;
    plane[2] /= t;
    plane[3] /= t;

    // Extract the TOP plane
    plane = planes[3];
    plane[0] = vpm[3] - vpm[1];
    plane[1] = vpm[7] - vpm[5];
    plane[2] = vpm[11] - vpm[9];
    plane[3] = vpm[15] - vpm[13];
    // Normalize the result
    t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);
    plane[0] /= t;
    plane[1] /= t;
    plane[2] /= t;
    plane[3] /= t;

    // Extract the FAR plane
    plane = planes[4];
    plane[0] = vpm[3] - vpm[2];
    plane[1] = vpm[7] - vpm[6];
    plane[2] = vpm[11] - vpm[10];
    plane[3] = vpm[15] - vpm[14];
    // Normalize the result
    t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);
    plane[0] /= t;
    plane[1] /= t;
    plane[2] /= t;
    plane[3] /= t;

    // Extract the NEAR plane
    plane = planes[5];
    plane[0] = vpm[3] + vpm[2];
    plane[1] = vpm[7] + vpm[6];
    plane[2] = vpm[11] + vpm[10];
    plane[3] = vpm[15] + vpm[14];
    // Normalize the result
    t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);
    plane[0] /= t;
    plane[1] /= t;
    plane[2] /= t;
    plane[3] /= t;
  }

  /**
   * Tests whether a point is inside the frustum. Note that points lying in a frustum plane are
   * considered to be outside the frustum.
   *
   * @param {import('../math/vec3.js').Vec3} point - The point to test.
   * @returns {boolean} True if the point is inside the frustum, false otherwise.
   */
  containsPoint(point) {
    let p, plane;
    for (p = 0; p < 6; p++) {
      plane = this.planes[p];
      if (plane[0] * point.x + plane[1] * point.y + plane[2] * point.z + plane[3] <= 0) {
        return false;
      }
    }
    return true;
  }

  /**
   * Tests whether a bounding sphere intersects the frustum. If the sphere is outside the
   * frustum, zero is returned. If the sphere intersects the frustum, 1 is returned. If the
   * sphere is completely inside the frustum, 2 is returned. Note that a sphere touching a
   * frustum plane from the outside is considered to be outside the frustum.
   *
   * @param {import('./bounding-sphere.js').BoundingSphere} sphere - The sphere to test.
   * @returns {number} 0 if the bounding sphere is outside the frustum, 1 if it intersects the
   * frustum and 2 if it is contained by the frustum.
   */
  containsSphere(sphere) {
    let c = 0;
    let d;
    let p;
    const sr = sphere.radius;
    const sc = sphere.center;
    const scx = sc.x;
    const scy = sc.y;
    const scz = sc.z;
    const planes = this.planes;
    let plane;
    for (p = 0; p < 6; p++) {
      plane = planes[p];
      d = plane[0] * scx + plane[1] * scy + plane[2] * scz + plane[3];
      if (d <= -sr) return 0;
      if (d > sr) c++;
    }
    return c === 6 ? 2 : 1;
  }
}

export { Frustum };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnJ1c3R1bS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2NvcmUvc2hhcGUvZnJ1c3R1bS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEEgZnJ1c3R1bSBpcyBhIHNoYXBlIHRoYXQgZGVmaW5lcyB0aGUgdmlld2luZyBzcGFjZSBvZiBhIGNhbWVyYS4gSXQgY2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB2aXNpYmlsaXR5IG9mIHBvaW50cyBhbmQgYm91bmRpbmcgc3BoZXJlcy4gVHlwaWNhbGx5LCB5b3Ugd291bGQgbm90IGNyZWF0ZSBhIEZydXN0dW0gc2hhcGVcbiAqIGRpcmVjdGx5LCBidXQgaW5zdGVhZCBxdWVyeSB7QGxpbmsgQ2FtZXJhQ29tcG9uZW50I2ZydXN0dW19LlxuICpcbiAqIEBjYXRlZ29yeSBNYXRoXG4gKi9cbmNsYXNzIEZydXN0dW0ge1xuICAgIHBsYW5lcyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IEZydXN0dW0gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IGZydXN0dW0gPSBuZXcgcGMuRnJ1c3R1bSgpO1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKylcbiAgICAgICAgICAgIHRoaXMucGxhbmVzW2ldID0gW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgZnJ1c3R1bSBzaGFwZSBiYXNlZCBvbiB0aGUgc3VwcGxpZWQgNHg0IG1hdHJpeC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9tYXRoL21hdDQuanMnKS5NYXQ0fSBtYXRyaXggLSBUaGUgbWF0cml4IGRlc2NyaWJpbmcgdGhlIHNoYXBlIG9mIHRoZVxuICAgICAqIGZydXN0dW0uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBDcmVhdGUgYSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uIG1hdHJpeFxuICAgICAqIGNvbnN0IHByb2pNYXQgPSBwYy5NYXQ0KCk7XG4gICAgICogcHJvak1hdC5zZXRQZXJzcGVjdGl2ZSg0NSwgMTYgLyA5LCAxLCAxMDAwKTtcbiAgICAgKlxuICAgICAqIC8vIENyZWF0ZSBhIGZydXN0dW0gc2hhcGUgdGhhdCBpcyByZXByZXNlbnRlZCBieSB0aGUgbWF0cml4XG4gICAgICogY29uc3QgZnJ1c3R1bSA9IG5ldyBwYy5GcnVzdHVtKCk7XG4gICAgICogZnJ1c3R1bS5zZXRGcm9tTWF0NChwcm9qTWF0KTtcbiAgICAgKi9cbiAgICBzZXRGcm9tTWF0NChtYXRyaXgpIHtcbiAgICAgICAgY29uc3QgdnBtID0gbWF0cml4LmRhdGE7XG5cbiAgICAgICAgbGV0IHBsYW5lO1xuICAgICAgICBjb25zdCBwbGFuZXMgPSB0aGlzLnBsYW5lcztcblxuICAgICAgICAvLyBFeHRyYWN0IHRoZSBudW1iZXJzIGZvciB0aGUgUklHSFQgcGxhbmVcbiAgICAgICAgcGxhbmUgPSBwbGFuZXNbMF07XG4gICAgICAgIHBsYW5lWzBdID0gdnBtWzNdIC0gdnBtWzBdO1xuICAgICAgICBwbGFuZVsxXSA9IHZwbVs3XSAtIHZwbVs0XTtcbiAgICAgICAgcGxhbmVbMl0gPSB2cG1bMTFdIC0gdnBtWzhdO1xuICAgICAgICBwbGFuZVszXSA9IHZwbVsxNV0gLSB2cG1bMTJdO1xuICAgICAgICAvLyBOb3JtYWxpemUgdGhlIHJlc3VsdFxuICAgICAgICBsZXQgdCA9IE1hdGguc3FydChwbGFuZVswXSAqIHBsYW5lWzBdICsgcGxhbmVbMV0gKiBwbGFuZVsxXSArIHBsYW5lWzJdICogcGxhbmVbMl0pO1xuICAgICAgICBwbGFuZVswXSAvPSB0O1xuICAgICAgICBwbGFuZVsxXSAvPSB0O1xuICAgICAgICBwbGFuZVsyXSAvPSB0O1xuICAgICAgICBwbGFuZVszXSAvPSB0O1xuXG4gICAgICAgIC8vIEV4dHJhY3QgdGhlIG51bWJlcnMgZm9yIHRoZSBMRUZUIHBsYW5lXG4gICAgICAgIHBsYW5lID0gcGxhbmVzWzFdO1xuICAgICAgICBwbGFuZVswXSA9IHZwbVszXSArIHZwbVswXTtcbiAgICAgICAgcGxhbmVbMV0gPSB2cG1bN10gKyB2cG1bNF07XG4gICAgICAgIHBsYW5lWzJdID0gdnBtWzExXSArIHZwbVs4XTtcbiAgICAgICAgcGxhbmVbM10gPSB2cG1bMTVdICsgdnBtWzEyXTtcbiAgICAgICAgLy8gTm9ybWFsaXplIHRoZSByZXN1bHRcbiAgICAgICAgdCA9IE1hdGguc3FydChwbGFuZVswXSAqIHBsYW5lWzBdICsgcGxhbmVbMV0gKiBwbGFuZVsxXSArIHBsYW5lWzJdICogcGxhbmVbMl0pO1xuICAgICAgICBwbGFuZVswXSAvPSB0O1xuICAgICAgICBwbGFuZVsxXSAvPSB0O1xuICAgICAgICBwbGFuZVsyXSAvPSB0O1xuICAgICAgICBwbGFuZVszXSAvPSB0O1xuXG4gICAgICAgIC8vIEV4dHJhY3QgdGhlIEJPVFRPTSBwbGFuZVxuICAgICAgICBwbGFuZSA9IHBsYW5lc1syXTtcbiAgICAgICAgcGxhbmVbMF0gPSB2cG1bM10gKyB2cG1bMV07XG4gICAgICAgIHBsYW5lWzFdID0gdnBtWzddICsgdnBtWzVdO1xuICAgICAgICBwbGFuZVsyXSA9IHZwbVsxMV0gKyB2cG1bOV07XG4gICAgICAgIHBsYW5lWzNdID0gdnBtWzE1XSArIHZwbVsxM107XG4gICAgICAgIC8vIE5vcm1hbGl6ZSB0aGUgcmVzdWx0XG4gICAgICAgIHQgPSBNYXRoLnNxcnQocGxhbmVbMF0gKiBwbGFuZVswXSArIHBsYW5lWzFdICogcGxhbmVbMV0gKyBwbGFuZVsyXSAqIHBsYW5lWzJdKTtcbiAgICAgICAgcGxhbmVbMF0gLz0gdDtcbiAgICAgICAgcGxhbmVbMV0gLz0gdDtcbiAgICAgICAgcGxhbmVbMl0gLz0gdDtcbiAgICAgICAgcGxhbmVbM10gLz0gdDtcblxuICAgICAgICAvLyBFeHRyYWN0IHRoZSBUT1AgcGxhbmVcbiAgICAgICAgcGxhbmUgPSBwbGFuZXNbM107XG4gICAgICAgIHBsYW5lWzBdID0gdnBtWzNdIC0gdnBtWzFdO1xuICAgICAgICBwbGFuZVsxXSA9IHZwbVs3XSAtIHZwbVs1XTtcbiAgICAgICAgcGxhbmVbMl0gPSB2cG1bMTFdIC0gdnBtWzldO1xuICAgICAgICBwbGFuZVszXSA9IHZwbVsxNV0gLSB2cG1bMTNdO1xuICAgICAgICAvLyBOb3JtYWxpemUgdGhlIHJlc3VsdFxuICAgICAgICB0ID0gTWF0aC5zcXJ0KHBsYW5lWzBdICogcGxhbmVbMF0gKyBwbGFuZVsxXSAqIHBsYW5lWzFdICsgcGxhbmVbMl0gKiBwbGFuZVsyXSk7XG4gICAgICAgIHBsYW5lWzBdIC89IHQ7XG4gICAgICAgIHBsYW5lWzFdIC89IHQ7XG4gICAgICAgIHBsYW5lWzJdIC89IHQ7XG4gICAgICAgIHBsYW5lWzNdIC89IHQ7XG5cbiAgICAgICAgLy8gRXh0cmFjdCB0aGUgRkFSIHBsYW5lXG4gICAgICAgIHBsYW5lID0gcGxhbmVzWzRdO1xuICAgICAgICBwbGFuZVswXSA9IHZwbVszXSAtIHZwbVsyXTtcbiAgICAgICAgcGxhbmVbMV0gPSB2cG1bN10gLSB2cG1bNl07XG4gICAgICAgIHBsYW5lWzJdID0gdnBtWzExXSAtIHZwbVsxMF07XG4gICAgICAgIHBsYW5lWzNdID0gdnBtWzE1XSAtIHZwbVsxNF07XG4gICAgICAgIC8vIE5vcm1hbGl6ZSB0aGUgcmVzdWx0XG4gICAgICAgIHQgPSBNYXRoLnNxcnQocGxhbmVbMF0gKiBwbGFuZVswXSArIHBsYW5lWzFdICogcGxhbmVbMV0gKyBwbGFuZVsyXSAqIHBsYW5lWzJdKTtcbiAgICAgICAgcGxhbmVbMF0gLz0gdDtcbiAgICAgICAgcGxhbmVbMV0gLz0gdDtcbiAgICAgICAgcGxhbmVbMl0gLz0gdDtcbiAgICAgICAgcGxhbmVbM10gLz0gdDtcblxuICAgICAgICAvLyBFeHRyYWN0IHRoZSBORUFSIHBsYW5lXG4gICAgICAgIHBsYW5lID0gcGxhbmVzWzVdO1xuICAgICAgICBwbGFuZVswXSA9IHZwbVszXSArIHZwbVsyXTtcbiAgICAgICAgcGxhbmVbMV0gPSB2cG1bN10gKyB2cG1bNl07XG4gICAgICAgIHBsYW5lWzJdID0gdnBtWzExXSArIHZwbVsxMF07XG4gICAgICAgIHBsYW5lWzNdID0gdnBtWzE1XSArIHZwbVsxNF07XG4gICAgICAgIC8vIE5vcm1hbGl6ZSB0aGUgcmVzdWx0XG4gICAgICAgIHQgPSBNYXRoLnNxcnQocGxhbmVbMF0gKiBwbGFuZVswXSArIHBsYW5lWzFdICogcGxhbmVbMV0gKyBwbGFuZVsyXSAqIHBsYW5lWzJdKTtcbiAgICAgICAgcGxhbmVbMF0gLz0gdDtcbiAgICAgICAgcGxhbmVbMV0gLz0gdDtcbiAgICAgICAgcGxhbmVbMl0gLz0gdDtcbiAgICAgICAgcGxhbmVbM10gLz0gdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXN0cyB3aGV0aGVyIGEgcG9pbnQgaXMgaW5zaWRlIHRoZSBmcnVzdHVtLiBOb3RlIHRoYXQgcG9pbnRzIGx5aW5nIGluIGEgZnJ1c3R1bSBwbGFuZSBhcmVcbiAgICAgKiBjb25zaWRlcmVkIHRvIGJlIG91dHNpZGUgdGhlIGZydXN0dW0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vbWF0aC92ZWMzLmpzJykuVmVjM30gcG9pbnQgLSBUaGUgcG9pbnQgdG8gdGVzdC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgcG9pbnQgaXMgaW5zaWRlIHRoZSBmcnVzdHVtLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgY29udGFpbnNQb2ludChwb2ludCkge1xuICAgICAgICBsZXQgcCwgcGxhbmU7XG4gICAgICAgIGZvciAocCA9IDA7IHAgPCA2OyBwKyspIHtcbiAgICAgICAgICAgIHBsYW5lID0gdGhpcy5wbGFuZXNbcF07XG4gICAgICAgICAgICBpZiAocGxhbmVbMF0gKiBwb2ludC54ICsgcGxhbmVbMV0gKiBwb2ludC55ICsgcGxhbmVbMl0gKiBwb2ludC56ICsgcGxhbmVbM10gPD0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXN0cyB3aGV0aGVyIGEgYm91bmRpbmcgc3BoZXJlIGludGVyc2VjdHMgdGhlIGZydXN0dW0uIElmIHRoZSBzcGhlcmUgaXMgb3V0c2lkZSB0aGVcbiAgICAgKiBmcnVzdHVtLCB6ZXJvIGlzIHJldHVybmVkLiBJZiB0aGUgc3BoZXJlIGludGVyc2VjdHMgdGhlIGZydXN0dW0sIDEgaXMgcmV0dXJuZWQuIElmIHRoZVxuICAgICAqIHNwaGVyZSBpcyBjb21wbGV0ZWx5IGluc2lkZSB0aGUgZnJ1c3R1bSwgMiBpcyByZXR1cm5lZC4gTm90ZSB0aGF0IGEgc3BoZXJlIHRvdWNoaW5nIGFcbiAgICAgKiBmcnVzdHVtIHBsYW5lIGZyb20gdGhlIG91dHNpZGUgaXMgY29uc2lkZXJlZCB0byBiZSBvdXRzaWRlIHRoZSBmcnVzdHVtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4vYm91bmRpbmctc3BoZXJlLmpzJykuQm91bmRpbmdTcGhlcmV9IHNwaGVyZSAtIFRoZSBzcGhlcmUgdG8gdGVzdC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSAwIGlmIHRoZSBib3VuZGluZyBzcGhlcmUgaXMgb3V0c2lkZSB0aGUgZnJ1c3R1bSwgMSBpZiBpdCBpbnRlcnNlY3RzIHRoZVxuICAgICAqIGZydXN0dW0gYW5kIDIgaWYgaXQgaXMgY29udGFpbmVkIGJ5IHRoZSBmcnVzdHVtLlxuICAgICAqL1xuICAgIGNvbnRhaW5zU3BoZXJlKHNwaGVyZSkge1xuICAgICAgICBsZXQgYyA9IDA7XG4gICAgICAgIGxldCBkO1xuICAgICAgICBsZXQgcDtcblxuICAgICAgICBjb25zdCBzciA9IHNwaGVyZS5yYWRpdXM7XG4gICAgICAgIGNvbnN0IHNjID0gc3BoZXJlLmNlbnRlcjtcbiAgICAgICAgY29uc3Qgc2N4ID0gc2MueDtcbiAgICAgICAgY29uc3Qgc2N5ID0gc2MueTtcbiAgICAgICAgY29uc3Qgc2N6ID0gc2MuejtcbiAgICAgICAgY29uc3QgcGxhbmVzID0gdGhpcy5wbGFuZXM7XG4gICAgICAgIGxldCBwbGFuZTtcblxuICAgICAgICBmb3IgKHAgPSAwOyBwIDwgNjsgcCsrKSB7XG4gICAgICAgICAgICBwbGFuZSA9IHBsYW5lc1twXTtcbiAgICAgICAgICAgIGQgPSBwbGFuZVswXSAqIHNjeCArIHBsYW5lWzFdICogc2N5ICsgcGxhbmVbMl0gKiBzY3ogKyBwbGFuZVszXTtcbiAgICAgICAgICAgIGlmIChkIDw9IC1zcilcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGlmIChkID4gc3IpXG4gICAgICAgICAgICAgICAgYysrO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChjID09PSA2KSA/IDIgOiAxO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgRnJ1c3R1bSB9O1xuIl0sIm5hbWVzIjpbIkZydXN0dW0iLCJjb25zdHJ1Y3RvciIsInBsYW5lcyIsImkiLCJzZXRGcm9tTWF0NCIsIm1hdHJpeCIsInZwbSIsImRhdGEiLCJwbGFuZSIsInQiLCJNYXRoIiwic3FydCIsImNvbnRhaW5zUG9pbnQiLCJwb2ludCIsInAiLCJ4IiwieSIsInoiLCJjb250YWluc1NwaGVyZSIsInNwaGVyZSIsImMiLCJkIiwic3IiLCJyYWRpdXMiLCJzYyIsImNlbnRlciIsInNjeCIsInNjeSIsInNjeiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxPQUFPLENBQUM7QUFHVjtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSUMsRUFBQUEsV0FBV0EsR0FBRztJQUFBLElBUmRDLENBQUFBLE1BQU0sR0FBRyxFQUFFLENBQUE7QUFTUCxJQUFBLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxFQUFFLEVBQ3RCLElBQUksQ0FBQ0QsTUFBTSxDQUFDQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUE7QUFDM0IsR0FBQTs7QUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0lDLFdBQVdBLENBQUNDLE1BQU0sRUFBRTtBQUNoQixJQUFBLE1BQU1DLEdBQUcsR0FBR0QsTUFBTSxDQUFDRSxJQUFJLENBQUE7QUFFdkIsSUFBQSxJQUFJQyxLQUFLLENBQUE7QUFDVCxJQUFBLE1BQU1OLE1BQU0sR0FBRyxJQUFJLENBQUNBLE1BQU0sQ0FBQTs7QUFFMUI7QUFDQU0sSUFBQUEsS0FBSyxHQUFHTixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDakJNLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDM0JFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHQSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7QUFDNUI7QUFDQSxJQUFBLElBQUlHLENBQUMsR0FBR0MsSUFBSSxDQUFDQyxJQUFJLENBQUNILEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNsRkEsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7QUFDYkQsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7QUFDYkQsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7QUFDYkQsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7O0FBRWI7QUFDQUQsSUFBQUEsS0FBSyxHQUFHTixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDakJNLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDM0JFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHQSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7QUFDNUI7QUFDQUcsSUFBQUEsQ0FBQyxHQUFHQyxJQUFJLENBQUNDLElBQUksQ0FBQ0gsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzlFQSxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTtBQUNiRCxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTtBQUNiRCxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTtBQUNiRCxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTs7QUFFYjtBQUNBRCxJQUFBQSxLQUFLLEdBQUdOLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNqQk0sSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUMxQkUsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUMxQkUsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUMzQkUsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTtBQUM1QjtBQUNBRyxJQUFBQSxDQUFDLEdBQUdDLElBQUksQ0FBQ0MsSUFBSSxDQUFDSCxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDOUVBLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2JELElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2JELElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2JELElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBOztBQUViO0FBQ0FELElBQUFBLEtBQUssR0FBR04sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ2pCTSxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdGLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBR0EsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzFCRSxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdGLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBR0EsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzFCRSxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdGLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBR0EsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzNCRSxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdGLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBR0EsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFBO0FBQzVCO0FBQ0FHLElBQUFBLENBQUMsR0FBR0MsSUFBSSxDQUFDQyxJQUFJLENBQUNILEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUM5RUEsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7QUFDYkQsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7QUFDYkQsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7QUFDYkQsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7O0FBRWI7QUFDQUQsSUFBQUEsS0FBSyxHQUFHTixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDakJNLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHQSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7QUFDNUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHQSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7QUFDNUI7QUFDQUcsSUFBQUEsQ0FBQyxHQUFHQyxJQUFJLENBQUNDLElBQUksQ0FBQ0gsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzlFQSxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTtBQUNiRCxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTtBQUNiRCxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTtBQUNiRCxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTs7QUFFYjtBQUNBRCxJQUFBQSxLQUFLLEdBQUdOLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNqQk0sSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUMxQkUsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUMxQkUsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTtBQUM1QkUsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTtBQUM1QjtBQUNBRyxJQUFBQSxDQUFDLEdBQUdDLElBQUksQ0FBQ0MsSUFBSSxDQUFDSCxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDOUVBLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2JELElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2JELElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2JELElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2pCLEdBQUE7O0FBRUE7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSUcsYUFBYUEsQ0FBQ0MsS0FBSyxFQUFFO0lBQ2pCLElBQUlDLENBQUMsRUFBRU4sS0FBSyxDQUFBO0lBQ1osS0FBS00sQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxFQUFFLEVBQUU7QUFDcEJOLE1BQUFBLEtBQUssR0FBRyxJQUFJLENBQUNOLE1BQU0sQ0FBQ1ksQ0FBQyxDQUFDLENBQUE7QUFDdEIsTUFBQSxJQUFJTixLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdLLEtBQUssQ0FBQ0UsQ0FBQyxHQUFHUCxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdLLEtBQUssQ0FBQ0csQ0FBQyxHQUFHUixLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdLLEtBQUssQ0FBQ0ksQ0FBQyxHQUFHVCxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQzlFLFFBQUEsT0FBTyxLQUFLLENBQUE7QUFDaEIsT0FBQTtBQUNKLEtBQUE7QUFDQSxJQUFBLE9BQU8sSUFBSSxDQUFBO0FBQ2YsR0FBQTs7QUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJVSxjQUFjQSxDQUFDQyxNQUFNLEVBQUU7SUFDbkIsSUFBSUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtBQUNULElBQUEsSUFBSUMsQ0FBQyxDQUFBO0FBQ0wsSUFBQSxJQUFJUCxDQUFDLENBQUE7QUFFTCxJQUFBLE1BQU1RLEVBQUUsR0FBR0gsTUFBTSxDQUFDSSxNQUFNLENBQUE7QUFDeEIsSUFBQSxNQUFNQyxFQUFFLEdBQUdMLE1BQU0sQ0FBQ00sTUFBTSxDQUFBO0FBQ3hCLElBQUEsTUFBTUMsR0FBRyxHQUFHRixFQUFFLENBQUNULENBQUMsQ0FBQTtBQUNoQixJQUFBLE1BQU1ZLEdBQUcsR0FBR0gsRUFBRSxDQUFDUixDQUFDLENBQUE7QUFDaEIsSUFBQSxNQUFNWSxHQUFHLEdBQUdKLEVBQUUsQ0FBQ1AsQ0FBQyxDQUFBO0FBQ2hCLElBQUEsTUFBTWYsTUFBTSxHQUFHLElBQUksQ0FBQ0EsTUFBTSxDQUFBO0FBQzFCLElBQUEsSUFBSU0sS0FBSyxDQUFBO0lBRVQsS0FBS00sQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxFQUFFLEVBQUU7QUFDcEJOLE1BQUFBLEtBQUssR0FBR04sTUFBTSxDQUFDWSxDQUFDLENBQUMsQ0FBQTtNQUNqQk8sQ0FBQyxHQUFHYixLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdrQixHQUFHLEdBQUdsQixLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdtQixHQUFHLEdBQUduQixLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdvQixHQUFHLEdBQUdwQixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDL0QsTUFBQSxJQUFJYSxDQUFDLElBQUksQ0FBQ0MsRUFBRSxFQUNSLE9BQU8sQ0FBQyxDQUFBO0FBQ1osTUFBQSxJQUFJRCxDQUFDLEdBQUdDLEVBQUUsRUFDTkYsQ0FBQyxFQUFFLENBQUE7QUFDWCxLQUFBO0FBRUEsSUFBQSxPQUFRQSxDQUFDLEtBQUssQ0FBQyxHQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7QUFDNUIsR0FBQTtBQUNKOzs7OyJ9
