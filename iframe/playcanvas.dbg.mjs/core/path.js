/**
 * File path API.
 *
 * @namespace
 */
const path = {
  /**
   * The character that separates path segments.
   *
   * @type {string}
   */
  delimiter: '/',
  /**
   * Join two or more sections of file path together, inserting a delimiter if needed.
   *
   * @param {...string} sections - Sections of the path to join.
   * @returns {string} The joined file path.
   * @example
   * const path = pc.path.join('foo', 'bar');
   * console.log(path); // Prints 'foo/bar'
   * @example
   * const path = pc.path.join('alpha', 'beta', 'gamma');
   * console.log(path); // Prints 'alpha/beta/gamma'
   */
  join(...sections) {
    let result = sections[0];
    for (let i = 0; i < sections.length - 1; i++) {
      const one = sections[i];
      const two = sections[i + 1];
      if (two[0] === path.delimiter) {
        result = two;
        continue;
      }
      if (one && two && one[one.length - 1] !== path.delimiter && two[0] !== path.delimiter) {
        result += path.delimiter + two;
      } else {
        result += two;
      }
    }
    return result;
  },
  /**
   * Normalize the path by removing '.' and '..' instances.
   *
   * @param {string} pathname - The path to normalize.
   * @returns {string} The normalized path.
   */
  normalize(pathname) {
    const lead = pathname.startsWith(path.delimiter);
    const trail = pathname.endsWith(path.delimiter);
    const parts = pathname.split('/');
    let result = '';
    let cleaned = [];
    for (let i = 0; i < parts.length; i++) {
      if (parts[i] === '') continue;
      if (parts[i] === '.') continue;
      if (parts[i] === '..' && cleaned.length > 0) {
        cleaned = cleaned.slice(0, cleaned.length - 2);
        continue;
      }
      if (i > 0) cleaned.push(path.delimiter);
      cleaned.push(parts[i]);
    }
    result = cleaned.join('');
    if (!lead && result[0] === path.delimiter) {
      result = result.slice(1);
    }
    if (trail && result[result.length - 1] !== path.delimiter) {
      result += path.delimiter;
    }
    return result;
  },
  /**
   * Split the pathname path into a pair [head, tail] where tail is the final part of the path
   * after the last delimiter and head is everything leading up to that. tail will never contain
   * a slash.
   *
   * @param {string} pathname - The path to split.
   * @returns {string[]} The split path which is an array of two strings, the path and the
   * filename.
   */
  split(pathname) {
    const lastDelimiterIndex = pathname.lastIndexOf(path.delimiter);
    if (lastDelimiterIndex !== -1) {
      return [pathname.substring(0, lastDelimiterIndex), pathname.substring(lastDelimiterIndex + 1)];
    }
    return ["", pathname];
  },
  /**
   * Return the basename of the path. That is the second element of the pair returned by passing
   * path into {@link path.split}.
   *
   * @param {string} pathname - The path to process.
   * @returns {string} The basename.
   * @example
   * pc.path.getBasename("/path/to/file.txt"); // returns "file.txt"
   * pc.path.getBasename("/path/to/dir"); // returns "dir"
   */
  getBasename(pathname) {
    return path.split(pathname)[1];
  },
  /**
   * Get the directory name from the path. This is everything up to the final instance of
   * {@link path.delimiter}.
   *
   * @param {string} pathname - The path to get the directory from.
   * @returns {string} The directory part of the path.
   */
  getDirectory(pathname) {
    return path.split(pathname)[0];
  },
  /**
   * Return the extension of the path. Pop the last value of a list after path is split by
   * question mark and comma.
   *
   * @param {string} pathname - The path to process.
   * @returns {string} The extension.
   * @example
   * pc.path.getExtension("/path/to/file.txt"); // returns ".txt"
   * pc.path.getExtension("/path/to/file.jpg"); // returns ".jpg"
   * pc.path.getExtension("/path/to/file.txt?function=getExtension"); // returns ".txt"
   */
  getExtension(pathname) {
    const ext = pathname.split('?')[0].split('.').pop();
    if (ext !== pathname) {
      return '.' + ext;
    }
    return '';
  },
  /**
   * Check if a string s is relative path.
   *
   * @param {string} pathname - The path to process.
   * @returns {boolean} True if s doesn't start with slash and doesn't include colon and double
   * slash.
   *
   * @example
   * pc.path.isRelativePath("file.txt"); // returns true
   * pc.path.isRelativePath("path/to/file.txt"); // returns true
   * pc.path.isRelativePath("./path/to/file.txt"); // returns true
   * pc.path.isRelativePath("../path/to/file.jpg"); // returns true
   * pc.path.isRelativePath("/path/to/file.jpg"); // returns false
   * pc.path.isRelativePath("http://path/to/file.jpg"); // returns false
   */
  isRelativePath(pathname) {
    return pathname.charAt(0) !== '/' && pathname.match(/:\/\//) === null;
  },
  /**
   * Return the path without file name. If path is relative path, start with period.
   *
   * @param {string} pathname - The full path to process.
   * @returns {string} The path without a last element from list split by slash.
   * @example
   * pc.path.extractPath("path/to/file.txt");    // returns "./path/to"
   * pc.path.extractPath("./path/to/file.txt");  // returns "./path/to"
   * pc.path.extractPath("../path/to/file.txt"); // returns "../path/to"
   * pc.path.extractPath("/path/to/file.txt");   // returns "/path/to"
   */
  extractPath(pathname) {
    let result = '';
    const parts = pathname.split('/');
    let i = 0;
    if (parts.length > 1) {
      if (path.isRelativePath(pathname)) {
        if (parts[0] === '.') {
          for (i = 0; i < parts.length - 1; ++i) {
            result += i === 0 ? parts[i] : '/' + parts[i];
          }
        } else if (parts[0] === '..') {
          for (i = 0; i < parts.length - 1; ++i) {
            result += i === 0 ? parts[i] : '/' + parts[i];
          }
        } else {
          result = '.';
          for (i = 0; i < parts.length - 1; ++i) {
            result += '/' + parts[i];
          }
        }
      } else {
        for (i = 0; i < parts.length - 1; ++i) {
          result += i === 0 ? parts[i] : '/' + parts[i];
        }
      }
    }
    return result;
  }
};

export { path };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF0aC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2NvcmUvcGF0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEZpbGUgcGF0aCBBUEkuXG4gKlxuICogQG5hbWVzcGFjZVxuICovXG5jb25zdCBwYXRoID0ge1xuICAgIC8qKlxuICAgICAqIFRoZSBjaGFyYWN0ZXIgdGhhdCBzZXBhcmF0ZXMgcGF0aCBzZWdtZW50cy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgZGVsaW1pdGVyOiAnLycsXG5cbiAgICAvKipcbiAgICAgKiBKb2luIHR3byBvciBtb3JlIHNlY3Rpb25zIG9mIGZpbGUgcGF0aCB0b2dldGhlciwgaW5zZXJ0aW5nIGEgZGVsaW1pdGVyIGlmIG5lZWRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Li4uc3RyaW5nfSBzZWN0aW9ucyAtIFNlY3Rpb25zIG9mIHRoZSBwYXRoIHRvIGpvaW4uXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGpvaW5lZCBmaWxlIHBhdGguXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBwYXRoID0gcGMucGF0aC5qb2luKCdmb28nLCAnYmFyJyk7XG4gICAgICogY29uc29sZS5sb2cocGF0aCk7IC8vIFByaW50cyAnZm9vL2JhcidcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IHBhdGggPSBwYy5wYXRoLmpvaW4oJ2FscGhhJywgJ2JldGEnLCAnZ2FtbWEnKTtcbiAgICAgKiBjb25zb2xlLmxvZyhwYXRoKTsgLy8gUHJpbnRzICdhbHBoYS9iZXRhL2dhbW1hJ1xuICAgICAqL1xuICAgIGpvaW4oLi4uc2VjdGlvbnMpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHNlY3Rpb25zWzBdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VjdGlvbnMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBvbmUgPSBzZWN0aW9uc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IHR3byA9IHNlY3Rpb25zW2kgKyAxXTtcblxuICAgICAgICAgICAgaWYgKHR3b1swXSA9PT0gcGF0aC5kZWxpbWl0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0d287XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvbmUgJiYgdHdvICYmIG9uZVtvbmUubGVuZ3RoIC0gMV0gIT09IHBhdGguZGVsaW1pdGVyICYmIHR3b1swXSAhPT0gcGF0aC5kZWxpbWl0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gKHBhdGguZGVsaW1pdGVyICsgdHdvKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IHR3bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE5vcm1hbGl6ZSB0aGUgcGF0aCBieSByZW1vdmluZyAnLicgYW5kICcuLicgaW5zdGFuY2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGhuYW1lIC0gVGhlIHBhdGggdG8gbm9ybWFsaXplLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBub3JtYWxpemVkIHBhdGguXG4gICAgICovXG4gICAgbm9ybWFsaXplKHBhdGhuYW1lKSB7XG4gICAgICAgIGNvbnN0IGxlYWQgPSBwYXRobmFtZS5zdGFydHNXaXRoKHBhdGguZGVsaW1pdGVyKTtcbiAgICAgICAgY29uc3QgdHJhaWwgPSBwYXRobmFtZS5lbmRzV2l0aChwYXRoLmRlbGltaXRlcik7XG5cbiAgICAgICAgY29uc3QgcGFydHMgPSBwYXRobmFtZS5zcGxpdCgnLycpO1xuXG4gICAgICAgIGxldCByZXN1bHQgPSAnJztcblxuICAgICAgICBsZXQgY2xlYW5lZCA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChwYXJ0c1tpXSA9PT0gJycpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKHBhcnRzW2ldID09PSAnLicpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKHBhcnRzW2ldID09PSAnLi4nICYmIGNsZWFuZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNsZWFuZWQgPSBjbGVhbmVkLnNsaWNlKDAsIGNsZWFuZWQubGVuZ3RoIC0gMik7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpID4gMCkgY2xlYW5lZC5wdXNoKHBhdGguZGVsaW1pdGVyKTtcbiAgICAgICAgICAgIGNsZWFuZWQucHVzaChwYXJ0c1tpXSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIHJlc3VsdCA9IGNsZWFuZWQuam9pbignJyk7XG4gICAgICAgIGlmICghbGVhZCAmJiByZXN1bHRbMF0gPT09IHBhdGguZGVsaW1pdGVyKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuc2xpY2UoMSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhaWwgJiYgcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSAhPT0gcGF0aC5kZWxpbWl0ZXIpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBwYXRoLmRlbGltaXRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNwbGl0IHRoZSBwYXRobmFtZSBwYXRoIGludG8gYSBwYWlyIFtoZWFkLCB0YWlsXSB3aGVyZSB0YWlsIGlzIHRoZSBmaW5hbCBwYXJ0IG9mIHRoZSBwYXRoXG4gICAgICogYWZ0ZXIgdGhlIGxhc3QgZGVsaW1pdGVyIGFuZCBoZWFkIGlzIGV2ZXJ5dGhpbmcgbGVhZGluZyB1cCB0byB0aGF0LiB0YWlsIHdpbGwgbmV2ZXIgY29udGFpblxuICAgICAqIGEgc2xhc2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aG5hbWUgLSBUaGUgcGF0aCB0byBzcGxpdC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119IFRoZSBzcGxpdCBwYXRoIHdoaWNoIGlzIGFuIGFycmF5IG9mIHR3byBzdHJpbmdzLCB0aGUgcGF0aCBhbmQgdGhlXG4gICAgICogZmlsZW5hbWUuXG4gICAgICovXG4gICAgc3BsaXQocGF0aG5hbWUpIHtcbiAgICAgICAgY29uc3QgbGFzdERlbGltaXRlckluZGV4ID0gcGF0aG5hbWUubGFzdEluZGV4T2YocGF0aC5kZWxpbWl0ZXIpO1xuICAgICAgICBpZiAobGFzdERlbGltaXRlckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIFtwYXRobmFtZS5zdWJzdHJpbmcoMCwgbGFzdERlbGltaXRlckluZGV4KSwgcGF0aG5hbWUuc3Vic3RyaW5nKGxhc3REZWxpbWl0ZXJJbmRleCArIDEpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1wiXCIsIHBhdGhuYW1lXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBiYXNlbmFtZSBvZiB0aGUgcGF0aC4gVGhhdCBpcyB0aGUgc2Vjb25kIGVsZW1lbnQgb2YgdGhlIHBhaXIgcmV0dXJuZWQgYnkgcGFzc2luZ1xuICAgICAqIHBhdGggaW50byB7QGxpbmsgcGF0aC5zcGxpdH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aG5hbWUgLSBUaGUgcGF0aCB0byBwcm9jZXNzLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBiYXNlbmFtZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHBjLnBhdGguZ2V0QmFzZW5hbWUoXCIvcGF0aC90by9maWxlLnR4dFwiKTsgLy8gcmV0dXJucyBcImZpbGUudHh0XCJcbiAgICAgKiBwYy5wYXRoLmdldEJhc2VuYW1lKFwiL3BhdGgvdG8vZGlyXCIpOyAvLyByZXR1cm5zIFwiZGlyXCJcbiAgICAgKi9cbiAgICBnZXRCYXNlbmFtZShwYXRobmFtZSkge1xuICAgICAgICByZXR1cm4gcGF0aC5zcGxpdChwYXRobmFtZSlbMV07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZGlyZWN0b3J5IG5hbWUgZnJvbSB0aGUgcGF0aC4gVGhpcyBpcyBldmVyeXRoaW5nIHVwIHRvIHRoZSBmaW5hbCBpbnN0YW5jZSBvZlxuICAgICAqIHtAbGluayBwYXRoLmRlbGltaXRlcn0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aG5hbWUgLSBUaGUgcGF0aCB0byBnZXQgdGhlIGRpcmVjdG9yeSBmcm9tLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBkaXJlY3RvcnkgcGFydCBvZiB0aGUgcGF0aC5cbiAgICAgKi9cbiAgICBnZXREaXJlY3RvcnkocGF0aG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHBhdGguc3BsaXQocGF0aG5hbWUpWzBdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGV4dGVuc2lvbiBvZiB0aGUgcGF0aC4gUG9wIHRoZSBsYXN0IHZhbHVlIG9mIGEgbGlzdCBhZnRlciBwYXRoIGlzIHNwbGl0IGJ5XG4gICAgICogcXVlc3Rpb24gbWFyayBhbmQgY29tbWEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aG5hbWUgLSBUaGUgcGF0aCB0byBwcm9jZXNzLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBleHRlbnNpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBwYy5wYXRoLmdldEV4dGVuc2lvbihcIi9wYXRoL3RvL2ZpbGUudHh0XCIpOyAvLyByZXR1cm5zIFwiLnR4dFwiXG4gICAgICogcGMucGF0aC5nZXRFeHRlbnNpb24oXCIvcGF0aC90by9maWxlLmpwZ1wiKTsgLy8gcmV0dXJucyBcIi5qcGdcIlxuICAgICAqIHBjLnBhdGguZ2V0RXh0ZW5zaW9uKFwiL3BhdGgvdG8vZmlsZS50eHQ/ZnVuY3Rpb249Z2V0RXh0ZW5zaW9uXCIpOyAvLyByZXR1cm5zIFwiLnR4dFwiXG4gICAgICovXG4gICAgZ2V0RXh0ZW5zaW9uKHBhdGhuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4dCA9IHBhdGhuYW1lLnNwbGl0KCc/JylbMF0uc3BsaXQoJy4nKS5wb3AoKTtcbiAgICAgICAgaWYgKGV4dCAhPT0gcGF0aG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiAnLicgKyBleHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIHN0cmluZyBzIGlzIHJlbGF0aXZlIHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aG5hbWUgLSBUaGUgcGF0aCB0byBwcm9jZXNzLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHMgZG9lc24ndCBzdGFydCB3aXRoIHNsYXNoIGFuZCBkb2Vzbid0IGluY2x1ZGUgY29sb24gYW5kIGRvdWJsZVxuICAgICAqIHNsYXNoLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBwYy5wYXRoLmlzUmVsYXRpdmVQYXRoKFwiZmlsZS50eHRcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqIHBjLnBhdGguaXNSZWxhdGl2ZVBhdGgoXCJwYXRoL3RvL2ZpbGUudHh0XCIpOyAvLyByZXR1cm5zIHRydWVcbiAgICAgKiBwYy5wYXRoLmlzUmVsYXRpdmVQYXRoKFwiLi9wYXRoL3RvL2ZpbGUudHh0XCIpOyAvLyByZXR1cm5zIHRydWVcbiAgICAgKiBwYy5wYXRoLmlzUmVsYXRpdmVQYXRoKFwiLi4vcGF0aC90by9maWxlLmpwZ1wiKTsgLy8gcmV0dXJucyB0cnVlXG4gICAgICogcGMucGF0aC5pc1JlbGF0aXZlUGF0aChcIi9wYXRoL3RvL2ZpbGUuanBnXCIpOyAvLyByZXR1cm5zIGZhbHNlXG4gICAgICogcGMucGF0aC5pc1JlbGF0aXZlUGF0aChcImh0dHA6Ly9wYXRoL3RvL2ZpbGUuanBnXCIpOyAvLyByZXR1cm5zIGZhbHNlXG4gICAgICovXG4gICAgaXNSZWxhdGl2ZVBhdGgocGF0aG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gJy8nICYmIHBhdGhuYW1lLm1hdGNoKC86XFwvXFwvLykgPT09IG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgcGF0aCB3aXRob3V0IGZpbGUgbmFtZS4gSWYgcGF0aCBpcyByZWxhdGl2ZSBwYXRoLCBzdGFydCB3aXRoIHBlcmlvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRobmFtZSAtIFRoZSBmdWxsIHBhdGggdG8gcHJvY2Vzcy5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgcGF0aCB3aXRob3V0IGEgbGFzdCBlbGVtZW50IGZyb20gbGlzdCBzcGxpdCBieSBzbGFzaC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHBjLnBhdGguZXh0cmFjdFBhdGgoXCJwYXRoL3RvL2ZpbGUudHh0XCIpOyAgICAvLyByZXR1cm5zIFwiLi9wYXRoL3RvXCJcbiAgICAgKiBwYy5wYXRoLmV4dHJhY3RQYXRoKFwiLi9wYXRoL3RvL2ZpbGUudHh0XCIpOyAgLy8gcmV0dXJucyBcIi4vcGF0aC90b1wiXG4gICAgICogcGMucGF0aC5leHRyYWN0UGF0aChcIi4uL3BhdGgvdG8vZmlsZS50eHRcIik7IC8vIHJldHVybnMgXCIuLi9wYXRoL3RvXCJcbiAgICAgKiBwYy5wYXRoLmV4dHJhY3RQYXRoKFwiL3BhdGgvdG8vZmlsZS50eHRcIik7ICAgLy8gcmV0dXJucyBcIi9wYXRoL3RvXCJcbiAgICAgKi9cbiAgICBleHRyYWN0UGF0aChwYXRobmFtZSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gcGF0aG5hbWUuc3BsaXQoJy8nKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuXG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBpZiAocGF0aC5pc1JlbGF0aXZlUGF0aChwYXRobmFtZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFydHNbMF0gPT09ICcuJykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gKGkgPT09IDApID8gcGFydHNbaV0gOiAnLycgKyBwYXJ0c1tpXTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0c1swXSA9PT0gJy4uJykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gKGkgPT09IDApID8gcGFydHNbaV0gOiAnLycgKyBwYXJ0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9ICcuJztcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcvJyArIHBhcnRzW2ldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAoaSA9PT0gMCkgPyBwYXJ0c1tpXSA6ICcvJyArIHBhcnRzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn07XG5cbmV4cG9ydCB7IHBhdGggfTtcbiJdLCJuYW1lcyI6WyJwYXRoIiwiZGVsaW1pdGVyIiwiam9pbiIsInNlY3Rpb25zIiwicmVzdWx0IiwiaSIsImxlbmd0aCIsIm9uZSIsInR3byIsIm5vcm1hbGl6ZSIsInBhdGhuYW1lIiwibGVhZCIsInN0YXJ0c1dpdGgiLCJ0cmFpbCIsImVuZHNXaXRoIiwicGFydHMiLCJzcGxpdCIsImNsZWFuZWQiLCJzbGljZSIsInB1c2giLCJsYXN0RGVsaW1pdGVySW5kZXgiLCJsYXN0SW5kZXhPZiIsInN1YnN0cmluZyIsImdldEJhc2VuYW1lIiwiZ2V0RGlyZWN0b3J5IiwiZ2V0RXh0ZW5zaW9uIiwiZXh0IiwicG9wIiwiaXNSZWxhdGl2ZVBhdGgiLCJjaGFyQXQiLCJtYXRjaCIsImV4dHJhY3RQYXRoIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsSUFBSSxHQUFHO0FBQ1Q7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNJQyxFQUFBQSxTQUFTLEVBQUUsR0FBRztBQUVkO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJQyxJQUFJQSxDQUFDLEdBQUdDLFFBQVEsRUFBRTtBQUNkLElBQUEsSUFBSUMsTUFBTSxHQUFHRCxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFFeEIsSUFBQSxLQUFLLElBQUlFLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0YsUUFBUSxDQUFDRyxNQUFNLEdBQUcsQ0FBQyxFQUFFRCxDQUFDLEVBQUUsRUFBRTtBQUMxQyxNQUFBLE1BQU1FLEdBQUcsR0FBR0osUUFBUSxDQUFDRSxDQUFDLENBQUMsQ0FBQTtBQUN2QixNQUFBLE1BQU1HLEdBQUcsR0FBR0wsUUFBUSxDQUFDRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7TUFFM0IsSUFBSUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLUixJQUFJLENBQUNDLFNBQVMsRUFBRTtBQUMzQkcsUUFBQUEsTUFBTSxHQUFHSSxHQUFHLENBQUE7QUFDWixRQUFBLFNBQUE7QUFDSixPQUFBO01BRUEsSUFBSUQsR0FBRyxJQUFJQyxHQUFHLElBQUlELEdBQUcsQ0FBQ0EsR0FBRyxDQUFDRCxNQUFNLEdBQUcsQ0FBQyxDQUFDLEtBQUtOLElBQUksQ0FBQ0MsU0FBUyxJQUFJTyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUtSLElBQUksQ0FBQ0MsU0FBUyxFQUFFO0FBQ25GRyxRQUFBQSxNQUFNLElBQUtKLElBQUksQ0FBQ0MsU0FBUyxHQUFHTyxHQUFJLENBQUE7QUFDcEMsT0FBQyxNQUFNO0FBQ0hKLFFBQUFBLE1BQU0sSUFBSUksR0FBRyxDQUFBO0FBQ2pCLE9BQUE7QUFDSixLQUFBO0FBRUEsSUFBQSxPQUFPSixNQUFNLENBQUE7R0FDaEI7QUFFRDtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSUssU0FBU0EsQ0FBQ0MsUUFBUSxFQUFFO0lBQ2hCLE1BQU1DLElBQUksR0FBR0QsUUFBUSxDQUFDRSxVQUFVLENBQUNaLElBQUksQ0FBQ0MsU0FBUyxDQUFDLENBQUE7SUFDaEQsTUFBTVksS0FBSyxHQUFHSCxRQUFRLENBQUNJLFFBQVEsQ0FBQ2QsSUFBSSxDQUFDQyxTQUFTLENBQUMsQ0FBQTtBQUUvQyxJQUFBLE1BQU1jLEtBQUssR0FBR0wsUUFBUSxDQUFDTSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7SUFFakMsSUFBSVosTUFBTSxHQUFHLEVBQUUsQ0FBQTtJQUVmLElBQUlhLE9BQU8sR0FBRyxFQUFFLENBQUE7QUFFaEIsSUFBQSxLQUFLLElBQUlaLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR1UsS0FBSyxDQUFDVCxNQUFNLEVBQUVELENBQUMsRUFBRSxFQUFFO0FBQ25DLE1BQUEsSUFBSVUsS0FBSyxDQUFDVixDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsU0FBQTtBQUNyQixNQUFBLElBQUlVLEtBQUssQ0FBQ1YsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFLFNBQUE7QUFDdEIsTUFBQSxJQUFJVSxLQUFLLENBQUNWLENBQUMsQ0FBQyxLQUFLLElBQUksSUFBSVksT0FBTyxDQUFDWCxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ3pDVyxRQUFBQSxPQUFPLEdBQUdBLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLENBQUMsRUFBRUQsT0FBTyxDQUFDWCxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUE7QUFDOUMsUUFBQSxTQUFBO0FBQ0osT0FBQTtNQUVBLElBQUlELENBQUMsR0FBRyxDQUFDLEVBQUVZLE9BQU8sQ0FBQ0UsSUFBSSxDQUFDbkIsSUFBSSxDQUFDQyxTQUFTLENBQUMsQ0FBQTtBQUN2Q2dCLE1BQUFBLE9BQU8sQ0FBQ0UsSUFBSSxDQUFDSixLQUFLLENBQUNWLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUIsS0FBQTtBQUdBRCxJQUFBQSxNQUFNLEdBQUdhLE9BQU8sQ0FBQ2YsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFBO0lBQ3pCLElBQUksQ0FBQ1MsSUFBSSxJQUFJUCxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUtKLElBQUksQ0FBQ0MsU0FBUyxFQUFFO0FBQ3ZDRyxNQUFBQSxNQUFNLEdBQUdBLE1BQU0sQ0FBQ2MsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzVCLEtBQUE7QUFFQSxJQUFBLElBQUlMLEtBQUssSUFBSVQsTUFBTSxDQUFDQSxNQUFNLENBQUNFLE1BQU0sR0FBRyxDQUFDLENBQUMsS0FBS04sSUFBSSxDQUFDQyxTQUFTLEVBQUU7TUFDdkRHLE1BQU0sSUFBSUosSUFBSSxDQUFDQyxTQUFTLENBQUE7QUFDNUIsS0FBQTtBQUVBLElBQUEsT0FBT0csTUFBTSxDQUFBO0dBQ2hCO0FBRUQ7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0lZLEtBQUtBLENBQUNOLFFBQVEsRUFBRTtJQUNaLE1BQU1VLGtCQUFrQixHQUFHVixRQUFRLENBQUNXLFdBQVcsQ0FBQ3JCLElBQUksQ0FBQ0MsU0FBUyxDQUFDLENBQUE7QUFDL0QsSUFBQSxJQUFJbUIsa0JBQWtCLEtBQUssQ0FBQyxDQUFDLEVBQUU7QUFDM0IsTUFBQSxPQUFPLENBQUNWLFFBQVEsQ0FBQ1ksU0FBUyxDQUFDLENBQUMsRUFBRUYsa0JBQWtCLENBQUMsRUFBRVYsUUFBUSxDQUFDWSxTQUFTLENBQUNGLGtCQUFrQixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDbEcsS0FBQTtBQUNBLElBQUEsT0FBTyxDQUFDLEVBQUUsRUFBRVYsUUFBUSxDQUFDLENBQUE7R0FDeEI7QUFFRDtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJYSxXQUFXQSxDQUFDYixRQUFRLEVBQUU7SUFDbEIsT0FBT1YsSUFBSSxDQUFDZ0IsS0FBSyxDQUFDTixRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtHQUNqQztBQUVEO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0ljLFlBQVlBLENBQUNkLFFBQVEsRUFBRTtJQUNuQixPQUFPVixJQUFJLENBQUNnQixLQUFLLENBQUNOLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0dBQ2pDO0FBRUQ7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJZSxZQUFZQSxDQUFDZixRQUFRLEVBQUU7QUFDbkIsSUFBQSxNQUFNZ0IsR0FBRyxHQUFHaEIsUUFBUSxDQUFDTSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUNBLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQ1csR0FBRyxFQUFFLENBQUE7SUFDbkQsSUFBSUQsR0FBRyxLQUFLaEIsUUFBUSxFQUFFO01BQ2xCLE9BQU8sR0FBRyxHQUFHZ0IsR0FBRyxDQUFBO0FBQ3BCLEtBQUE7QUFDQSxJQUFBLE9BQU8sRUFBRSxDQUFBO0dBQ1o7QUFFRDtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSUUsY0FBY0EsQ0FBQ2xCLFFBQVEsRUFBRTtBQUNyQixJQUFBLE9BQU9BLFFBQVEsQ0FBQ21CLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLElBQUluQixRQUFRLENBQUNvQixLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssSUFBSSxDQUFBO0dBQ3hFO0FBRUQ7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJQyxXQUFXQSxDQUFDckIsUUFBUSxFQUFFO0lBQ2xCLElBQUlOLE1BQU0sR0FBRyxFQUFFLENBQUE7QUFDZixJQUFBLE1BQU1XLEtBQUssR0FBR0wsUUFBUSxDQUFDTSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDakMsSUFBSVgsQ0FBQyxHQUFHLENBQUMsQ0FBQTtBQUVULElBQUEsSUFBSVUsS0FBSyxDQUFDVCxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ2xCLE1BQUEsSUFBSU4sSUFBSSxDQUFDNEIsY0FBYyxDQUFDbEIsUUFBUSxDQUFDLEVBQUU7QUFDL0IsUUFBQSxJQUFJSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFO0FBQ2xCLFVBQUEsS0FBS1YsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHVSxLQUFLLENBQUNULE1BQU0sR0FBRyxDQUFDLEVBQUUsRUFBRUQsQ0FBQyxFQUFFO0FBQ25DRCxZQUFBQSxNQUFNLElBQUtDLENBQUMsS0FBSyxDQUFDLEdBQUlVLEtBQUssQ0FBQ1YsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHVSxLQUFLLENBQUNWLENBQUMsQ0FBQyxDQUFBO0FBRW5ELFdBQUE7U0FDSCxNQUFNLElBQUlVLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLEVBQUU7QUFDMUIsVUFBQSxLQUFLVixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdVLEtBQUssQ0FBQ1QsTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFRCxDQUFDLEVBQUU7QUFDbkNELFlBQUFBLE1BQU0sSUFBS0MsQ0FBQyxLQUFLLENBQUMsR0FBSVUsS0FBSyxDQUFDVixDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUdVLEtBQUssQ0FBQ1YsQ0FBQyxDQUFDLENBQUE7QUFDbkQsV0FBQTtBQUNKLFNBQUMsTUFBTTtBQUNIRCxVQUFBQSxNQUFNLEdBQUcsR0FBRyxDQUFBO0FBQ1osVUFBQSxLQUFLQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdVLEtBQUssQ0FBQ1QsTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFRCxDQUFDLEVBQUU7QUFDbkNELFlBQUFBLE1BQU0sSUFBSSxHQUFHLEdBQUdXLEtBQUssQ0FBQ1YsQ0FBQyxDQUFDLENBQUE7QUFDNUIsV0FBQTtBQUNKLFNBQUE7QUFDSixPQUFDLE1BQU07QUFDSCxRQUFBLEtBQUtBLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR1UsS0FBSyxDQUFDVCxNQUFNLEdBQUcsQ0FBQyxFQUFFLEVBQUVELENBQUMsRUFBRTtBQUNuQ0QsVUFBQUEsTUFBTSxJQUFLQyxDQUFDLEtBQUssQ0FBQyxHQUFJVSxLQUFLLENBQUNWLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBR1UsS0FBSyxDQUFDVixDQUFDLENBQUMsQ0FBQTtBQUNuRCxTQUFBO0FBQ0osT0FBQTtBQUNKLEtBQUE7QUFDQSxJQUFBLE9BQU9ELE1BQU0sQ0FBQTtBQUNqQixHQUFBO0FBQ0o7Ozs7In0=
