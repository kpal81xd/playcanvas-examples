import { Debug } from '../../core/debug.js';
import { Vec4 } from '../../core/math/vec4.js';
import { QuadRender } from './quad-render.js';
import { RenderPassQuad } from './render-pass-quad.js';

const _tempRect = new Vec4();

/**
 * Draws a screen-space quad using a specific shader.
 *
 * @param {import('../../platform/graphics/graphics-device.js').GraphicsDevice} device - The graphics device used to draw
 * the quad.
 * @param {import('../../platform/graphics/render-target.js').RenderTarget|null} target - The destination render
 * target. If undefined, target is the frame buffer.
 * @param {import('../../platform/graphics/shader.js').Shader} shader - The shader used for rendering the quad. Vertex
 * shader should contain `attribute vec2 vertex_position`.
 * @param {import('../../core/math/vec4.js').Vec4} [rect] - The viewport rectangle of the quad, in
 * pixels. Defaults to fullscreen (`0, 0, target.width, target.height`).
 * @param {import('../../core/math/vec4.js').Vec4} [scissorRect] - The scissor rectangle of the
 * quad, in pixels. Defaults to fullscreen (`0, 0, target.width, target.height`).
 * @category Graphics
 */
function drawQuadWithShader(device, target, shader, rect, scissorRect) {
  // a valid target or a null target (framebuffer) are supported
  Debug.assert(target !== undefined);
  const useBlend = arguments[5];
  Debug.call(() => {
    if (useBlend !== undefined) {
      Debug.warnOnce('pc.drawQuadWithShader no longer accepts useBlend parameter, and blending state needs to be set up using GraphicsDevice.setBlendState.');
    }
  });

  // prepare the quad for rendering with the shader
  const quad = new QuadRender(shader);

  // by default render to the whole render target
  if (!rect) {
    rect = _tempRect;
    rect.x = 0;
    rect.y = 0;
    rect.z = target ? target.width : device.width;
    rect.w = target ? target.height : device.height;
  }

  // prepare a render pass to render the quad to the render target
  const renderPass = new RenderPassQuad(device, quad, rect, scissorRect);
  renderPass.init(target);
  renderPass.colorOps.clear = false;
  renderPass.depthStencilOps.clearDepth = false;

  // TODO: This is a workaround for the case where post-effects are used together with multi-sampled framebuffer. Last post-effect
  // renders into multi-sampled framebuffer (render pass A), which is typically followed by further rendering to this framebuffer,
  // in a separate render pass B (e.g. rendering UI). Those two render passes need to be merged into one, as they both render into
  // the same framebuffer. The workaround here is to store multi-sampled color buffer, instead of only resolving it, which is wasted
  // memory bandwidth. Without this we end up with a black result (or just UI), as multi-sampled color buffer is never written to.
  if (device.isWebGPU && target === null && device.samples > 1) {
    renderPass.colorOps.store = true;
  }
  renderPass.render();
  quad.destroy();
}

/**
 * Draws a texture in screen-space. Mostly used by post-effects.
 *
 * @param {import('../../platform/graphics/graphics-device.js').GraphicsDevice} device - The graphics device used to draw
 * the texture.
 * @param {import('../../platform/graphics/texture.js').Texture} texture - The source texture to be drawn. Accessible as
 * `uniform sampler2D * source` in shader.
 * @param {import('../../platform/graphics/render-target.js').RenderTarget} [target] - The destination render target.
 * Defaults to the frame buffer.
 * @param {import('../../platform/graphics/shader.js').Shader} [shader] - The optional custom shader used for rendering the texture.
 * @param {import('../../core/math/vec4.js').Vec4} [rect] - The viewport rectangle to use for the
 * texture, in pixels. Defaults to fullscreen (`0, 0, target.width, target.height`).
 * @param {import('../../core/math/vec4.js').Vec4} [scissorRect] - The scissor rectangle to use for
 * the texture, in pixels. Defaults to fullscreen (`0, 0, target.width, target.height`).
 * @category Graphics
 */
function drawTexture(device, texture, target, shader, rect, scissorRect) {
  Debug.assert(!device.isWebGPU, 'pc.drawTexture is not currently supported on WebGPU platform.');
  const useBlend = arguments[6];
  Debug.call(() => {
    if (useBlend !== undefined) {
      Debug.warnOnce('pc.drawTexture no longer accepts useBlend parameter, and blending state needs to be set up using GraphicsDevice.setBlendState.');
    }
  });
  shader = shader || device.getCopyShader();
  device.constantTexSource.setValue(texture);
  drawQuadWithShader(device, target, shader, rect, scissorRect);
}

export { drawQuadWithShader, drawTexture };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVhZC1yZW5kZXItdXRpbHMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9zY2VuZS9ncmFwaGljcy9xdWFkLXJlbmRlci11dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWJ1ZyB9IGZyb20gJy4uLy4uL2NvcmUvZGVidWcuanMnO1xuaW1wb3J0IHsgVmVjNCB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aC92ZWM0LmpzJztcblxuaW1wb3J0IHsgUXVhZFJlbmRlciB9IGZyb20gJy4vcXVhZC1yZW5kZXIuanMnO1xuaW1wb3J0IHsgUmVuZGVyUGFzc1F1YWQgfSBmcm9tICcuL3JlbmRlci1wYXNzLXF1YWQuanMnO1xuXG5jb25zdCBfdGVtcFJlY3QgPSBuZXcgVmVjNCgpO1xuXG4vKipcbiAqIERyYXdzIGEgc2NyZWVuLXNwYWNlIHF1YWQgdXNpbmcgYSBzcGVjaWZpYyBzaGFkZXIuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL2dyYXBoaWNzLWRldmljZS5qcycpLkdyYXBoaWNzRGV2aWNlfSBkZXZpY2UgLSBUaGUgZ3JhcGhpY3MgZGV2aWNlIHVzZWQgdG8gZHJhd1xuICogdGhlIHF1YWQuXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvcmVuZGVyLXRhcmdldC5qcycpLlJlbmRlclRhcmdldHxudWxsfSB0YXJnZXQgLSBUaGUgZGVzdGluYXRpb24gcmVuZGVyXG4gKiB0YXJnZXQuIElmIHVuZGVmaW5lZCwgdGFyZ2V0IGlzIHRoZSBmcmFtZSBidWZmZXIuXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3Mvc2hhZGVyLmpzJykuU2hhZGVyfSBzaGFkZXIgLSBUaGUgc2hhZGVyIHVzZWQgZm9yIHJlbmRlcmluZyB0aGUgcXVhZC4gVmVydGV4XG4gKiBzaGFkZXIgc2hvdWxkIGNvbnRhaW4gYGF0dHJpYnV0ZSB2ZWMyIHZlcnRleF9wb3NpdGlvbmAuXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vY29yZS9tYXRoL3ZlYzQuanMnKS5WZWM0fSBbcmVjdF0gLSBUaGUgdmlld3BvcnQgcmVjdGFuZ2xlIG9mIHRoZSBxdWFkLCBpblxuICogcGl4ZWxzLiBEZWZhdWx0cyB0byBmdWxsc2NyZWVuIChgMCwgMCwgdGFyZ2V0LndpZHRoLCB0YXJnZXQuaGVpZ2h0YCkuXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vY29yZS9tYXRoL3ZlYzQuanMnKS5WZWM0fSBbc2Npc3NvclJlY3RdIC0gVGhlIHNjaXNzb3IgcmVjdGFuZ2xlIG9mIHRoZVxuICogcXVhZCwgaW4gcGl4ZWxzLiBEZWZhdWx0cyB0byBmdWxsc2NyZWVuIChgMCwgMCwgdGFyZ2V0LndpZHRoLCB0YXJnZXQuaGVpZ2h0YCkuXG4gKiBAY2F0ZWdvcnkgR3JhcGhpY3NcbiAqL1xuZnVuY3Rpb24gZHJhd1F1YWRXaXRoU2hhZGVyKGRldmljZSwgdGFyZ2V0LCBzaGFkZXIsIHJlY3QsIHNjaXNzb3JSZWN0KSB7XG5cbiAgICAvLyBhIHZhbGlkIHRhcmdldCBvciBhIG51bGwgdGFyZ2V0IChmcmFtZWJ1ZmZlcikgYXJlIHN1cHBvcnRlZFxuICAgIERlYnVnLmFzc2VydCh0YXJnZXQgIT09IHVuZGVmaW5lZCk7XG5cbiAgICBjb25zdCB1c2VCbGVuZCA9IGFyZ3VtZW50c1s1XTtcbiAgICBEZWJ1Zy5jYWxsKCgpID0+IHtcbiAgICAgICAgaWYgKHVzZUJsZW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIERlYnVnLndhcm5PbmNlKCdwYy5kcmF3UXVhZFdpdGhTaGFkZXIgbm8gbG9uZ2VyIGFjY2VwdHMgdXNlQmxlbmQgcGFyYW1ldGVyLCBhbmQgYmxlbmRpbmcgc3RhdGUgbmVlZHMgdG8gYmUgc2V0IHVwIHVzaW5nIEdyYXBoaWNzRGV2aWNlLnNldEJsZW5kU3RhdGUuJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHByZXBhcmUgdGhlIHF1YWQgZm9yIHJlbmRlcmluZyB3aXRoIHRoZSBzaGFkZXJcbiAgICBjb25zdCBxdWFkID0gbmV3IFF1YWRSZW5kZXIoc2hhZGVyKTtcblxuICAgIC8vIGJ5IGRlZmF1bHQgcmVuZGVyIHRvIHRoZSB3aG9sZSByZW5kZXIgdGFyZ2V0XG4gICAgaWYgKCFyZWN0KSB7XG4gICAgICAgIHJlY3QgPSBfdGVtcFJlY3Q7XG4gICAgICAgIHJlY3QueCA9IDA7XG4gICAgICAgIHJlY3QueSA9IDA7XG4gICAgICAgIHJlY3QueiA9IHRhcmdldCA/IHRhcmdldC53aWR0aCA6IGRldmljZS53aWR0aDtcbiAgICAgICAgcmVjdC53ID0gdGFyZ2V0ID8gdGFyZ2V0LmhlaWdodCA6IGRldmljZS5oZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8gcHJlcGFyZSBhIHJlbmRlciBwYXNzIHRvIHJlbmRlciB0aGUgcXVhZCB0byB0aGUgcmVuZGVyIHRhcmdldFxuICAgIGNvbnN0IHJlbmRlclBhc3MgPSBuZXcgUmVuZGVyUGFzc1F1YWQoZGV2aWNlLCBxdWFkLCByZWN0LCBzY2lzc29yUmVjdCk7XG4gICAgcmVuZGVyUGFzcy5pbml0KHRhcmdldCk7XG4gICAgcmVuZGVyUGFzcy5jb2xvck9wcy5jbGVhciA9IGZhbHNlO1xuICAgIHJlbmRlclBhc3MuZGVwdGhTdGVuY2lsT3BzLmNsZWFyRGVwdGggPSBmYWxzZTtcblxuICAgIC8vIFRPRE86IFRoaXMgaXMgYSB3b3JrYXJvdW5kIGZvciB0aGUgY2FzZSB3aGVyZSBwb3N0LWVmZmVjdHMgYXJlIHVzZWQgdG9nZXRoZXIgd2l0aCBtdWx0aS1zYW1wbGVkIGZyYW1lYnVmZmVyLiBMYXN0IHBvc3QtZWZmZWN0XG4gICAgLy8gcmVuZGVycyBpbnRvIG11bHRpLXNhbXBsZWQgZnJhbWVidWZmZXIgKHJlbmRlciBwYXNzIEEpLCB3aGljaCBpcyB0eXBpY2FsbHkgZm9sbG93ZWQgYnkgZnVydGhlciByZW5kZXJpbmcgdG8gdGhpcyBmcmFtZWJ1ZmZlcixcbiAgICAvLyBpbiBhIHNlcGFyYXRlIHJlbmRlciBwYXNzIEIgKGUuZy4gcmVuZGVyaW5nIFVJKS4gVGhvc2UgdHdvIHJlbmRlciBwYXNzZXMgbmVlZCB0byBiZSBtZXJnZWQgaW50byBvbmUsIGFzIHRoZXkgYm90aCByZW5kZXIgaW50b1xuICAgIC8vIHRoZSBzYW1lIGZyYW1lYnVmZmVyLiBUaGUgd29ya2Fyb3VuZCBoZXJlIGlzIHRvIHN0b3JlIG11bHRpLXNhbXBsZWQgY29sb3IgYnVmZmVyLCBpbnN0ZWFkIG9mIG9ubHkgcmVzb2x2aW5nIGl0LCB3aGljaCBpcyB3YXN0ZWRcbiAgICAvLyBtZW1vcnkgYmFuZHdpZHRoLiBXaXRob3V0IHRoaXMgd2UgZW5kIHVwIHdpdGggYSBibGFjayByZXN1bHQgKG9yIGp1c3QgVUkpLCBhcyBtdWx0aS1zYW1wbGVkIGNvbG9yIGJ1ZmZlciBpcyBuZXZlciB3cml0dGVuIHRvLlxuICAgIGlmIChkZXZpY2UuaXNXZWJHUFUgJiYgdGFyZ2V0ID09PSBudWxsICYmIGRldmljZS5zYW1wbGVzID4gMSkge1xuICAgICAgICByZW5kZXJQYXNzLmNvbG9yT3BzLnN0b3JlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZW5kZXJQYXNzLnJlbmRlcigpO1xuXG4gICAgcXVhZC5kZXN0cm95KCk7XG59XG5cbi8qKlxuICogRHJhd3MgYSB0ZXh0dXJlIGluIHNjcmVlbi1zcGFjZS4gTW9zdGx5IHVzZWQgYnkgcG9zdC1lZmZlY3RzLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9ncmFwaGljcy1kZXZpY2UuanMnKS5HcmFwaGljc0RldmljZX0gZGV2aWNlIC0gVGhlIGdyYXBoaWNzIGRldmljZSB1c2VkIHRvIGRyYXdcbiAqIHRoZSB0ZXh0dXJlLlxuICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3RleHR1cmUuanMnKS5UZXh0dXJlfSB0ZXh0dXJlIC0gVGhlIHNvdXJjZSB0ZXh0dXJlIHRvIGJlIGRyYXduLiBBY2Nlc3NpYmxlIGFzXG4gKiBgdW5pZm9ybSBzYW1wbGVyMkQgKiBzb3VyY2VgIGluIHNoYWRlci5cbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9yZW5kZXItdGFyZ2V0LmpzJykuUmVuZGVyVGFyZ2V0fSBbdGFyZ2V0XSAtIFRoZSBkZXN0aW5hdGlvbiByZW5kZXIgdGFyZ2V0LlxuICogRGVmYXVsdHMgdG8gdGhlIGZyYW1lIGJ1ZmZlci5cbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9zaGFkZXIuanMnKS5TaGFkZXJ9IFtzaGFkZXJdIC0gVGhlIG9wdGlvbmFsIGN1c3RvbSBzaGFkZXIgdXNlZCBmb3IgcmVuZGVyaW5nIHRoZSB0ZXh0dXJlLlxuICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL2NvcmUvbWF0aC92ZWM0LmpzJykuVmVjNH0gW3JlY3RdIC0gVGhlIHZpZXdwb3J0IHJlY3RhbmdsZSB0byB1c2UgZm9yIHRoZVxuICogdGV4dHVyZSwgaW4gcGl4ZWxzLiBEZWZhdWx0cyB0byBmdWxsc2NyZWVuIChgMCwgMCwgdGFyZ2V0LndpZHRoLCB0YXJnZXQuaGVpZ2h0YCkuXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vY29yZS9tYXRoL3ZlYzQuanMnKS5WZWM0fSBbc2Npc3NvclJlY3RdIC0gVGhlIHNjaXNzb3IgcmVjdGFuZ2xlIHRvIHVzZSBmb3JcbiAqIHRoZSB0ZXh0dXJlLCBpbiBwaXhlbHMuIERlZmF1bHRzIHRvIGZ1bGxzY3JlZW4gKGAwLCAwLCB0YXJnZXQud2lkdGgsIHRhcmdldC5oZWlnaHRgKS5cbiAqIEBjYXRlZ29yeSBHcmFwaGljc1xuICovXG5mdW5jdGlvbiBkcmF3VGV4dHVyZShkZXZpY2UsIHRleHR1cmUsIHRhcmdldCwgc2hhZGVyLCByZWN0LCBzY2lzc29yUmVjdCkge1xuICAgIERlYnVnLmFzc2VydCghZGV2aWNlLmlzV2ViR1BVLCAncGMuZHJhd1RleHR1cmUgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgb24gV2ViR1BVIHBsYXRmb3JtLicpO1xuXG4gICAgY29uc3QgdXNlQmxlbmQgPSBhcmd1bWVudHNbNl07XG4gICAgRGVidWcuY2FsbCgoKSA9PiB7XG4gICAgICAgIGlmICh1c2VCbGVuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBEZWJ1Zy53YXJuT25jZSgncGMuZHJhd1RleHR1cmUgbm8gbG9uZ2VyIGFjY2VwdHMgdXNlQmxlbmQgcGFyYW1ldGVyLCBhbmQgYmxlbmRpbmcgc3RhdGUgbmVlZHMgdG8gYmUgc2V0IHVwIHVzaW5nIEdyYXBoaWNzRGV2aWNlLnNldEJsZW5kU3RhdGUuJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHNoYWRlciA9IHNoYWRlciB8fCBkZXZpY2UuZ2V0Q29weVNoYWRlcigpO1xuICAgIGRldmljZS5jb25zdGFudFRleFNvdXJjZS5zZXRWYWx1ZSh0ZXh0dXJlKTtcbiAgICBkcmF3UXVhZFdpdGhTaGFkZXIoZGV2aWNlLCB0YXJnZXQsIHNoYWRlciwgcmVjdCwgc2Npc3NvclJlY3QpO1xufVxuXG5leHBvcnQgeyBkcmF3UXVhZFdpdGhTaGFkZXIsIGRyYXdUZXh0dXJlIH07XG4iXSwibmFtZXMiOlsiX3RlbXBSZWN0IiwiVmVjNCIsImRyYXdRdWFkV2l0aFNoYWRlciIsImRldmljZSIsInRhcmdldCIsInNoYWRlciIsInJlY3QiLCJzY2lzc29yUmVjdCIsIkRlYnVnIiwiYXNzZXJ0IiwidW5kZWZpbmVkIiwidXNlQmxlbmQiLCJhcmd1bWVudHMiLCJjYWxsIiwid2Fybk9uY2UiLCJxdWFkIiwiUXVhZFJlbmRlciIsIngiLCJ5IiwieiIsIndpZHRoIiwidyIsImhlaWdodCIsInJlbmRlclBhc3MiLCJSZW5kZXJQYXNzUXVhZCIsImluaXQiLCJjb2xvck9wcyIsImNsZWFyIiwiZGVwdGhTdGVuY2lsT3BzIiwiY2xlYXJEZXB0aCIsImlzV2ViR1BVIiwic2FtcGxlcyIsInN0b3JlIiwicmVuZGVyIiwiZGVzdHJveSIsImRyYXdUZXh0dXJlIiwidGV4dHVyZSIsImdldENvcHlTaGFkZXIi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
