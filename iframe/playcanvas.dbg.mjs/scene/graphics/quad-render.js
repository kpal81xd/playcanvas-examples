import { Debug, DebugHelper } from '../../core/debug.js';
import { Vec4 } from '../../core/math/vec4.js';
import { BindGroup } from '../../platform/graphics/bind-group.js';
import { BINDGROUP_MESH, PRIMITIVE_TRISTRIP } from '../../platform/graphics/constants.js';
import { DebugGraphics } from '../../platform/graphics/debug-graphics.js';
import { ShaderProcessorOptions } from '../../platform/graphics/shader-processor-options.js';
import { UniformBuffer } from '../../platform/graphics/uniform-buffer.js';
import { processShader } from '../shader-lib/utils.js';

const _quadPrimitive = {
  type: PRIMITIVE_TRISTRIP,
  base: 0,
  count: 4,
  indexed: false
};
const _tempViewport = new Vec4();
const _tempScissor = new Vec4();

/**
 * An object that renders a quad using a {@link Shader}.
 *
 * Example:
 *
 * ```javascript
 * const shader = pc.createShaderFromCode(app.graphicsDevice, vertexShader, fragmentShader, `MyShader`);
 * const quad = new QuadRender(shader);
 * quad.render();
 * quad.destroy();
 * ```
 *
 * @category Graphics
 */
class QuadRender {
  /**
   * Create a new QuadRender instance.
   *
   * @param {import('../../platform/graphics/shader.js').Shader} shader - The shader to be used to render the quad.
   */
  constructor(shader) {
    /**
     * @type {UniformBuffer}
     * @ignore
     */
    this.uniformBuffer = void 0;
    /**
     * @type {BindGroup}
     * @ignore
     */
    this.bindGroup = void 0;
    const device = shader.device;
    this.shader = shader;
    Debug.assert(shader);
    if (device.supportsUniformBuffers) {
      // add uniform buffer support to shader
      const processingOptions = new ShaderProcessorOptions();
      this.shader = processShader(shader, processingOptions);

      // uniform buffer
      const ubFormat = this.shader.meshUniformBufferFormat;
      if (ubFormat) {
        this.uniformBuffer = new UniformBuffer(device, ubFormat, false);
      }

      // bind group
      const bindGroupFormat = this.shader.meshBindGroupFormat;
      Debug.assert(bindGroupFormat);
      this.bindGroup = new BindGroup(device, bindGroupFormat, this.uniformBuffer);
      DebugHelper.setName(this.bindGroup, `QuadRender-MeshBindGroup_${this.bindGroup.id}`);
    }
  }

  /**
   * Destroys the resources associated with this instance.
   */
  destroy() {
    var _this$uniformBuffer, _this$bindGroup;
    (_this$uniformBuffer = this.uniformBuffer) == null || _this$uniformBuffer.destroy();
    this.uniformBuffer = null;
    (_this$bindGroup = this.bindGroup) == null || _this$bindGroup.destroy();
    this.bindGroup = null;
  }

  /**
   * Renders the quad. If the viewport is provided, the original viewport and scissor is restored
   * after the rendering.
   *
   * @param {import('../../core/math/vec4.js').Vec4} [viewport] - The viewport rectangle of the
   * quad, in pixels. The viewport is not changed if not provided.
   * @param {import('../../core/math/vec4.js').Vec4} [scissor] - The scissor rectangle of the
   * quad, in pixels. Used only if the viewport is provided.
   */
  render(viewport, scissor) {
    const device = this.shader.device;
    DebugGraphics.pushGpuMarker(device, "QuadRender");

    // only modify viewport or scissor if viewport supplied
    if (viewport) {
      var _scissor;
      // backup current settings
      _tempViewport.set(device.vx, device.vy, device.vw, device.vh);
      _tempScissor.set(device.sx, device.sy, device.sw, device.sh);

      // set new values
      scissor = (_scissor = scissor) != null ? _scissor : viewport;
      device.setViewport(viewport.x, viewport.y, viewport.z, viewport.w);
      device.setScissor(scissor.x, scissor.y, scissor.z, scissor.w);
    }
    device.setVertexBuffer(device.quadVertexBuffer, 0);
    const shader = this.shader;
    device.setShader(shader);
    if (device.supportsUniformBuffers) {
      var _bindGroup$defaultUni;
      const bindGroup = this.bindGroup;
      (_bindGroup$defaultUni = bindGroup.defaultUniformBuffer) == null || _bindGroup$defaultUni.update();
      bindGroup.update();
      device.setBindGroup(BINDGROUP_MESH, bindGroup);
    }
    device.draw(_quadPrimitive);

    // restore if changed
    if (viewport) {
      device.setViewport(_tempViewport.x, _tempViewport.y, _tempViewport.z, _tempViewport.w);
      device.setScissor(_tempScissor.x, _tempScissor.y, _tempScissor.z, _tempScissor.w);
    }
    DebugGraphics.popGpuMarker(device);
  }
}

export { QuadRender };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVhZC1yZW5kZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9zY2VuZS9ncmFwaGljcy9xdWFkLXJlbmRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWJ1ZywgRGVidWdIZWxwZXIgfSBmcm9tIFwiLi4vLi4vY29yZS9kZWJ1Zy5qc1wiO1xuaW1wb3J0IHsgVmVjNCB9IGZyb20gXCIuLi8uLi9jb3JlL21hdGgvdmVjNC5qc1wiO1xuaW1wb3J0IHsgQmluZEdyb3VwIH0gZnJvbSBcIi4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL2JpbmQtZ3JvdXAuanNcIjtcbmltcG9ydCB7IEJJTkRHUk9VUF9NRVNILCBQUklNSVRJVkVfVFJJU1RSSVAgfSBmcm9tIFwiLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBEZWJ1Z0dyYXBoaWNzIH0gZnJvbSBcIi4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL2RlYnVnLWdyYXBoaWNzLmpzXCI7XG5pbXBvcnQgeyBTaGFkZXJQcm9jZXNzb3JPcHRpb25zIH0gZnJvbSBcIi4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3NoYWRlci1wcm9jZXNzb3Itb3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgVW5pZm9ybUJ1ZmZlciB9IGZyb20gXCIuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy91bmlmb3JtLWJ1ZmZlci5qc1wiO1xuaW1wb3J0IHsgcHJvY2Vzc1NoYWRlciB9IGZyb20gXCIuLi9zaGFkZXItbGliL3V0aWxzLmpzXCI7XG5cbmNvbnN0IF9xdWFkUHJpbWl0aXZlID0ge1xuICAgIHR5cGU6IFBSSU1JVElWRV9UUklTVFJJUCxcbiAgICBiYXNlOiAwLFxuICAgIGNvdW50OiA0LFxuICAgIGluZGV4ZWQ6IGZhbHNlXG59O1xuXG5jb25zdCBfdGVtcFZpZXdwb3J0ID0gbmV3IFZlYzQoKTtcbmNvbnN0IF90ZW1wU2Npc3NvciA9IG5ldyBWZWM0KCk7XG5cbi8qKlxuICogQW4gb2JqZWN0IHRoYXQgcmVuZGVycyBhIHF1YWQgdXNpbmcgYSB7QGxpbmsgU2hhZGVyfS5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIGNvbnN0IHNoYWRlciA9IHBjLmNyZWF0ZVNoYWRlckZyb21Db2RlKGFwcC5ncmFwaGljc0RldmljZSwgdmVydGV4U2hhZGVyLCBmcmFnbWVudFNoYWRlciwgYE15U2hhZGVyYCk7XG4gKiBjb25zdCBxdWFkID0gbmV3IFF1YWRSZW5kZXIoc2hhZGVyKTtcbiAqIHF1YWQucmVuZGVyKCk7XG4gKiBxdWFkLmRlc3Ryb3koKTtcbiAqIGBgYFxuICpcbiAqIEBjYXRlZ29yeSBHcmFwaGljc1xuICovXG5jbGFzcyBRdWFkUmVuZGVyIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7VW5pZm9ybUJ1ZmZlcn1cbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgdW5pZm9ybUJ1ZmZlcjtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtCaW5kR3JvdXB9XG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIGJpbmRHcm91cDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBRdWFkUmVuZGVyIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3NoYWRlci5qcycpLlNoYWRlcn0gc2hhZGVyIC0gVGhlIHNoYWRlciB0byBiZSB1c2VkIHRvIHJlbmRlciB0aGUgcXVhZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzaGFkZXIpIHtcblxuICAgICAgICBjb25zdCBkZXZpY2UgPSBzaGFkZXIuZGV2aWNlO1xuICAgICAgICB0aGlzLnNoYWRlciA9IHNoYWRlcjtcbiAgICAgICAgRGVidWcuYXNzZXJ0KHNoYWRlcik7XG5cbiAgICAgICAgaWYgKGRldmljZS5zdXBwb3J0c1VuaWZvcm1CdWZmZXJzKSB7XG5cbiAgICAgICAgICAgIC8vIGFkZCB1bmlmb3JtIGJ1ZmZlciBzdXBwb3J0IHRvIHNoYWRlclxuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2luZ09wdGlvbnMgPSBuZXcgU2hhZGVyUHJvY2Vzc29yT3B0aW9ucygpO1xuICAgICAgICAgICAgdGhpcy5zaGFkZXIgPSBwcm9jZXNzU2hhZGVyKHNoYWRlciwgcHJvY2Vzc2luZ09wdGlvbnMpO1xuXG4gICAgICAgICAgICAvLyB1bmlmb3JtIGJ1ZmZlclxuICAgICAgICAgICAgY29uc3QgdWJGb3JtYXQgPSB0aGlzLnNoYWRlci5tZXNoVW5pZm9ybUJ1ZmZlckZvcm1hdDtcbiAgICAgICAgICAgIGlmICh1YkZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5pZm9ybUJ1ZmZlciA9IG5ldyBVbmlmb3JtQnVmZmVyKGRldmljZSwgdWJGb3JtYXQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYmluZCBncm91cFxuICAgICAgICAgICAgY29uc3QgYmluZEdyb3VwRm9ybWF0ID0gdGhpcy5zaGFkZXIubWVzaEJpbmRHcm91cEZvcm1hdDtcbiAgICAgICAgICAgIERlYnVnLmFzc2VydChiaW5kR3JvdXBGb3JtYXQpO1xuICAgICAgICAgICAgdGhpcy5iaW5kR3JvdXAgPSBuZXcgQmluZEdyb3VwKGRldmljZSwgYmluZEdyb3VwRm9ybWF0LCB0aGlzLnVuaWZvcm1CdWZmZXIpO1xuICAgICAgICAgICAgRGVidWdIZWxwZXIuc2V0TmFtZSh0aGlzLmJpbmRHcm91cCwgYFF1YWRSZW5kZXItTWVzaEJpbmRHcm91cF8ke3RoaXMuYmluZEdyb3VwLmlkfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhlIHJlc291cmNlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnVuaWZvcm1CdWZmZXI/LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy51bmlmb3JtQnVmZmVyID0gbnVsbDtcblxuICAgICAgICB0aGlzLmJpbmRHcm91cD8uZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmJpbmRHcm91cCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgcXVhZC4gSWYgdGhlIHZpZXdwb3J0IGlzIHByb3ZpZGVkLCB0aGUgb3JpZ2luYWwgdmlld3BvcnQgYW5kIHNjaXNzb3IgaXMgcmVzdG9yZWRcbiAgICAgKiBhZnRlciB0aGUgcmVuZGVyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL2NvcmUvbWF0aC92ZWM0LmpzJykuVmVjNH0gW3ZpZXdwb3J0XSAtIFRoZSB2aWV3cG9ydCByZWN0YW5nbGUgb2YgdGhlXG4gICAgICogcXVhZCwgaW4gcGl4ZWxzLiBUaGUgdmlld3BvcnQgaXMgbm90IGNoYW5nZWQgaWYgbm90IHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9jb3JlL21hdGgvdmVjNC5qcycpLlZlYzR9IFtzY2lzc29yXSAtIFRoZSBzY2lzc29yIHJlY3RhbmdsZSBvZiB0aGVcbiAgICAgKiBxdWFkLCBpbiBwaXhlbHMuIFVzZWQgb25seSBpZiB0aGUgdmlld3BvcnQgaXMgcHJvdmlkZWQuXG4gICAgICovXG4gICAgcmVuZGVyKHZpZXdwb3J0LCBzY2lzc29yKSB7XG5cbiAgICAgICAgY29uc3QgZGV2aWNlID0gdGhpcy5zaGFkZXIuZGV2aWNlO1xuICAgICAgICBEZWJ1Z0dyYXBoaWNzLnB1c2hHcHVNYXJrZXIoZGV2aWNlLCBcIlF1YWRSZW5kZXJcIik7XG5cbiAgICAgICAgLy8gb25seSBtb2RpZnkgdmlld3BvcnQgb3Igc2Npc3NvciBpZiB2aWV3cG9ydCBzdXBwbGllZFxuICAgICAgICBpZiAodmlld3BvcnQpIHtcblxuICAgICAgICAgICAgLy8gYmFja3VwIGN1cnJlbnQgc2V0dGluZ3NcbiAgICAgICAgICAgIF90ZW1wVmlld3BvcnQuc2V0KGRldmljZS52eCwgZGV2aWNlLnZ5LCBkZXZpY2UudncsIGRldmljZS52aCk7XG4gICAgICAgICAgICBfdGVtcFNjaXNzb3Iuc2V0KGRldmljZS5zeCwgZGV2aWNlLnN5LCBkZXZpY2Uuc3csIGRldmljZS5zaCk7XG5cbiAgICAgICAgICAgIC8vIHNldCBuZXcgdmFsdWVzXG4gICAgICAgICAgICBzY2lzc29yID0gc2Npc3NvciA/PyB2aWV3cG9ydDtcbiAgICAgICAgICAgIGRldmljZS5zZXRWaWV3cG9ydCh2aWV3cG9ydC54LCB2aWV3cG9ydC55LCB2aWV3cG9ydC56LCB2aWV3cG9ydC53KTtcbiAgICAgICAgICAgIGRldmljZS5zZXRTY2lzc29yKHNjaXNzb3IueCwgc2Npc3Nvci55LCBzY2lzc29yLnosIHNjaXNzb3Iudyk7XG4gICAgICAgIH1cblxuICAgICAgICBkZXZpY2Uuc2V0VmVydGV4QnVmZmVyKGRldmljZS5xdWFkVmVydGV4QnVmZmVyLCAwKTtcblxuICAgICAgICBjb25zdCBzaGFkZXIgPSB0aGlzLnNoYWRlcjtcbiAgICAgICAgZGV2aWNlLnNldFNoYWRlcihzaGFkZXIpO1xuXG4gICAgICAgIGlmIChkZXZpY2Uuc3VwcG9ydHNVbmlmb3JtQnVmZmVycykge1xuXG4gICAgICAgICAgICBjb25zdCBiaW5kR3JvdXAgPSB0aGlzLmJpbmRHcm91cDtcbiAgICAgICAgICAgIGJpbmRHcm91cC5kZWZhdWx0VW5pZm9ybUJ1ZmZlcj8udXBkYXRlKCk7XG4gICAgICAgICAgICBiaW5kR3JvdXAudXBkYXRlKCk7XG4gICAgICAgICAgICBkZXZpY2Uuc2V0QmluZEdyb3VwKEJJTkRHUk9VUF9NRVNILCBiaW5kR3JvdXApO1xuICAgICAgICB9XG5cbiAgICAgICAgZGV2aWNlLmRyYXcoX3F1YWRQcmltaXRpdmUpO1xuXG4gICAgICAgIC8vIHJlc3RvcmUgaWYgY2hhbmdlZFxuICAgICAgICBpZiAodmlld3BvcnQpIHtcbiAgICAgICAgICAgIGRldmljZS5zZXRWaWV3cG9ydChfdGVtcFZpZXdwb3J0LngsIF90ZW1wVmlld3BvcnQueSwgX3RlbXBWaWV3cG9ydC56LCBfdGVtcFZpZXdwb3J0LncpO1xuICAgICAgICAgICAgZGV2aWNlLnNldFNjaXNzb3IoX3RlbXBTY2lzc29yLngsIF90ZW1wU2Npc3Nvci55LCBfdGVtcFNjaXNzb3IueiwgX3RlbXBTY2lzc29yLncpO1xuICAgICAgICB9XG5cbiAgICAgICAgRGVidWdHcmFwaGljcy5wb3BHcHVNYXJrZXIoZGV2aWNlKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IFF1YWRSZW5kZXIgfTtcbiJdLCJuYW1lcyI6WyJfcXVhZFByaW1pdGl2ZSIsInR5cGUiLCJQUklNSVRJVkVfVFJJU1RSSVAiLCJiYXNlIiwiY291bnQiLCJpbmRleGVkIiwiX3RlbXBWaWV3cG9ydCIsIlZlYzQiLCJfdGVtcFNjaXNzb3IiLCJRdWFkUmVuZGVyIiwiY29uc3RydWN0b3IiLCJzaGFkZXIiLCJ1bmlmb3JtQnVmZmVyIiwiYmluZEdyb3VwIiwiZGV2aWNlIiwiRGVidWciLCJhc3NlcnQiLCJzdXBwb3J0c1VuaWZvcm1CdWZmZXJzIiwicHJvY2Vzc2luZ09wdGlvbnMiLCJTaGFkZXJQcm9jZXNzb3JPcHRpb25zIiwicHJvY2Vzc1NoYWRlciIsInViRm9ybWF0IiwibWVzaFVuaWZvcm1CdWZmZXJGb3JtYXQiLCJVbmlmb3JtQnVmZmVyIiwiYmluZEdyb3VwRm9ybWF0IiwibWVzaEJpbmRHcm91cEZvcm1hdCIsIkJpbmRHcm91cCIsIkRlYnVnSGVscGVyIiwic2V0TmFtZSIsImlkIiwiZGVzdHJveSIsIl90aGlzJHVuaWZvcm1CdWZmZXIiLCJfdGhpcyRiaW5kR3JvdXAiLCJyZW5kZXIiLCJ2aWV3cG9ydCIsInNjaXNzb3IiLCJEZWJ1Z0dyYXBoaWNzIiwicHVzaEdwdU1hcmtlciIsIl9zY2lzc29yIiwic2V0IiwidngiLCJ2eSIsInZ3IiwidmgiLCJzeCIsInN5Iiwic3ciLCJzaCIsInNldFZpZXdwb3J0IiwieCIsInkiLCJ6IiwidyIsInNldFNjaXNzb3IiLCJzZXRWZXJ0ZXhCdWZmZXIiLCJxdWFkVmVydGV4QnVmZmVyIiwic2V0U2hhZGVyIiwiX2JpbmRHcm91cCRkZWZhdWx0VW5pIiwiZGVmYXVsdFVuaWZvcm1CdWZmZXIiLCJ1cGRhdGUiLCJzZXRCaW5kR3JvdXAiLCJCSU5ER1JPVVBfTUVTSCIsImRyYXciLCJwb3BHcHVNYXJrZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQVNBLE1BQU1BLGNBQWMsR0FBRztBQUNuQkMsRUFBQUEsSUFBSSxFQUFFQyxrQkFBa0I7QUFDeEJDLEVBQUFBLElBQUksRUFBRSxDQUFDO0FBQ1BDLEVBQUFBLEtBQUssRUFBRSxDQUFDO0FBQ1JDLEVBQUFBLE9BQU8sRUFBRSxLQUFBO0FBQ2IsQ0FBQyxDQUFBO0FBRUQsTUFBTUMsYUFBYSxHQUFHLElBQUlDLElBQUksRUFBRSxDQUFBO0FBQ2hDLE1BQU1DLFlBQVksR0FBRyxJQUFJRCxJQUFJLEVBQUUsQ0FBQTs7QUFFL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1FLFVBQVUsQ0FBQztBQWFiO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7RUFDSUMsV0FBV0EsQ0FBQ0MsTUFBTSxFQUFFO0FBakJwQjtBQUNKO0FBQ0E7QUFDQTtBQUhJLElBQUEsSUFBQSxDQUlBQyxhQUFhLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFFYjtBQUNKO0FBQ0E7QUFDQTtBQUhJLElBQUEsSUFBQSxDQUlBQyxTQUFTLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFTTCxJQUFBLE1BQU1DLE1BQU0sR0FBR0gsTUFBTSxDQUFDRyxNQUFNLENBQUE7SUFDNUIsSUFBSSxDQUFDSCxNQUFNLEdBQUdBLE1BQU0sQ0FBQTtBQUNwQkksSUFBQUEsS0FBSyxDQUFDQyxNQUFNLENBQUNMLE1BQU0sQ0FBQyxDQUFBO0lBRXBCLElBQUlHLE1BQU0sQ0FBQ0csc0JBQXNCLEVBQUU7QUFFL0I7QUFDQSxNQUFBLE1BQU1DLGlCQUFpQixHQUFHLElBQUlDLHNCQUFzQixFQUFFLENBQUE7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
