import { Debug } from '../core/debug.js';
import { SHADER_DEPTH, SHADER_PICK, SHADER_FORWARD, SHADER_FORWARDHDR, SHADER_SHADOW } from './constants.js';
import { DeviceCache } from '../platform/graphics/device-cache.js';

// device cache storing shader pass data per device
const shaderPassDeviceCache = new DeviceCache();

/**
 * Info about a shader pass. Shader pass is represented by a unique index and a name, and the
 * index is used to access the shader required for the pass, from an array stored in the
 * material or mesh instance.
 *
 * @ignore
 */
class ShaderPassInfo {
  /**
   * @param {string} name - The name, for example 'depth'. Must contain only letters, numbers,
   * and underscores, and start with a letter.
   * @param {number} index - Index from ShaderPass#nextIndex.
   * @param {object} [options] - Options for additional configuration of the shader pass.
   * @param {boolean} [options.isForward] - Whether the pass is forward.
   * @param {boolean} [options.isShadow] - Whether the pass is shadow.
   * @param {boolean} [options.lightType] - Type of light, for example `pc.LIGHTTYPE_DIRECTIONAL`.
   * @param {boolean} [options.shadowType] - Type of shadow, for example `pc.SHADOW_PCF3`.
   */
  constructor(name, index, options = {}) {
    /** @type {number} */
    this.index = void 0;
    /** @type {string} */
    this.name = void 0;
    /** @type {string} */
    this.shaderDefines = void 0;
    Debug.assert(/^[a-zA-Z][_a-zA-Z0-9]*$/.test(name), `ShaderPass name can only contain letters, numbers and underscores and start with a letter: ${name}`);
    this.name = name;
    this.index = index;

    // assign options as properties to this object
    Object.assign(this, options);
    this.shaderDefines = this.buildShaderDefines();
  }
  buildShaderDefines() {
    let keyword;
    if (this.isShadow) {
      keyword = 'SHADOW';
    } else if (this.isForward) {
      keyword = 'FORWARD';
    } else if (this.index === SHADER_DEPTH) {
      keyword = 'DEPTH';
    } else if (this.index === SHADER_PICK) {
      keyword = 'PICK';
    }

    // define based on on the options based name
    const define1 = keyword ? `#define ${keyword}_PASS\n` : '';

    // define based on the name
    const define2 = `#define ${this.name.toUpperCase()}_PASS\n`;
    return define1 + define2;
  }
}

/**
 * Class responsible for management of shader passes, associated with a device.
 *
 * @ignore
 */
class ShaderPass {
  constructor() {
    /**
     * Allocated shader passes, map of a shader pass name to info.
     *
     * @type {Map<string, ShaderPassInfo>}
     */
    this.passesNamed = new Map();
    /**
     * Allocated shader passes, indexed by their index.
     *
     * @type {Array<ShaderPassInfo>}
     */
    this.passesIndexed = [];
    /** Next available index */
    this.nextIndex = 0;
    const add = (name, index, options) => {
      const info = this.allocate(name, options);
      Debug.assert(info.index === index);
    };

    // add default passes in the required order, to match the constants
    add('forward', SHADER_FORWARD, {
      isForward: true
    });
    add('forward_hdr', SHADER_FORWARDHDR, {
      isForward: true
    });
    add('depth', SHADER_DEPTH);
    add('pick', SHADER_PICK);
    add('shadow', SHADER_SHADOW);
  }

  /**
   * Get access to the shader pass instance for the specified device.
   *
   * @param {import('../platform/graphics/graphics-device.js').GraphicsDevice} device - The
   * graphics device.
   * @returns { ShaderPass } The shader pass instance for the specified device.
   */
  static get(device) {
    Debug.assert(device);
    return shaderPassDeviceCache.get(device, () => {
      return new ShaderPass();
    });
  }

  /**
   * Allocates a shader pass with the specified name and options.
   *
   * @param {string} name - A name of the shader pass.
   * @param {object} [options] - Options for the shader pass, which are added as properties to the
   * shader pass info.
   * @returns {ShaderPassInfo} The allocated shader pass info.
   */
  allocate(name, options) {
    let info = this.passesNamed.get(name);
    if (info === undefined) {
      info = new ShaderPassInfo(name, this.nextIndex, options);
      this.passesNamed.set(info.name, info);
      this.passesIndexed[info.index] = info;
      this.nextIndex++;
    }
    return info;
  }

  /**
   * Return the shader pass info for the specified index.
   *
   * @param {number} index - The shader pass index.
   * @returns {ShaderPassInfo} - The shader pass info.
   */
  getByIndex(index) {
    const info = this.passesIndexed[index];
    Debug.assert(info);
    return info;
  }
  getByName(name) {
    return this.passesNamed.get(name);
  }
}

export { ShaderPass, ShaderPassInfo };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhZGVyLXBhc3MuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9zY2VuZS9zaGFkZXItcGFzcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWJ1ZyB9IGZyb20gJy4uL2NvcmUvZGVidWcuanMnO1xuaW1wb3J0IHtcbiAgICBTSEFERVJfRk9SV0FSRCwgU0hBREVSX0ZPUldBUkRIRFIsIFNIQURFUl9ERVBUSCwgU0hBREVSX1BJQ0ssIFNIQURFUl9TSEFET1dcbn0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuXG5pbXBvcnQgeyBEZXZpY2VDYWNoZSB9IGZyb20gJy4uL3BsYXRmb3JtL2dyYXBoaWNzL2RldmljZS1jYWNoZS5qcyc7XG5cbi8vIGRldmljZSBjYWNoZSBzdG9yaW5nIHNoYWRlciBwYXNzIGRhdGEgcGVyIGRldmljZVxuY29uc3Qgc2hhZGVyUGFzc0RldmljZUNhY2hlID0gbmV3IERldmljZUNhY2hlKCk7XG5cbi8qKlxuICogSW5mbyBhYm91dCBhIHNoYWRlciBwYXNzLiBTaGFkZXIgcGFzcyBpcyByZXByZXNlbnRlZCBieSBhIHVuaXF1ZSBpbmRleCBhbmQgYSBuYW1lLCBhbmQgdGhlXG4gKiBpbmRleCBpcyB1c2VkIHRvIGFjY2VzcyB0aGUgc2hhZGVyIHJlcXVpcmVkIGZvciB0aGUgcGFzcywgZnJvbSBhbiBhcnJheSBzdG9yZWQgaW4gdGhlXG4gKiBtYXRlcmlhbCBvciBtZXNoIGluc3RhbmNlLlxuICpcbiAqIEBpZ25vcmVcbiAqL1xuY2xhc3MgU2hhZGVyUGFzc0luZm8ge1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIGluZGV4O1xuXG4gICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXG4gICAgbmFtZTtcblxuICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgIHNoYWRlckRlZmluZXM7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lLCBmb3IgZXhhbXBsZSAnZGVwdGgnLiBNdXN0IGNvbnRhaW4gb25seSBsZXR0ZXJzLCBudW1iZXJzLFxuICAgICAqIGFuZCB1bmRlcnNjb3JlcywgYW5kIHN0YXJ0IHdpdGggYSBsZXR0ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gSW5kZXggZnJvbSBTaGFkZXJQYXNzI25leHRJbmRleC5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyBmb3IgYWRkaXRpb25hbCBjb25maWd1cmF0aW9uIG9mIHRoZSBzaGFkZXIgcGFzcy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmlzRm9yd2FyZF0gLSBXaGV0aGVyIHRoZSBwYXNzIGlzIGZvcndhcmQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5pc1NoYWRvd10gLSBXaGV0aGVyIHRoZSBwYXNzIGlzIHNoYWRvdy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxpZ2h0VHlwZV0gLSBUeXBlIG9mIGxpZ2h0LCBmb3IgZXhhbXBsZSBgcGMuTElHSFRUWVBFX0RJUkVDVElPTkFMYC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNoYWRvd1R5cGVdIC0gVHlwZSBvZiBzaGFkb3csIGZvciBleGFtcGxlIGBwYy5TSEFET1dfUENGM2AuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobmFtZSwgaW5kZXgsIG9wdGlvbnMgPSB7fSkge1xuXG4gICAgICAgIERlYnVnLmFzc2VydCgvXlthLXpBLVpdW19hLXpBLVowLTldKiQvLnRlc3QobmFtZSksIGBTaGFkZXJQYXNzIG5hbWUgY2FuIG9ubHkgY29udGFpbiBsZXR0ZXJzLCBudW1iZXJzIGFuZCB1bmRlcnNjb3JlcyBhbmQgc3RhcnQgd2l0aCBhIGxldHRlcjogJHtuYW1lfWApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcblxuICAgICAgICAvLyBhc3NpZ24gb3B0aW9ucyBhcyBwcm9wZXJ0aWVzIHRvIHRoaXMgb2JqZWN0XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgb3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy5zaGFkZXJEZWZpbmVzID0gdGhpcy5idWlsZFNoYWRlckRlZmluZXMoKTtcbiAgICB9XG5cbiAgICBidWlsZFNoYWRlckRlZmluZXMoKSB7XG5cbiAgICAgICAgbGV0IGtleXdvcmQ7XG4gICAgICAgIGlmICh0aGlzLmlzU2hhZG93KSB7XG4gICAgICAgICAgICBrZXl3b3JkID0gJ1NIQURPVyc7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0ZvcndhcmQpIHtcbiAgICAgICAgICAgIGtleXdvcmQgPSAnRk9SV0FSRCc7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbmRleCA9PT0gU0hBREVSX0RFUFRIKSB7XG4gICAgICAgICAgICBrZXl3b3JkID0gJ0RFUFRIJztcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmluZGV4ID09PSBTSEFERVJfUElDSykge1xuICAgICAgICAgICAga2V5d29yZCA9ICdQSUNLJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRlZmluZSBiYXNlZCBvbiBvbiB0aGUgb3B0aW9ucyBiYXNlZCBuYW1lXG4gICAgICAgIGNvbnN0IGRlZmluZTEgPSBrZXl3b3JkID8gYCNkZWZpbmUgJHtrZXl3b3JkfV9QQVNTXFxuYCA6ICcnO1xuXG4gICAgICAgIC8vIGRlZmluZSBiYXNlZCBvbiB0aGUgbmFtZVxuICAgICAgICBjb25zdCBkZWZpbmUyID0gYCNkZWZpbmUgJHt0aGlzLm5hbWUudG9VcHBlckNhc2UoKX1fUEFTU1xcbmA7XG5cbiAgICAgICAgcmV0dXJuIGRlZmluZTEgKyBkZWZpbmUyO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDbGFzcyByZXNwb25zaWJsZSBmb3IgbWFuYWdlbWVudCBvZiBzaGFkZXIgcGFzc2VzLCBhc3NvY2lhdGVkIHdpdGggYSBkZXZpY2UuXG4gKlxuICogQGlnbm9yZVxuICovXG5jbGFzcyBTaGFkZXJQYXNzIHtcbiAgICAvKipcbiAgICAgKiBBbGxvY2F0ZWQgc2hhZGVyIHBhc3NlcywgbWFwIG9mIGEgc2hhZGVyIHBhc3MgbmFtZSB0byBpbmZvLlxuICAgICAqXG4gICAgICogQHR5cGUge01hcDxzdHJpbmcsIFNoYWRlclBhc3NJbmZvPn1cbiAgICAgKi9cbiAgICBwYXNzZXNOYW1lZCA9IG5ldyBNYXAoKTtcblxuICAgIC8qKlxuICAgICAqIEFsbG9jYXRlZCBzaGFkZXIgcGFzc2VzLCBpbmRleGVkIGJ5IHRoZWlyIGluZGV4LlxuICAgICAqXG4gICAgICogQHR5cGUge0FycmF5PFNoYWRlclBhc3NJbmZvPn1cbiAgICAgKi9cbiAgICBwYXNzZXNJbmRleGVkID0gW107XG5cbiAgICAvKiogTmV4dCBhdmFpbGFibGUgaW5kZXggKi9cbiAgICBuZXh0SW5kZXggPSAwO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICAgICAgY29uc3QgYWRkID0gKG5hbWUsIGluZGV4LCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbmZvID0gdGhpcy5hbGxvY2F0ZShuYW1lLCBvcHRpb25zKTtcbiAgICAgICAgICAgIERlYnVnLmFzc2VydChpbmZvLmluZGV4ID09PSBpbmRleCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gYWRkIGRlZmF1bHQgcGFzc2VzIGluIHRoZSByZXF1aXJlZCBvcmRlciwgdG8gbWF0Y2ggdGhlIGNvbnN0YW50c1xuICAgICAgICBhZGQoJ2ZvcndhcmQnLCBTSEFERVJfRk9SV0FSRCwgeyBpc0ZvcndhcmQ6IHRydWUgfSk7XG4gICAgICAgIGFkZCgnZm9yd2FyZF9oZHInLCBTSEFERVJfRk9SV0FSREhEUiwgeyBpc0ZvcndhcmQ6IHRydWUgfSk7XG4gICAgICAgIGFkZCgnZGVwdGgnLCBTSEFERVJfREVQVEgpO1xuICAgICAgICBhZGQoJ3BpY2snLCBTSEFERVJfUElDSyk7XG4gICAgICAgIGFkZCgnc2hhZG93JywgU0hBREVSX1NIQURPVyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFjY2VzcyB0byB0aGUgc2hhZGVyIHBhc3MgaW5zdGFuY2UgZm9yIHRoZSBzcGVjaWZpZWQgZGV2aWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL3BsYXRmb3JtL2dyYXBoaWNzL2dyYXBoaWNzLWRldmljZS5qcycpLkdyYXBoaWNzRGV2aWNlfSBkZXZpY2UgLSBUaGVcbiAgICAgKiBncmFwaGljcyBkZXZpY2UuXG4gICAgICogQHJldHVybnMgeyBTaGFkZXJQYXNzIH0gVGhlIHNoYWRlciBwYXNzIGluc3RhbmNlIGZvciB0aGUgc3BlY2lmaWVkIGRldmljZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0KGRldmljZSkge1xuICAgICAgICBEZWJ1Zy5hc3NlcnQoZGV2aWNlKTtcblxuICAgICAgICByZXR1cm4gc2hhZGVyUGFzc0RldmljZUNhY2hlLmdldChkZXZpY2UsICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2hhZGVyUGFzcygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGxvY2F0ZXMgYSBzaGFkZXIgcGFzcyB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZSBhbmQgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gQSBuYW1lIG9mIHRoZSBzaGFkZXIgcGFzcy5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyBmb3IgdGhlIHNoYWRlciBwYXNzLCB3aGljaCBhcmUgYWRkZWQgYXMgcHJvcGVydGllcyB0byB0aGVcbiAgICAgKiBzaGFkZXIgcGFzcyBpbmZvLlxuICAgICAqIEByZXR1cm5zIHtTaGFkZXJQYXNzSW5mb30gVGhlIGFsbG9jYXRlZCBzaGFkZXIgcGFzcyBpbmZvLlxuICAgICAqL1xuICAgIGFsbG9jYXRlKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGluZm8gPSB0aGlzLnBhc3Nlc05hbWVkLmdldChuYW1lKTtcbiAgICAgICAgaWYgKGluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5mbyA9IG5ldyBTaGFkZXJQYXNzSW5mbyhuYW1lLCB0aGlzLm5leHRJbmRleCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnBhc3Nlc05hbWVkLnNldChpbmZvLm5hbWUsIGluZm8pO1xuICAgICAgICAgICAgdGhpcy5wYXNzZXNJbmRleGVkW2luZm8uaW5kZXhdID0gaW5mbztcbiAgICAgICAgICAgIHRoaXMubmV4dEluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBzaGFkZXIgcGFzcyBpbmZvIGZvciB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gVGhlIHNoYWRlciBwYXNzIGluZGV4LlxuICAgICAqIEByZXR1cm5zIHtTaGFkZXJQYXNzSW5mb30gLSBUaGUgc2hhZGVyIHBhc3MgaW5mby5cbiAgICAgKi9cbiAgICBnZXRCeUluZGV4KGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSB0aGlzLnBhc3Nlc0luZGV4ZWRbaW5kZXhdO1xuICAgICAgICBEZWJ1Zy5hc3NlcnQoaW5mbyk7XG4gICAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cblxuICAgIGdldEJ5TmFtZShuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhc3Nlc05hbWVkLmdldChuYW1lKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IFNoYWRlclBhc3MsIFNoYWRlclBhc3NJbmZvIH07XG4iXSwibmFtZXMiOlsic2hhZGVyUGFzc0RldmljZUNhY2hlIiwiRGV2aWNlQ2FjaGUiLCJTaGFkZXJQYXNzSW5mbyIsImNvbnN0cnVjdG9yIiwibmFtZSIsImluZGV4Iiwib3B0aW9ucyIsInNoYWRlckRlZmluZXMiLCJEZWJ1ZyIsImFzc2VydCIsInRlc3QiLCJPYmplY3QiLCJhc3NpZ24iLCJidWlsZFNoYWRlckRlZmluZXMiLCJrZXl3b3JkIiwiaXNTaGFkb3ciLCJpc0ZvcndhcmQiLCJTSEFERVJfREVQVEgiLCJTSEFERVJfUElDSyIsImRlZmluZTEiLCJkZWZpbmUyIiwidG9VcHBlckNhc2UiLCJTaGFkZXJQYXNzIiwicGFzc2VzTmFtZWQiLCJNYXAiLCJwYXNzZXNJbmRleGVkIiwibmV4dEluZGV4IiwiYWRkIiwiaW5mbyIsImFsbG9jYXRlIiwiU0hBREVSX0ZPUldBUkQiLCJTSEFERVJfRk9SV0FSREhEUiIsIlNIQURFUl9TSEFET1ciLCJnZXQiLCJkZXZpY2UiLCJ1bmRlZmluZWQiLCJzZXQiLCJnZXRCeUluZGV4IiwiZ2V0QnlOYW1lIl0sIm1hcHBpbmdzIjoiOzs7O0FBT0E7QUFDQSxNQUFNQSxxQkFBcUIsR0FBRyxJQUFJQyxXQUFXLEVBQUUsQ0FBQTs7QUFFL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyxjQUFjLENBQUM7QUFVakI7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSUMsV0FBV0EsQ0FBQ0MsSUFBSSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sR0FBRyxFQUFFLEVBQUU7QUFuQnZDO0FBQUEsSUFBQSxJQUFBLENBQ0FELEtBQUssR0FBQSxLQUFBLENBQUEsQ0FBQTtBQUVMO0FBQUEsSUFBQSxJQUFBLENBQ0FELElBQUksR0FBQSxLQUFBLENBQUEsQ0FBQTtBQUVKO0FBQUEsSUFBQSxJQUFBLENBQ0FHLGFBQWEsR0FBQSxLQUFBLENBQUEsQ0FBQTtBQWNUQyxJQUFBQSxLQUFLLENBQUNDLE1BQU0sQ0FBQyx5QkFBeUIsQ0FBQ0MsSUFBSSxDQUFDTixJQUFJLENBQUMsRUFBRyxDQUE2RkEsMkZBQUFBLEVBQUFBLElBQUssRUFBQyxDQUFDLENBQUE7SUFFeEosSUFBSSxDQUFDQSxJQUFJLEdBQUdBLElBQUksQ0FBQTtJQUNoQixJQUFJLENBQUNDLEtBQUssR0FBR0Es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
