import { PRIMITIVE_TRISTRIP } from '../../platform/graphics/constants.js';
import { BLEND_NORMAL } from '../constants.js';
import { GraphNode } from '../graph-node.js';
import { Mesh } from '../mesh.js';
import { MeshInstance } from '../mesh-instance.js';
import { BasicMaterial } from '../materials/basic-material.js';
import { createShaderFromCode } from '../shader-lib/utils.js';
import { shaderChunks } from '../shader-lib/chunks/chunks.js';
import { ImmediateBatches } from './immediate-batches.js';
import { Vec3 } from '../../core/math/vec3.js';

const tempPoints = [];
const vec = new Vec3();
class Immediate {
  constructor(device) {
    this.device = device;
    this.quadMesh = null;
    this.textureShader = null;
    this.depthTextureShader = null;
    this.cubeLocalPos = null;
    this.cubeWorldPos = null;

    // map of Layer to ImmediateBatches, storing line batches for a layer
    this.batchesMap = new Map();

    // set of all batches that were used in the frame
    this.allBatches = new Set();

    // set of all layers updated during this frame
    this.updatedLayers = new Set();

    // line materials
    this._materialDepth = null;
    this._materialNoDepth = null;

    // map of meshes instances added to a layer. The key is layer, the value is an array of mesh instances
    this.layerMeshInstances = new Map();
  }

  // creates material for line rendering
  createMaterial(depthTest) {
    const material = new BasicMaterial();
    material.vertexColors = true;
    material.blendType = BLEND_NORMAL;
    material.depthTest = depthTest;
    material.update();
    return material;
  }

  // material for line rendering with depth testing on
  get materialDepth() {
    if (!this._materialDepth) {
      this._materialDepth = this.createMaterial(true);
    }
    return this._materialDepth;
  }

  // material for line rendering with depth testing off
  get materialNoDepth() {
    if (!this._materialNoDepth) {
      this._materialNoDepth = this.createMaterial(false);
    }
    return this._materialNoDepth;
  }

  // returns a batch for rendering lines to a layer with required depth testing state
  getBatch(layer, depthTest) {
    // get batches for the layer
    let batches = this.batchesMap.get(layer);
    if (!batches) {
      batches = new ImmediateBatches(this.device);
      this.batchesMap.set(layer, batches);
    }

    // add it for rendering
    this.allBatches.add(batches);

    // get batch for the material
    const material = depthTest ? this.materialDepth : this.materialNoDepth;
    return batches.getBatch(material, layer);
  }
  getShader(id, fragment) {
    if (!this[id]) {
      // shared vertex shader for textured quad rendering
      const vertex = /* glsl */`
                attribute vec2 vertex_position;
                uniform mat4 matrix_model;
                varying vec2 uv0;
                void main(void) {
                    gl_Position = matrix_model * vec4(vertex_position, 0, 1);
                    uv0 = vertex_position.xy + 0.5;
                }
            `;
      this[id] = createShaderFromCode(this.device, vertex, fragment, `DebugShader:${id}`);
    }
    return this[id];
  }

  // shader used to display texture
  getTextureShader() {
    return this.getShader('textureShader', /* glsl */`
            varying vec2 uv0;
            uniform sampler2D colorMap;
            void main (void) {
                gl_FragColor = vec4(texture2D(colorMap, uv0).xyz, 1);
            }
        `);
  }

  // shader used to display infilterable texture sampled using texelFetch
  getUnfilterableTextureShader() {
    return this.getShader('textureShaderUnfilterable', /* glsl */`
            varying vec2 uv0;
            uniform highp sampler2D colorMap;
            void main (void) {
                ivec2 uv = ivec2(uv0 * textureSize(colorMap, 0));
                gl_FragColor = vec4(texelFetch(colorMap, uv, 0).xyz, 1);
            }
        `);
  }

  // shader used to display depth texture
  getDepthTextureShader() {
    return this.getShader('depthTextureShader', /* glsl */`
            ${shaderChunks.screenDepthPS}
            varying vec2 uv0;
            void main() {
                float depth = getLinearScreenDepth(getImageEffectUV(uv0)) * camera_params.x;
                gl_FragColor = vec4(vec3(depth), 1.0);
            }
        `);
  }

  // creates mesh used to render a quad
  getQuadMesh() {
    if (!this.quadMesh) {
      this.quadMesh = new Mesh(this.device);
      this.quadMesh.setPositions([-0.5, -0.5, 0, 0.5, -0.5, 0, -0.5, 0.5, 0, 0.5, 0.5, 0]);
      this.quadMesh.update(PRIMITIVE_TRISTRIP);
    }
    return this.quadMesh;
  }

  // Draw mesh at this frame
  drawMesh(material, matrix, mesh, meshInstance, layer) {
    // create a mesh instance for the mesh if needed
    if (!meshInstance) {
      const graphNode = this.getGraphNode(matrix);
      meshInstance = new MeshInstance(mesh, material, graphNode);
    }

    // add the mesh instance to an array per layer, they get added to layers before rendering
    let layerMeshInstances = this.layerMeshInstances.get(layer);
    if (!layerMeshInstances) {
      layerMeshInstances = [];
      this.layerMeshInstances.set(layer, layerMeshInstances);
    }
    layerMeshInstances.push(meshInstance);
  }
  drawWireAlignedBox(min, max, color, depthTest, layer, mat) {
    if (mat) {
      const mulPoint = (x, y, z) => {
        vec.set(x, y, z);
        mat.transformPoint(vec, vec);
        tempPoints.push(vec.x, vec.y, vec.z);
      };
      mulPoint(min.x, min.y, min.z);
      mulPoint(min.x, max.y, min.z);
      mulPoint(min.x, max.y, min.z);
      mulPoint(max.x, max.y, min.z);
      mulPoint(max.x, max.y, min.z);
      mulPoint(max.x, min.y, min.z);
      mulPoint(max.x, min.y, min.z);
      mulPoint(min.x, min.y, min.z);
      mulPoint(min.x, min.y, max.z);
      mulPoint(min.x, max.y, max.z);
      mulPoint(min.x, max.y, max.z);
      mulPoint(max.x, max.y, max.z);
      mulPoint(max.x, max.y, max.z);
      mulPoint(max.x, min.y, max.z);
      mulPoint(max.x, min.y, max.z);
      mulPoint(min.x, min.y, max.z);
      mulPoint(min.x, min.y, min.z);
      mulPoint(min.x, min.y, max.z);
      mulPoint(min.x, max.y, min.z);
      mulPoint(min.x, max.y, max.z);
      mulPoint(max.x, max.y, min.z);
      mulPoint(max.x, max.y, max.z);
      mulPoint(max.x, min.y, min.z);
      mulPoint(max.x, min.y, max.z);
    } else {
      tempPoints.push(min.x, min.y, min.z, min.x, max.y, min.z, min.x, max.y, min.z, max.x, max.y, min.z, max.x, max.y, min.z, max.x, min.y, min.z, max.x, min.y, min.z, min.x, min.y, min.z, min.x, min.y, max.z, min.x, max.y, max.z, min.x, max.y, max.z, max.x, max.y, max.z, max.x, max.y, max.z, max.x, min.y, max.z, max.x, min.y, max.z, min.x, min.y, max.z, min.x, min.y, min.z, min.x, min.y, max.z, min.x, max.y, min.z, min.x, max.y, max.z, max.x, max.y, min.z, max.x, max.y, max.z, max.x, min.y, min.z, max.x, min.y, max.z);
    }
    const batch = this.getBatch(layer, depthTest);
    batch.addLinesArrays(tempPoints, color);
    tempPoints.length = 0;
  }
  drawWireSphere(center, radius, color, numSegments, depthTest, layer) {
    const step = 2 * Math.PI / numSegments;
    let angle = 0;
    for (let i = 0; i < numSegments; i++) {
      const sin0 = Math.sin(angle);
      const cos0 = Math.cos(angle);
      angle += step;
      const sin1 = Math.sin(angle);
      const cos1 = Math.cos(angle);
      tempPoints.push(center.x + radius * sin0, center.y, center.z + radius * cos0);
      tempPoints.push(center.x + radius * sin1, center.y, center.z + radius * cos1);
      tempPoints.push(center.x + radius * sin0, center.y + radius * cos0, center.z);
      tempPoints.push(center.x + radius * sin1, center.y + radius * cos1, center.z);
      tempPoints.push(center.x, center.y + radius * sin0, center.z + radius * cos0);
      tempPoints.push(center.x, center.y + radius * sin1, center.z + radius * cos1);
    }
    const batch = this.getBatch(layer, depthTest);
    batch.addLinesArrays(tempPoints, color);
    tempPoints.length = 0;
  }
  getGraphNode(matrix) {
    const graphNode = new GraphNode('ImmediateDebug');
    graphNode.worldTransform = matrix;
    graphNode._dirtyWorld = graphNode._dirtyNormal = false;
    return graphNode;
  }

  // This is called just before the layer is rendered to allow lines for the layer to be added from inside
  // the frame getting rendered
  onPreRenderLayer(layer, visibleList, transparent) {
    // update line batches for the specified sub-layer
    this.batchesMap.forEach((batches, batchLayer) => {
      if (batchLayer === layer) {
        batches.onPreRender(visibleList, transparent);
      }
    });

    // only update meshes once for each layer (they're not per sub-layer at the moment)
    if (!this.updatedLayers.has(layer)) {
      this.updatedLayers.add(layer);

      // add mesh instances for specified layer to visible list
      const meshInstances = this.layerMeshInstances.get(layer);
      if (meshInstances) {
        for (let i = 0; i < meshInstances.length; i++) {
          visibleList.push(meshInstances[i]);
        }
        meshInstances.length = 0;
      }
    }
  }

  // called after the frame was rendered, clears data
  onPostRender() {
    // clean up line batches
    this.allBatches.clear();

    // all batches need updating next frame
    this.updatedLayers.clear();
  }
}

export { Immediate };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1tZWRpYXRlLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvc2NlbmUvaW1tZWRpYXRlL2ltbWVkaWF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQUklNSVRJVkVfVFJJU1RSSVAgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9jb25zdGFudHMuanMnO1xuXG5pbXBvcnQgeyBCTEVORF9OT1JNQUwgfSBmcm9tICcuLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgR3JhcGhOb2RlIH0gZnJvbSAnLi4vZ3JhcGgtbm9kZS5qcyc7XG5pbXBvcnQgeyBNZXNoIH0gZnJvbSAnLi4vbWVzaC5qcyc7XG5pbXBvcnQgeyBNZXNoSW5zdGFuY2UgfSBmcm9tICcuLi9tZXNoLWluc3RhbmNlLmpzJztcbmltcG9ydCB7IEJhc2ljTWF0ZXJpYWwgfSBmcm9tICcuLi9tYXRlcmlhbHMvYmFzaWMtbWF0ZXJpYWwuanMnO1xuaW1wb3J0IHsgY3JlYXRlU2hhZGVyRnJvbUNvZGUgfSBmcm9tICcuLi9zaGFkZXItbGliL3V0aWxzLmpzJztcbmltcG9ydCB7IHNoYWRlckNodW5rcyB9IGZyb20gJy4uL3NoYWRlci1saWIvY2h1bmtzL2NodW5rcy5qcyc7XG5pbXBvcnQgeyBJbW1lZGlhdGVCYXRjaGVzIH0gZnJvbSAnLi9pbW1lZGlhdGUtYmF0Y2hlcy5qcyc7XG5cbmltcG9ydCB7IFZlYzMgfSBmcm9tICcuLi8uLi9jb3JlL21hdGgvdmVjMy5qcyc7XG5cbmNvbnN0IHRlbXBQb2ludHMgPSBbXTtcbmNvbnN0IHZlYyA9IG5ldyBWZWMzKCk7XG5cbmNsYXNzIEltbWVkaWF0ZSB7XG4gICAgY29uc3RydWN0b3IoZGV2aWNlKSB7XG4gICAgICAgIHRoaXMuZGV2aWNlID0gZGV2aWNlO1xuICAgICAgICB0aGlzLnF1YWRNZXNoID0gbnVsbDtcbiAgICAgICAgdGhpcy50ZXh0dXJlU2hhZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5kZXB0aFRleHR1cmVTaGFkZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmN1YmVMb2NhbFBvcyA9IG51bGw7XG4gICAgICAgIHRoaXMuY3ViZVdvcmxkUG9zID0gbnVsbDtcblxuICAgICAgICAvLyBtYXAgb2YgTGF5ZXIgdG8gSW1tZWRpYXRlQmF0Y2hlcywgc3RvcmluZyBsaW5lIGJhdGNoZXMgZm9yIGEgbGF5ZXJcbiAgICAgICAgdGhpcy5iYXRjaGVzTWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIC8vIHNldCBvZiBhbGwgYmF0Y2hlcyB0aGF0IHdlcmUgdXNlZCBpbiB0aGUgZnJhbWVcbiAgICAgICAgdGhpcy5hbGxCYXRjaGVzID0gbmV3IFNldCgpO1xuXG4gICAgICAgIC8vIHNldCBvZiBhbGwgbGF5ZXJzIHVwZGF0ZWQgZHVyaW5nIHRoaXMgZnJhbWVcbiAgICAgICAgdGhpcy51cGRhdGVkTGF5ZXJzID0gbmV3IFNldCgpO1xuXG4gICAgICAgIC8vIGxpbmUgbWF0ZXJpYWxzXG4gICAgICAgIHRoaXMuX21hdGVyaWFsRGVwdGggPSBudWxsO1xuICAgICAgICB0aGlzLl9tYXRlcmlhbE5vRGVwdGggPSBudWxsO1xuXG4gICAgICAgIC8vIG1hcCBvZiBtZXNoZXMgaW5zdGFuY2VzIGFkZGVkIHRvIGEgbGF5ZXIuIFRoZSBrZXkgaXMgbGF5ZXIsIHRoZSB2YWx1ZSBpcyBhbiBhcnJheSBvZiBtZXNoIGluc3RhbmNlc1xuICAgICAgICB0aGlzLmxheWVyTWVzaEluc3RhbmNlcyA9IG5ldyBNYXAoKTtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGVzIG1hdGVyaWFsIGZvciBsaW5lIHJlbmRlcmluZ1xuICAgIGNyZWF0ZU1hdGVyaWFsKGRlcHRoVGVzdCkge1xuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBCYXNpY01hdGVyaWFsKCk7XG4gICAgICAgIG1hdGVyaWFsLnZlcnRleENvbG9ycyA9IHRydWU7XG4gICAgICAgIG1hdGVyaWFsLmJsZW5kVHlwZSA9IEJMRU5EX05PUk1BTDtcbiAgICAgICAgbWF0ZXJpYWwuZGVwdGhUZXN0ID0gZGVwdGhUZXN0O1xuICAgICAgICBtYXRlcmlhbC51cGRhdGUoKTtcbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xuICAgIH1cblxuICAgIC8vIG1hdGVyaWFsIGZvciBsaW5lIHJlbmRlcmluZyB3aXRoIGRlcHRoIHRlc3Rpbmcgb25cbiAgICBnZXQgbWF0ZXJpYWxEZXB0aCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9tYXRlcmlhbERlcHRoKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXRlcmlhbERlcHRoID0gdGhpcy5jcmVhdGVNYXRlcmlhbCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbWF0ZXJpYWxEZXB0aDtcbiAgICB9XG5cbiAgICAvLyBtYXRlcmlhbCBmb3IgbGluZSByZW5kZXJpbmcgd2l0aCBkZXB0aCB0ZXN0aW5nIG9mZlxuICAgIGdldCBtYXRlcmlhbE5vRGVwdGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5fbWF0ZXJpYWxOb0RlcHRoKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXRlcmlhbE5vRGVwdGggPSB0aGlzLmNyZWF0ZU1hdGVyaWFsKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbWF0ZXJpYWxOb0RlcHRoO1xuICAgIH1cblxuICAgIC8vIHJldHVybnMgYSBiYXRjaCBmb3IgcmVuZGVyaW5nIGxpbmVzIHRvIGEgbGF5ZXIgd2l0aCByZXF1aXJlZCBkZXB0aCB0ZXN0aW5nIHN0YXRlXG4gICAgZ2V0QmF0Y2gobGF5ZXIsIGRlcHRoVGVzdCkge1xuXG4gICAgICAgIC8vIGdldCBiYXRjaGVzIGZvciB0aGUgbGF5ZXJcbiAgICAgICAgbGV0IGJhdGNoZXMgPSB0aGlzLmJhdGNoZXNNYXAuZ2V0KGxheWVyKTtcbiAgICAgICAgaWYgKCFiYXRjaGVzKSB7XG4gICAgICAgICAgICBiYXRjaGVzID0gbmV3IEltbWVkaWF0ZUJhdGNoZXModGhpcy5kZXZpY2UpO1xuICAgICAgICAgICAgdGhpcy5iYXRjaGVzTWFwLnNldChsYXllciwgYmF0Y2hlcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgaXQgZm9yIHJlbmRlcmluZ1xuICAgICAgICB0aGlzLmFsbEJhdGNoZXMuYWRkKGJhdGNoZXMpO1xuXG4gICAgICAgIC8vIGdldCBiYXRjaCBmb3IgdGhlIG1hdGVyaWFsXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gZGVwdGhUZXN0ID8gdGhpcy5tYXRlcmlhbERlcHRoIDogdGhpcy5tYXRlcmlhbE5vRGVwdGg7XG4gICAgICAgIHJldHVybiBiYXRjaGVzLmdldEJhdGNoKG1hdGVyaWFsLCBsYXllcik7XG4gICAgfVxuXG4gICAgZ2V0U2hhZGVyKGlkLCBmcmFnbWVudCkge1xuICAgICAgICBpZiAoIXRoaXNbaWRdKSB7XG4gICAgICAgICAgICAvLyBzaGFyZWQgdmVydGV4IHNoYWRlciBmb3IgdGV4dHVyZWQgcXVhZCByZW5kZXJpbmdcbiAgICAgICAgICAgIGNvbnN0IHZlcnRleCA9IC8qIGdsc2wgKi8gYFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSB2ZWMyIHZlcnRleF9wb3NpdGlvbjtcbiAgICAgICAgICAgICAgICB1bmlmb3JtIG1hdDQgbWF0cml4X21vZGVsO1xuICAgICAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB1djA7XG4gICAgICAgICAgICAgICAgdm9pZCBtYWluKHZvaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSBtYXRyaXhfbW9kZWwgKiB2ZWM0KHZlcnRleF9wb3NpdGlvbiwgMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHV2MCA9IHZlcnRleF9wb3NpdGlvbi54eSArIDAuNTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuXG4gICAgICAgICAgICB0aGlzW2lkXSA9IGNyZWF0ZVNoYWRlckZyb21Db2RlKHRoaXMuZGV2aWNlLCB2ZXJ0ZXgsIGZyYWdtZW50LCBgRGVidWdTaGFkZXI6JHtpZH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpc1tpZF07XG4gICAgfVxuXG4gICAgLy8gc2hhZGVyIHVzZWQgdG8gZGlzcGxheSB0ZXh0dXJlXG4gICAgZ2V0VGV4dHVyZVNoYWRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2hhZGVyKCd0ZXh0dXJlU2hhZGVyJywgLyogZ2xzbCAqLyBgXG4gICAgICAgICAgICB2YXJ5aW5nIHZlYzIgdXYwO1xuICAgICAgICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgY29sb3JNYXA7XG4gICAgICAgICAgICB2b2lkIG1haW4gKHZvaWQpIHtcbiAgICAgICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHRleHR1cmUyRChjb2xvck1hcCwgdXYwKS54eXosIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICBgKTtcbiAgICB9XG5cbiAgICAvLyBzaGFkZXIgdXNlZCB0byBkaXNwbGF5IGluZmlsdGVyYWJsZSB0ZXh0dXJlIHNhbXBsZWQgdXNpbmcgdGV4ZWxGZXRjaFxuICAgIGdldFVuZmlsdGVyYWJsZVRleHR1cmVTaGFkZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNoYWRlcigndGV4dHVyZVNoYWRlclVuZmlsdGVyYWJsZScsIC8qIGdsc2wgKi8gYFxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHV2MDtcbiAgICAgICAgICAgIHVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIGNvbG9yTWFwO1xuICAgICAgICAgICAgdm9pZCBtYWluICh2b2lkKSB7XG4gICAgICAgICAgICAgICAgaXZlYzIgdXYgPSBpdmVjMih1djAgKiB0ZXh0dXJlU2l6ZShjb2xvck1hcCwgMCkpO1xuICAgICAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQodGV4ZWxGZXRjaChjb2xvck1hcCwgdXYsIDApLnh5eiwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGApO1xuICAgIH1cblxuICAgIC8vIHNoYWRlciB1c2VkIHRvIGRpc3BsYXkgZGVwdGggdGV4dHVyZVxuICAgIGdldERlcHRoVGV4dHVyZVNoYWRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2hhZGVyKCdkZXB0aFRleHR1cmVTaGFkZXInLCAvKiBnbHNsICovIGBcbiAgICAgICAgICAgICR7c2hhZGVyQ2h1bmtzLnNjcmVlbkRlcHRoUFN9XG4gICAgICAgICAgICB2YXJ5aW5nIHZlYzIgdXYwO1xuICAgICAgICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICAgICAgICAgIGZsb2F0IGRlcHRoID0gZ2V0TGluZWFyU2NyZWVuRGVwdGgoZ2V0SW1hZ2VFZmZlY3RVVih1djApKSAqIGNhbWVyYV9wYXJhbXMueDtcbiAgICAgICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZlYzMoZGVwdGgpLCAxLjApO1xuICAgICAgICAgICAgfVxuICAgICAgICBgKTtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGVzIG1lc2ggdXNlZCB0byByZW5kZXIgYSBxdWFkXG4gICAgZ2V0UXVhZE1lc2goKSB7XG4gICAgICAgIGlmICghdGhpcy5xdWFkTWVzaCkge1xuICAgICAgICAgICAgdGhpcy5xdWFkTWVzaCA9IG5ldyBNZXNoKHRoaXMuZGV2aWNlKTtcbiAgICAgICAgICAgIHRoaXMucXVhZE1lc2guc2V0UG9zaXRpb25zKFtcbiAgICAgICAgICAgICAgICAtMC41LCAtMC41LCAwLFxuICAgICAgICAgICAgICAgIDAuNSwgLTAuNSwgMCxcbiAgICAgICAgICAgICAgICAtMC41LCAwLjUsIDAsXG4gICAgICAgICAgICAgICAgMC41LCAwLjUsIDBcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdGhpcy5xdWFkTWVzaC51cGRhdGUoUFJJTUlUSVZFX1RSSVNUUklQKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5xdWFkTWVzaDtcbiAgICB9XG5cbiAgICAvLyBEcmF3IG1lc2ggYXQgdGhpcyBmcmFtZVxuICAgIGRyYXdNZXNoKG1hdGVyaWFsLCBtYXRyaXgsIG1lc2gsIG1lc2hJbnN0YW5jZSwgbGF5ZXIpIHtcblxuICAgICAgICAvLyBjcmVhdGUgYSBtZXNoIGluc3RhbmNlIGZvciB0aGUgbWVzaCBpZiBuZWVkZWRcbiAgICAgICAgaWYgKCFtZXNoSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGdyYXBoTm9kZSA9IHRoaXMuZ2V0R3JhcGhOb2RlKG1hdHJpeCk7XG4gICAgICAgICAgICBtZXNoSW5zdGFuY2UgPSBuZXcgTWVzaEluc3RhbmNlKG1lc2gsIG1hdGVyaWFsLCBncmFwaE5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWRkIHRoZSBtZXNoIGluc3RhbmNlIHRvIGFuIGFycmF5IHBlciBsYXllciwgdGhleSBnZXQgYWRkZWQgdG8gbGF5ZXJzIGJlZm9yZSByZW5kZXJpbmdcbiAgICAgICAgbGV0IGxheWVyTWVzaEluc3RhbmNlcyA9IHRoaXMubGF5ZXJNZXNoSW5zdGFuY2VzLmdldChsYXllcik7XG4gICAgICAgIGlmICghbGF5ZXJNZXNoSW5zdGFuY2VzKSB7XG4gICAgICAgICAgICBsYXllck1lc2hJbnN0YW5jZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMubGF5ZXJNZXNoSW5zdGFuY2VzLnNldChsYXllciwgbGF5ZXJNZXNoSW5zdGFuY2VzKTtcbiAgICAgICAgfVxuICAgICAgICBsYXllck1lc2hJbnN0YW5jZXMucHVzaChtZXNoSW5zdGFuY2UpO1xuICAgIH1cblxuICAgIGRyYXdXaXJlQWxpZ25lZEJveChtaW4sIG1heCwgY29sb3IsIGRlcHRoVGVzdCwgbGF5ZXIsIG1hdCkge1xuICAgICAgICBpZiAobWF0KSB7XG4gICAgICAgICAgICBjb25zdCBtdWxQb2ludCA9ICh4LCB5LCB6KSA9PiB7XG4gICAgICAgICAgICAgICAgdmVjLnNldCh4LCB5LCB6KTtcbiAgICAgICAgICAgICAgICBtYXQudHJhbnNmb3JtUG9pbnQodmVjLCB2ZWMpO1xuICAgICAgICAgICAgICAgIHRlbXBQb2ludHMucHVzaCh2ZWMueCwgdmVjLnksIHZlYy56KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG11bFBvaW50KG1pbi54LCBtaW4ueSwgbWluLnopOyBtdWxQb2ludChtaW4ueCwgbWF4LnksIG1pbi56KTtcbiAgICAgICAgICAgIG11bFBvaW50KG1pbi54LCBtYXgueSwgbWluLnopOyBtdWxQb2ludChtYXgueCwgbWF4LnksIG1pbi56KTtcbiAgICAgICAgICAgIG11bFBvaW50KG1heC54LCBtYXgueSwgbWluLnopOyBtdWxQb2ludChtYXgueCwgbWluLnksIG1pbi56KTtcbiAgICAgICAgICAgIG11bFBvaW50KG1heC54LCBtaW4ueSwgbWluLnopOyBtdWxQb2ludChtaW4ueCwgbWluLnksIG1pbi56KTtcbiAgICAgICAgICAgIG11bFBvaW50KG1pbi54LCBtaW4ueSwgbWF4LnopOyBtdWxQb2ludChtaW4ueCwgbWF4LnksIG1heC56KTtcbiAgICAgICAgICAgIG11bFBvaW50KG1pbi54LCBtYXgueSwgbWF4LnopOyBtdWxQb2ludChtYXgueCwgbWF4LnksIG1heC56KTtcbiAgICAgICAgICAgIG11bFBvaW50KG1heC54LCBtYXgueSwgbWF4LnopOyBtdWxQb2ludChtYXgueCwgbWluLnksIG1heC56KTtcbiAgICAgICAgICAgIG11bFBvaW50KG1heC54LCBtaW4ueSwgbWF4LnopOyBtdWxQb2ludChtaW4ueCwgbWluLnksIG1heC56KTtcbiAgICAgICAgICAgIG11bFBvaW50KG1pbi54LCBtaW4ueSwgbWluLnopOyBtdWxQb2ludChtaW4ueCwgbWluLnksIG1heC56KTtcbiAgICAgICAgICAgIG11bFBvaW50KG1pbi54LCBtYXgueSwgbWluLnopOyBtdWxQb2ludChtaW4ueCwgbWF4LnksIG1heC56KTtcbiAgICAgICAgICAgIG11bFBvaW50KG1heC54LCBtYXgueSwgbWluLnopOyBtdWxQb2ludChtYXgueCwgbWF4LnksIG1heC56KTtcbiAgICAgICAgICAgIG11bFBvaW50KG1heC54LCBtaW4ueSwgbWluLnopOyBtdWxQb2ludChtYXgueCwgbWluLnksIG1heC56KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRlbXBQb2ludHMucHVzaChcbiAgICAgICAgICAgICAgICBtaW4ueCwgbWluLnksIG1pbi56LCBtaW4ueCwgbWF4LnksIG1pbi56LFxuICAgICAgICAgICAgICAgIG1pbi54LCBtYXgueSwgbWluLnosIG1heC54LCBtYXgueSwgbWluLnosXG4gICAgICAgICAgICAgICAgbWF4LngsIG1heC55LCBtaW4ueiwgbWF4LngsIG1pbi55LCBtaW4ueixcbiAgICAgICAgICAgICAgICBtYXgueCwgbWluLnksIG1pbi56LCBtaW4ueCwgbWluLnksIG1pbi56LFxuICAgICAgICAgICAgICAgIG1pbi54LCBtaW4ueSwgbWF4LnosIG1pbi54LCBtYXgueSwgbWF4LnosXG4gICAgICAgICAgICAgICAgbWluLngsIG1heC55LCBtYXgueiwgbWF4LngsIG1heC55LCBtYXgueixcbiAgICAgICAgICAgICAgICBtYXgueCwgbWF4LnksIG1heC56LCBtYXgueCwgbWluLnksIG1heC56LFxuICAgICAgICAgICAgICAgIG1heC54LCBtaW4ueSwgbWF4LnosIG1pbi54LCBtaW4ueSwgbWF4LnosXG4gICAgICAgICAgICAgICAgbWluLngsIG1pbi55LCBtaW4ueiwgbWluLngsIG1pbi55LCBtYXgueixcbiAgICAgICAgICAgICAgICBtaW4ueCwgbWF4LnksIG1pbi56LCBtaW4ueCwgbWF4LnksIG1heC56LFxuICAgICAgICAgICAgICAgIG1heC54LCBtYXgueSwgbWluLnosIG1heC54LCBtYXgueSwgbWF4LnosXG4gICAgICAgICAgICAgICAgbWF4LngsIG1pbi55LCBtaW4ueiwgbWF4LngsIG1pbi55LCBtYXguelxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJhdGNoID0gdGhpcy5nZXRCYXRjaChsYXllciwgZGVwdGhUZXN0KTtcbiAgICAgICAgYmF0Y2guYWRkTGluZXNBcnJheXModGVtcFBvaW50cywgY29sb3IpO1xuICAgICAgICB0ZW1wUG9pbnRzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgZHJhd1dpcmVTcGhlcmUoY2VudGVyLCByYWRpdXMsIGNvbG9yLCBudW1TZWdtZW50cywgZGVwdGhUZXN0LCBsYXllcikge1xuXG4gICAgICAgIGNvbnN0IHN0ZXAgPSAyICogTWF0aC5QSSAvIG51bVNlZ21lbnRzO1xuICAgICAgICBsZXQgYW5nbGUgPSAwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtU2VnbWVudHM7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgc2luMCA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICAgICAgICAgIGNvbnN0IGNvczAgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICAgICAgICBhbmdsZSArPSBzdGVwO1xuICAgICAgICAgICAgY29uc3Qgc2luMSA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICAgICAgICAgIGNvbnN0IGNvczEgPSBNYXRoLmNvcyhhbmdsZSk7XG5cbiAgICAgICAgICAgIHRlbXBQb2ludHMucHVzaChjZW50ZXIueCArIHJhZGl1cyAqIHNpbjAsIGNlbnRlci55LCBjZW50ZXIueiArIHJhZGl1cyAqIGNvczApO1xuICAgICAgICAgICAgdGVtcFBvaW50cy5wdXNoKGNlbnRlci54ICsgcmFkaXVzICogc2luMSwgY2VudGVyLnksIGNlbnRlci56ICsgcmFkaXVzICogY29zMSk7XG4gICAgICAgICAgICB0ZW1wUG9pbnRzLnB1c2goY2VudGVyLnggKyByYWRpdXMgKiBzaW4wLCBjZW50ZXIueSArIHJhZGl1cyAqIGNvczAsIGNlbnRlci56KTtcbiAgICAgICAgICAgIHRlbXBQb2ludHMucHVzaChjZW50ZXIueCArIHJhZGl1cyAqIHNpbjEsIGNlbnRlci55ICsgcmFkaXVzICogY29zMSwgY2VudGVyLnopO1xuICAgICAgICAgICAgdGVtcFBvaW50cy5wdXNoKGNlbnRlci54LCBjZW50ZXIueSArIHJhZGl1cyAqIHNpbjAsIGNlbnRlci56ICsgcmFkaXVzICogY29zMCk7XG4gICAgICAgICAgICB0ZW1wUG9pbnRzLnB1c2goY2VudGVyLngsIGNlbnRlci55ICsgcmFkaXVzICogc2luMSwgY2VudGVyLnogKyByYWRpdXMgKiBjb3MxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJhdGNoID0gdGhpcy5nZXRCYXRjaChsYXllciwgZGVwdGhUZXN0KTtcbiAgICAgICAgYmF0Y2guYWRkTGluZXNBcnJheXModGVtcFBvaW50cywgY29sb3IpO1xuICAgICAgICB0ZW1wUG9pbnRzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgZ2V0R3JhcGhOb2RlKG1hdHJpeCkge1xuICAgICAgICBjb25zdCBncmFwaE5vZGUgPSBuZXcgR3JhcGhOb2RlKCdJbW1lZGlhdGVEZWJ1ZycpO1xuICAgICAgICBncmFwaE5vZGUud29ybGRUcmFuc2Zvcm0gPSBtYXRyaXg7XG4gICAgICAgIGdyYXBoTm9kZS5fZGlydHlXb3JsZCA9IGdyYXBoTm9kZS5fZGlydHlOb3JtYWwgPSBmYWxzZTtcblxuICAgICAgICByZXR1cm4gZ3JhcGhOb2RlO1xuICAgIH1cblxuICAgIC8vIFRoaXMgaXMgY2FsbGVkIGp1c3QgYmVmb3JlIHRoZSBsYXllciBpcyByZW5kZXJlZCB0byBhbGxvdyBsaW5lcyBmb3IgdGhlIGxheWVyIHRvIGJlIGFkZGVkIGZyb20gaW5zaWRlXG4gICAgLy8gdGhlIGZyYW1lIGdldHRpbmcgcmVuZGVyZWRcbiAgICBvblByZVJlbmRlckxheWVyKGxheWVyLCB2aXNpYmxlTGlzdCwgdHJhbnNwYXJlbnQpIHtcblxuICAgICAgICAvLyB1cGRhdGUgbGluZSBiYXRjaGVzIGZvciB0aGUgc3BlY2lmaWVkIHN1Yi1sYXllclxuICAgICAgICB0aGlzLmJhdGNoZXNNYXAuZm9yRWFjaCgoYmF0Y2hlcywgYmF0Y2hMYXllcikgPT4ge1xuICAgICAgICAgICAgaWYgKGJhdGNoTGF5ZXIgPT09IGxheWVyKSB7XG4gICAgICAgICAgICAgICAgYmF0Y2hlcy5vblByZVJlbmRlcih2aXNpYmxlTGlzdCwgdHJhbnNwYXJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBvbmx5IHVwZGF0ZSBtZXNoZXMgb25jZSBmb3IgZWFjaCBsYXllciAodGhleSdyZSBub3QgcGVyIHN1Yi1sYXllciBhdCB0aGUgbW9tZW50KVxuICAgICAgICBpZiAoIXRoaXMudXBkYXRlZExheWVycy5oYXMobGF5ZXIpKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZWRMYXllcnMuYWRkKGxheWVyKTtcblxuICAgICAgICAgICAgLy8gYWRkIG1lc2ggaW5zdGFuY2VzIGZvciBzcGVjaWZpZWQgbGF5ZXIgdG8gdmlzaWJsZSBsaXN0XG4gICAgICAgICAgICBjb25zdCBtZXNoSW5zdGFuY2VzID0gdGhpcy5sYXllck1lc2hJbnN0YW5jZXMuZ2V0KGxheWVyKTtcbiAgICAgICAgICAgIGlmIChtZXNoSW5zdGFuY2VzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNoSW5zdGFuY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVMaXN0LnB1c2gobWVzaEluc3RhbmNlc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNhbGxlZCBhZnRlciB0aGUgZnJhbWUgd2FzIHJlbmRlcmVkLCBjbGVhcnMgZGF0YVxuICAgIG9uUG9zdFJlbmRlcigpIHtcblxuICAgICAgICAvLyBjbGVhbiB1cCBsaW5lIGJhdGNoZXNcbiAgICAgICAgdGhpcy5hbGxCYXRjaGVzLmNsZWFyKCk7XG5cbiAgICAgICAgLy8gYWxsIGJhdGNoZXMgbmVlZCB1cGRhdGluZyBuZXh0IGZyYW1lXG4gICAgICAgIHRoaXMudXBkYXRlZExheWVycy5jbGVhcigpO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgSW1tZWRpYXRlIH07XG4iXSwibmFtZXMiOlsidGVtcFBvaW50cyIsInZlYyIsIlZlYzMiLCJJbW1lZGlhdGUiLCJjb25zdHJ1Y3RvciIsImRldmljZSIsInF1YWRNZXNoIiwidGV4dHVyZVNoYWRlciIsImRlcHRoVGV4dHVyZVNoYWRlciIsImN1YmVMb2NhbFBvcyIsImN1YmVXb3JsZFBvcyIsImJhdGNoZXNNYXAiLCJNYXAiLCJhbGxCYXRjaGVzIiwiU2V0IiwidXBkYXRlZExheWVycyIsIl9tYXRlcmlhbERlcHRoIiwiX21hdGVyaWFsTm9EZXB0aCIsImxheWVyTWVzaEluc3RhbmNlcyIsImNyZWF0ZU1hdGVyaWFsIiwiZGVwdGhUZXN0IiwibWF0ZXJpYWwiLCJCYXNpY01hdGVyaWFsIiwidmVydGV4Q29sb3JzIiwiYmxlbmRUeXBlIiwiQkxFTkRfTk9STUFMIiwidXBkYXRlIiwibWF0ZXJpYWxEZXB0aCIsIm1hdGVyaWFsTm9EZXB0aCIsImdldEJhdGNoIiwibGF5ZXIiLCJiYXRjaGVzIiwiZ2V0IiwiSW1tZWRpYXRlQmF0Y2hlcyIsInNldCIsImFkZCIsImdldFNoYWRlciIsImlkIiwiZnJhZ21lbnQiLCJ2ZXJ0ZXgiLCJjcmVhdGVTaGFkZXJGcm9tQ29kZSIsImdldFRleHR1cmVTaGFkZXIiLCJnZXRVbmZpbHRlcmFibGVUZXh0dXJlU2hhZGVyIiwiZ2V0RGVwdGhUZXh0dXJlU2hhZGVyIiwic2hhZGVyQ2h1bmtzIiwic2NyZWVuRGVwdGhQUyIsImdldFF1YWRNZXNoIiwiTWVzaCIsInNldFBvc2l0aW9ucyIsIlBSSU1JVElWRV9UUklTVFJJUCIsImRyYXdNZXNoIiwibWF0cml4IiwibWVzaCIsIm1lc2hJbnN0YW5jZSIsImdyYXBoTm9kZSIsImdldEdyYXBoTm9kZSIsIk1lc2hJbnN0YW5jZSIsInB1c2giLCJkcmF3V2lyZUFsaWduZWRCb3giLCJtaW4iLCJtYXgiLCJjb2xvciIsIm1hdCIsIm11bFBvaW50IiwieCIsInkiLCJ6IiwidHJhbnNmb3JtUG9pbnQiLCJiYXRjaCIsImFkZExpbmVzQXJyYXlzIiwibGVuZ3RoIiwiZHJhd1dpcmVTcGhlcmUiLCJjZW50ZXIiLCJyYWRpdXMiLCJudW1TZWdtZW50cyIsInN0ZXAiLCJNYXRoIiwiUEkiLCJhbmdsZSIsImkiLCJzaW4wIiwic2luIiwiY29zMCIsImNvcyIsInNpbjEiLCJjb3MxIiwiR3JhcGhOb2RlIiwid29ybGRUcmFuc2Zvcm0iLCJfZGlydHlXb3JsZCIsIl9kaXJ0eU5vcm1hbCIsIm9uUHJlUmVuZGVyTGF5ZXIiLCJ2aXNpYmxlTGlzdCIsInRyYW5zcGFyZW50IiwiZm9yRWFjaCIsImJhdGNoTGF5ZXIiLCJvblByZVJlbmRlciIsImhhcyIsIm1lc2hJbnN0YW5jZXMiLCJvblBvc3RSZW5kZXIiLCJjbGVhciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFhQSxNQUFNQSxVQUFVLEdBQUcsRUFBRSxDQUFBO0FBQ3JCLE1BQU1DLEdBQUcsR0FBRyxJQUFJQyxJQUFJLEVBQUUsQ0FBQTtBQUV0QixNQUFNQyxTQUFTLENBQUM7RUFDWkMsV0FBV0EsQ0FBQ0MsTUFBTSxFQUFFO0lBQ2hCLElBQUksQ0FBQ0EsTUFBTSxHQUFHQSxNQUFNLENBQUE7SUFDcEIsSUFBSSxDQUFDQyxRQUFRLEdBQUcsSUFBSSxDQUFBO0lBQ3BCLElBQUksQ0FBQ0MsYUFBYSxHQUFHLElBQUksQ0FBQTtJQUN6QixJQUFJLENBQUNDLGtCQUFrQixHQUFHLElBQUksQ0FBQTtJQUM5QixJQUFJLENBQUNDLFlBQVksR0FBRyxJQUFJLENBQUE7SUFDeEIsSUFBSSxDQUFDQyxZQUFZLEdBQUcsSUFBSSxDQUFBOztBQUV4QjtBQUNBLElBQUEsSUFBSSxDQUFDQyxVQUFVLEdBQUcsSUFBSUMsR0FBRyxFQUFFLENBQUE7O0FBRTNCO0FBQ0EsSUFBQSxJQUFJLENBQUNDLFVBQVUsR0FBRyxJQUFJQyxHQUFHLEVBQUUsQ0FBQTs7QUFFM0I7QUFDQSxJQUFBLElBQUksQ0FBQ0MsYUFBYSxHQUFHLElBQUlELEdBQUcsRUFBRSxDQUFBOztBQUU5QjtJQUNBLElBQUksQ0FBQ0UsY0FBYyxHQUFH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QUFDSixHQUFHLENBQUNLLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLEVBQUVOLEdBQUcsQ0FBQ08sQ0FBQyxDQUFDLENBQUE7QUFBRUgsTUFBQUEsUUFBUSxDQUFDSixHQUFHLENBQUNLLENBQUMsRUFBRUosR0FBRyxDQUFDSyxDQUFDLEVBQUVOLEdBQUcsQ0FBQ08sQ0FBQyxDQUFDLENBQUE7QUFDNURILE1BQUFBLFFBQVEsQ0FBQ0osR0FBRyxDQUFDSyxDQUFDLEVBQUVKLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFTixHQUFHLENBQUNPLENBQUMsQ0FBQyxDQUFBO0FBQUVILE1BQUFBLFFBQVEsQ0FBQ0gsR0FBRyxDQUFDSSxDQUFDLEVBQUVKLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFTixHQUFHLENBQUNPLENBQUMsQ0FBQyxDQUFBO0FBQzVESCxNQUFBQSxRQUFRLENBQUNILEdBQUcsQ0FBQ0ksQ0FBQyxFQUFFSixHQUFHLENBQUNLLENBQUMsRUFBRU4sR0FBRyxDQUFDTyxDQUFDLENBQUMsQ0FBQTtBQUFFSCxNQUFBQSxRQUFRLENBQUNILEdBQUcsQ0FBQ0ksQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsRUFBRU4sR0FBRyxDQUFDTyxDQUFDLENBQUMsQ0FBQTtBQUM1REgsTUFBQUEsUUFBUSxDQUFDSCxHQUFHLENBQUNJLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLEVBQUVOLEdBQUcsQ0FBQ08sQ0FBQyxDQUFDLENBQUE7QUFBRUgsTUFBQUEsUUFBUSxDQUFDSixHQUFHLENBQUNLLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLEVBQUVOLEdBQUcsQ0FBQ08sQ0FBQyxDQUFDLENBQUE7QUFDNURILE1BQUFBLFFBQVEsQ0FBQ0osR0FBRyxDQUFDSyxDQUFDLEVBQUVMLEdBQUcsQ0FBQ00sQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsQ0FBQyxDQUFBO0FBQUVILE1BQUFBLFFBQVEsQ0FBQ0osR0FBRyxDQUFDSyxDQUFDLEVBQUVKLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsQ0FBQyxDQUFBO0FBQzVESCxNQUFBQSxRQUFRLENBQUNKLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFSixHQUFHLENBQUNLLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLENBQUMsQ0FBQTtBQUFFSCxNQUFBQSxRQUFRLENBQUNILEdBQUcsQ0FBQ0ksQ0FBQyxFQUFFSixHQUFHLENBQUNLLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLENBQUMsQ0FBQTtBQUM1REgsTUFBQUEsUUFBUSxDQUFDSCxHQUFHLENBQUNJLENBQUMsRUFBRUosR0FBRyxDQUFDSyxDQUFDLEVBQUVMLEdBQUcsQ0FBQ00sQ0FBQyxDQUFDLENBQUE7QUFBRUgsTUFBQUEsUUFBUSxDQUFDSCxHQUFHLENBQUNJLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLEVBQUVMLEdBQUcsQ0FBQ00sQ0FBQyxDQUFDLENBQUE7QUFDNURILE1BQUFBLFFBQVEsQ0FBQ0gsR0FBRyxDQUFDSSxDQUFDLEVBQUVMLEdBQUcsQ0FBQ00sQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsQ0FBQyxDQUFBO0FBQUVILE1BQUFBLFFBQVEsQ0FBQ0osR0FBRyxDQUFDSyxDQUFDLEVBQUVMLEdBQUcsQ0FBQ00sQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsQ0FBQyxDQUFBO0FBQzVESCxNQUFBQSxRQUFRLENBQUNKLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsRUFBRU4sR0FBRyxDQUFDTyxDQUFDLENBQUMsQ0FBQTtBQUFFSCxNQUFBQSxRQUFRLENBQUNKLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLENBQUMsQ0FBQTtBQUM1REgsTUFBQUEsUUFBUSxDQUFDSixHQUFHLENBQUNLLENBQUMsRUFBRUosR0FBRyxDQUFDSyxDQUFDLEVBQUVOLEdBQUcsQ0FBQ08sQ0FBQyxDQUFDLENBQUE7QUFBRUgsTUFBQUEsUUFBUSxDQUFDSixHQUFHLENBQUNLLENBQUMsRUFBRUosR0FBRyxDQUFDSyxDQUFDLEVBQUVMLEdBQUcsQ0FBQ00sQ0FBQyxDQUFDLENBQUE7QUFDNURILE1BQUFBLFFBQVEsQ0FBQ0gsR0FBRyxDQUFDSSxDQUFDLEVBQUVKLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFTixHQUFHLENBQUNPLENBQUMsQ0FBQyxDQUFBO0FBQUVILE1BQUFBLFFBQVEsQ0FBQ0gsR0FBRyxDQUFDSSxDQUFDLEVBQUVKLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsQ0FBQyxDQUFBO0FBQzVESCxNQUFBQSxRQUFRLENBQUNILEdBQUcsQ0FBQ0ksQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsRUFBRU4sR0FBRyxDQUFDTyxDQUFDLENBQUMsQ0FBQTtBQUFFSCxNQUFBQSxRQUFRLENBQUNILEdBQUcsQ0FBQ0ksQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLENBQUMsQ0FBQTtBQUNoRSxLQUFDLE1BQU07QUFDSGxFLE1BQUFBLFVBQVUsQ0FBQ3lELElBQUksQ0FDWEUsR0FBRyxDQUFDSyxDQUFDLEVBQUVMLEdBQUcsQ0FBQ00sQ0FBQyxFQUFFTixHQUFHLENBQUNPLENBQUMsRUFBRVAsR0FBRyxDQUFDSyxDQUFDLEVBQUVKLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFTixHQUFHLENBQUNPLENBQUMsRUFDeENQLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFSixHQUFHLENBQUNLLENBQUMsRUFBRU4sR0FBRyxDQUFDTyxDQUFDLEVBQUVOLEdBQUcsQ0FBQ0ksQ0FBQyxFQUFFSixHQUFHLENBQUNLLENBQUMsRUFBRU4sR0FBRyxDQUFDTyxDQUFDLEVBQ3hDTixHQUFHLENBQUNJLENBQUMsRUFBRUosR0FBRyxDQUFDSyxDQUFDLEVBQUVOLEdBQUcsQ0FBQ08sQ0FBQyxFQUFFTixHQUFHLENBQUNJLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLEVBQUVOLEdBQUcsQ0FBQ08sQ0FBQyxFQUN4Q04sR0FBRyxDQUFDSSxDQUFDLEVBQUVMLEdBQUcsQ0FBQ00sQ0FBQyxFQUFFTixHQUFHLENBQUNPLENBQUMsRUFBRVAsR0FBRyxDQUFDSyxDQUFDLEVBQUVMLEdBQUcsQ0FBQ00sQ0FBQyxFQUFFTixHQUFHLENBQUNPLENBQUMsRUFDeENQLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLEVBQUVQLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFSixHQUFHLENBQUNLLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLEVBQ3hDUCxHQUFHLENBQUNLLENBQUMsRUFBRUosR0FBRyxDQUFDSyxDQUFDLEVBQUVMLEdBQUcsQ0FBQ00sQ0FBQyxFQUFFTixHQUFHLENBQUNJLENBQUMsRUFBRUosR0FBRyxDQUFDSyxDQUFDLEVBQUVMLEdBQUcsQ0FBQ00sQ0FBQyxFQUN4Q04sR0FBRyxDQUFDSSxDQUFDLEVBQUVKLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsRUFBRU4sR0FBRyxDQUFDSSxDQUFDLEVBQUVMLEdBQUcsQ0FBQ00sQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsRUFDeENOLEdBQUcsQ0FBQ0ksQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLEVBQUVQLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLEVBQ3hDUCxHQUFHLENBQUNLLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLEVBQUVOLEdBQUcsQ0FBQ08sQ0FBQyxFQUFFUCxHQUFHLENBQUNLLENBQUMsRUFBRUwsR0FBRyxDQUFDTSxDQUFDLEVBQUVMLEdBQUcsQ0FBQ00sQ0FBQyxFQUN4Q1AsR0FBRyxDQUFDSyxDQUFDLEVBQUVKLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFTixHQUFHLENBQUNPLENBQUMsRUFBRVAsR0FBRyxDQUFDSyxDQUFDLEVBQUVKLEdBQUcsQ0FBQ0ssQ0FBQyxFQUFFTCxHQUFHLENBQUNNLENBQUMs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
