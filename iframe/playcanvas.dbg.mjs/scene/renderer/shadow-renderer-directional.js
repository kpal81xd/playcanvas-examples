import { Debug } from '../../core/debug.js';
import { math } from '../../core/math/math.js';
import { Vec3 } from '../../core/math/vec3.js';
import { Mat4 } from '../../core/math/mat4.js';
import { BoundingBox } from '../../core/shape/bounding-box.js';
import { SHADOWUPDATE_NONE, LIGHTTYPE_DIRECTIONAL } from '../constants.js';
import { ShadowMap } from './shadow-map.js';
import { RenderPassShadowDirectional } from './render-pass-shadow-directional.js';

const visibleSceneAabb = new BoundingBox();
const center = new Vec3();
const shadowCamView = new Mat4();
const aabbPoints = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];

// evaluate depth range the aabb takes in the space of the camera
const _depthRange = {
  min: 0,
  max: 0
};
function getDepthRange(cameraViewMatrix, aabbMin, aabbMax) {
  aabbPoints[0].x = aabbPoints[1].x = aabbPoints[2].x = aabbPoints[3].x = aabbMin.x;
  aabbPoints[1].y = aabbPoints[3].y = aabbPoints[7].y = aabbPoints[5].y = aabbMin.y;
  aabbPoints[2].z = aabbPoints[3].z = aabbPoints[6].z = aabbPoints[7].z = aabbMin.z;
  aabbPoints[4].x = aabbPoints[5].x = aabbPoints[6].x = aabbPoints[7].x = aabbMax.x;
  aabbPoints[0].y = aabbPoints[2].y = aabbPoints[4].y = aabbPoints[6].y = aabbMax.y;
  aabbPoints[0].z = aabbPoints[1].z = aabbPoints[4].z = aabbPoints[5].z = aabbMax.z;
  let minz = 9999999999;
  let maxz = -9999999999;
  for (let i = 0; i < 8; ++i) {
    cameraViewMatrix.transformPoint(aabbPoints[i], aabbPoints[i]);
    const z = aabbPoints[i].z;
    if (z < minz) minz = z;
    if (z > maxz) maxz = z;
  }
  _depthRange.min = minz;
  _depthRange.max = maxz;
  return _depthRange;
}

/**
 * @ignore
 */
class ShadowRendererDirectional {
  constructor(renderer, shadowRenderer) {
    /** @type {import('./renderer.js').Renderer} */
    this.renderer = void 0;
    /** @type {import('./shadow-renderer.js').ShadowRenderer} */
    this.shadowRenderer = void 0;
    /** @type {import('../../platform/graphics/graphics-device.js').GraphicsDevice} */
    this.device = void 0;
    this.renderer = renderer;
    this.shadowRenderer = shadowRenderer;
    this.device = renderer.device;
  }

  // cull directional shadow map
  cull(light, comp, camera, casters = null) {
    // force light visibility if function was manually called
    light.visibleThisFrame = true;
    if (!light._shadowMap) {
      light._shadowMap = ShadowMap.create(this.device, light);
    }

    // generate splits for the cascades
    const nearDist = camera._nearClip;
    this.generateSplitDistances(light, nearDist, Math.min(camera._farClip, light.shadowDistance));
    const shadowUpdateOverrides = light.shadowUpdateOverrides;
    for (let cascade = 0; cascade < light.numCascades; cascade++) {
      // if manually controlling cascade rendering and the cascade does not render this frame
      if ((shadowUpdateOverrides == null ? void 0 : shadowUpdateOverrides[cascade]) === SHADOWUPDATE_NONE) {
        break;
      }
      const lightRenderData = light.getRenderData(camera, cascade);
      const shadowCam = lightRenderData.shadowCamera;

      // assign render target
      // Note: this is done during rendering for all shadow maps, but do it here for the case shadow rendering for the directional light
      // is disabled - we need shadow map to be assigned for rendering to work even in this case. This needs further refactoring - as when
      // shadow rendering is set to SHADOWUPDATE_NONE, we should not even execute shadow map culling
      shadowCam.renderTarget = light._shadowMap.renderTargets[0];

      // viewport
      lightRenderData.shadowViewport.copy(light.cascades[cascade]);
      lightRenderData.shadowScissor.copy(light.cascades[cascade]);
      const shadowCamNode = shadowCam._node;
      const lightNode = light._node;
      shadowCamNode.setPosition(lightNode.getPosition());

      // Camera looks down the negative Z, and directional light points down the negative Y
      shadowCamNode.setRotation(lightNode.getRotation());
      shadowCamNode.rotateLocal(-90, 0, 0);

      // get camera's frustum corners for the cascade, convert them to world space and find their center
      const frustumNearDist = cascade === 0 ? nearDist : light._shadowCascadeDistances[cascade - 1];
      const frustumFarDist = light._shadowCascadeDistances[cascade];
      const frustumPoints = camera.getFrustumCorners(frustumNearDist, frustumFarDist);
      center.set(0, 0, 0);
      const cameraWorldMat = camera.node.getWorldTransform();
      for (let i = 0; i < 8; i++) {
        cameraWorldMat.transformPoint(frustumPoints[i], frustumPoints[i]);
        center.add(frustumPoints[i]);
      }
      center.mulScalar(1 / 8);

      // radius of the world space bounding sphere for the frustum slice
      let radius = 0;
      for (let i = 0; i < 8; i++) {
        const dist = frustumPoints[i].sub(center).length();
        if (dist > radius) radius = dist;
      }

      // axis of light coordinate system
      const right = shadowCamNode.right;
      const up = shadowCamNode.up;
      const lightDir = shadowCamNode.forward;

      // transform the sphere's center into the center of the shadow map, pixel aligned.
      // this makes the shadow map stable and avoids shimmering on the edges when the camera moves
      const sizeRatio = 0.25 * light._shadowResolution / radius;
      const x = Math.ceil(center.dot(up) * sizeRatio) / sizeRatio;
      const y = Math.ceil(center.dot(right) * sizeRatio) / sizeRatio;
      const scaledUp = up.mulScalar(x);
      const scaledRight = right.mulScalar(y);
      const dot = center.dot(lightDir);
      const scaledDir = lightDir.mulScalar(dot);
      center.add2(scaledUp, scaledRight).add(scaledDir);

      // look at the center from far away to include all casters during culling
      shadowCamNode.setPosition(center);
      shadowCamNode.translateLocal(0, 0, 1000000);
      shadowCam.nearClip = 0.01;
      shadowCam.farClip = 2000000;
      shadowCam.orthoHeight = radius;

      // cull shadow casters
      this.renderer.updateCameraFrustum(shadowCam);
      this.shadowRenderer.cullShadowCasters(comp, light, lightRenderData.visibleCasters, shadowCam, casters);

      // find out AABB of visible shadow casters
      let emptyAabb = true;
      const visibleCasters = lightRenderData.visibleCasters;
      for (let i = 0; i < visibleCasters.length; i++) {
        const meshInstance = visibleCasters[i];
        if (emptyAabb) {
          emptyAabb = false;
          visibleSceneAabb.copy(meshInstance.aabb);
        } else {
          visibleSceneAabb.add(meshInstance.aabb);
        }
      }

      // calculate depth range of the caster's AABB from the point of view of the shadow camera
      shadowCamView.copy(shadowCamNode.getWorldTransform()).invert();
      const depthRange = getDepthRange(shadowCamView, visibleSceneAabb.getMin(), visibleSceneAabb.getMax());

      // adjust shadow camera's near and far plane to the depth range of casters to maximize precision
      // of values stored in the shadow map. Make it slightly larger to avoid clipping on near / far plane.
      shadowCamNode.translateLocal(0, 0, depthRange.max + 0.1);
      shadowCam.farClip = depthRange.max - depthRange.min + 0.2;
      lightRenderData.depthRangeCompensation = shadowCam.farClip;
      lightRenderData.projectionCompensation = radius;
    }
  }

  // function to generate frustum split distances
  generateSplitDistances(light, nearDist, farDist) {
    light._shadowCascadeDistances.fill(farDist);
    for (let i = 1; i < light.numCascades; i++) {
      //  lerp between linear and logarithmic distance, called practical split distance
      const fraction = i / light.numCascades;
      const linearDist = nearDist + (farDist - nearDist) * fraction;
      const logDist = nearDist * (farDist / nearDist) ** fraction;
      const dist = math.lerp(linearDist, logDist, light.cascadeDistribution);
      light._shadowCascadeDistances[i - 1] = dist;
    }
  }

  /**
   * Create a render pass for directional light shadow rendering for a specified camera.
   *
   * @param {import('../light.js').Light} light - The directional light.
   * @param {import('../camera.js').Camera} camera - The camera.
   * @returns {RenderPassShadowDirectional|null} - The render pass if the shadow rendering is
   * required, or null otherwise.
   */
  getLightRenderPass(light, camera) {
    Debug.assert(light && light._type === LIGHTTYPE_DIRECTIONAL);
    let renderPass = null;
    if (this.shadowRenderer.needsShadowRendering(light)) {
      // shadow cascades have more faces rendered within a singe render pass
      const faceCount = light.numShadowFaces;
      const shadowUpdateOverrides = light.shadowUpdateOverrides;

      // prepare render targets / cameras for rendering
      let allCascadesRendering = true;
      let shadowCamera;
      for (let face = 0; face < faceCount; face++) {
        if ((shadowUpdateOverrides == null ? void 0 : shadowUpdateOverrides[face]) === SHADOWUPDATE_NONE) allCascadesRendering = false;
        shadowCamera = this.shadowRenderer.prepareFace(light, camera, face);
      }
      renderPass = new RenderPassShadowDirectional(this.device, this.shadowRenderer, light, camera, allCascadesRendering);

      // setup render pass using any of the cameras, they all have the same pass related properties
      this.shadowRenderer.setupRenderPass(renderPass, shadowCamera, allCascadesRendering);
    }
    return renderPass;
  }
}

export { ShadowRendererDirectional };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhZG93LXJlbmRlcmVyLWRpcmVjdGlvbmFsLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvc2NlbmUvcmVuZGVyZXIvc2hhZG93LXJlbmRlcmVyLWRpcmVjdGlvbmFsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERlYnVnIH0gZnJvbSAnLi4vLi4vY29yZS9kZWJ1Zy5qcyc7XG5pbXBvcnQgeyBtYXRoIH0gZnJvbSAnLi4vLi4vY29yZS9tYXRoL21hdGguanMnO1xuaW1wb3J0IHsgVmVjMyB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aC92ZWMzLmpzJztcbmltcG9ydCB7IE1hdDQgfSBmcm9tICcuLi8uLi9jb3JlL21hdGgvbWF0NC5qcyc7XG5pbXBvcnQgeyBCb3VuZGluZ0JveCB9IGZyb20gJy4uLy4uL2NvcmUvc2hhcGUvYm91bmRpbmctYm94LmpzJztcblxuaW1wb3J0IHtcbiAgICBMSUdIVFRZUEVfRElSRUNUSU9OQUwsIFNIQURPV1VQREFURV9OT05FXG59IGZyb20gJy4uL2NvbnN0YW50cy5qcyc7XG5cbmltcG9ydCB7IFNoYWRvd01hcCB9IGZyb20gJy4vc2hhZG93LW1hcC5qcyc7XG5pbXBvcnQgeyBSZW5kZXJQYXNzU2hhZG93RGlyZWN0aW9uYWwgfSBmcm9tICcuL3JlbmRlci1wYXNzLXNoYWRvdy1kaXJlY3Rpb25hbC5qcyc7XG5cbmNvbnN0IHZpc2libGVTY2VuZUFhYmIgPSBuZXcgQm91bmRpbmdCb3goKTtcbmNvbnN0IGNlbnRlciA9IG5ldyBWZWMzKCk7XG5jb25zdCBzaGFkb3dDYW1WaWV3ID0gbmV3IE1hdDQoKTtcblxuY29uc3QgYWFiYlBvaW50cyA9IFtcbiAgICBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLFxuICAgIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKClcbl07XG5cbi8vIGV2YWx1YXRlIGRlcHRoIHJhbmdlIHRoZSBhYWJiIHRha2VzIGluIHRoZSBzcGFjZSBvZiB0aGUgY2FtZXJhXG5jb25zdCBfZGVwdGhSYW5nZSA9IHsgbWluOiAwLCBtYXg6IDAgfTtcbmZ1bmN0aW9uIGdldERlcHRoUmFuZ2UoY2FtZXJhVmlld01hdHJpeCwgYWFiYk1pbiwgYWFiYk1heCkge1xuICAgIGFhYmJQb2ludHNbMF0ueCA9IGFhYmJQb2ludHNbMV0ueCA9IGFhYmJQb2ludHNbMl0ueCA9IGFhYmJQb2ludHNbM10ueCA9IGFhYmJNaW4ueDtcbiAgICBhYWJiUG9pbnRzWzFdLnkgPSBhYWJiUG9pbnRzWzNdLnkgPSBhYWJiUG9pbnRzWzddLnkgPSBhYWJiUG9pbnRzWzVdLnkgPSBhYWJiTWluLnk7XG4gICAgYWFiYlBvaW50c1syXS56ID0gYWFiYlBvaW50c1szXS56ID0gYWFiYlBvaW50c1s2XS56ID0gYWFiYlBvaW50c1s3XS56ID0gYWFiYk1pbi56O1xuICAgIGFhYmJQb2ludHNbNF0ueCA9IGFhYmJQb2ludHNbNV0ueCA9IGFhYmJQb2ludHNbNl0ueCA9IGFhYmJQb2ludHNbN10ueCA9IGFhYmJNYXgueDtcbiAgICBhYWJiUG9pbnRzWzBdLnkgPSBhYWJiUG9pbnRzWzJdLnkgPSBhYWJiUG9pbnRzWzRdLnkgPSBhYWJiUG9pbnRzWzZdLnkgPSBhYWJiTWF4Lnk7XG4gICAgYWFiYlBvaW50c1swXS56ID0gYWFiYlBvaW50c1sxXS56ID0gYWFiYlBvaW50c1s0XS56ID0gYWFiYlBvaW50c1s1XS56ID0gYWFiYk1heC56O1xuXG4gICAgbGV0IG1pbnogPSA5OTk5OTk5OTk5O1xuICAgIGxldCBtYXh6ID0gLTk5OTk5OTk5OTk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7ICsraSkge1xuICAgICAgICBjYW1lcmFWaWV3TWF0cml4LnRyYW5zZm9ybVBvaW50KGFhYmJQb2ludHNbaV0sIGFhYmJQb2ludHNbaV0pO1xuICAgICAgICBjb25zdCB6ID0gYWFiYlBvaW50c1tpXS56O1xuICAgICAgICBpZiAoeiA8IG1pbnopIG1pbnogPSB6O1xuICAgICAgICBpZiAoeiA+IG1heHopIG1heHogPSB6O1xuICAgIH1cblxuICAgIF9kZXB0aFJhbmdlLm1pbiA9IG1pbno7XG4gICAgX2RlcHRoUmFuZ2UubWF4ID0gbWF4ejtcbiAgICByZXR1cm4gX2RlcHRoUmFuZ2U7XG59XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jbGFzcyBTaGFkb3dSZW5kZXJlckRpcmVjdGlvbmFsIHtcbiAgICAvKiogQHR5cGUge2ltcG9ydCgnLi9yZW5kZXJlci5qcycpLlJlbmRlcmVyfSAqL1xuICAgIHJlbmRlcmVyO1xuXG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoJy4vc2hhZG93LXJlbmRlcmVyLmpzJykuU2hhZG93UmVuZGVyZXJ9ICovXG4gICAgc2hhZG93UmVuZGVyZXI7XG5cbiAgICAvKiogQHR5cGUge2ltcG9ydCgnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvZ3JhcGhpY3MtZGV2aWNlLmpzJykuR3JhcGhpY3NEZXZpY2V9ICovXG4gICAgZGV2aWNlO1xuXG4gICAgY29uc3RydWN0b3IocmVuZGVyZXIsIHNoYWRvd1JlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5zaGFkb3dSZW5kZXJlciA9IHNoYWRvd1JlbmRlcmVyO1xuICAgICAgICB0aGlzLmRldmljZSA9IHJlbmRlcmVyLmRldmljZTtcbiAgICB9XG5cbiAgICAvLyBjdWxsIGRpcmVjdGlvbmFsIHNoYWRvdyBtYXBcbiAgICBjdWxsKGxpZ2h0LCBjb21wLCBjYW1lcmEsIGNhc3RlcnMgPSBudWxsKSB7XG5cbiAgICAgICAgLy8gZm9yY2UgbGlnaHQgdmlzaWJpbGl0eSBpZiBmdW5jdGlvbiB3YXMgbWFudWFsbHkgY2FsbGVkXG4gICAgICAgIGxpZ2h0LnZpc2libGVUaGlzRnJhbWUgPSB0cnVlO1xuXG4gICAgICAgIGlmICghbGlnaHQuX3NoYWRvd01hcCkge1xuICAgICAgICAgICAgbGlnaHQuX3NoYWRvd01hcCA9IFNoYWRvd01hcC5jcmVhdGUodGhpcy5kZXZpY2UsIGxpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGdlbmVyYXRlIHNwbGl0cyBmb3IgdGhlIGNhc2NhZGVzXG4gICAgICAgIGNvbnN0IG5lYXJEaXN0ID0gY2FtZXJhLl9uZWFyQ2xpcDtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVNwbGl0RGlzdGFuY2VzKGxpZ2h0LCBuZWFyRGlzdCwgTWF0aC5taW4oY2FtZXJhLl9mYXJDbGlwLCBsaWdodC5zaGFkb3dEaXN0YW5jZSkpO1xuXG4gICAgICAgIGNvbnN0IHNoYWRvd1VwZGF0ZU92ZXJyaWRlcyA9IGxpZ2h0LnNoYWRvd1VwZGF0ZU92ZXJyaWRlcztcbiAgICAgICAgZm9yIChsZXQgY2FzY2FkZSA9IDA7IGNhc2NhZGUgPCBsaWdodC5udW1DYXNjYWRlczsgY2FzY2FkZSsrKSB7XG5cbiAgICAgICAgICAgIC8vIGlmIG1hbnVhbGx5IGNvbnRyb2xsaW5nIGNhc2NhZGUgcmVuZGVyaW5nIGFuZCB0aGUgY2FzY2FkZSBkb2VzIG5vdCByZW5kZXIgdGhpcyBmcmFtZVxuICAgICAgICAgICAgaWYgKHNoYWRvd1VwZGF0ZU92ZXJyaWRlcz8uW2Nhc2NhZGVdID09PSBTSEFET1dVUERBVEVfTk9ORSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBsaWdodFJlbmRlckRhdGEgPSBsaWdodC5nZXRSZW5kZXJEYXRhKGNhbWVyYSwgY2FzY2FkZSk7XG4gICAgICAgICAgICBjb25zdCBzaGFkb3dDYW0gPSBsaWdodFJlbmRlckRhdGEuc2hhZG93Q2FtZXJhO1xuXG4gICAgICAgICAgICAvLyBhc3NpZ24gcmVuZGVyIHRhcmdldFxuICAgICAgICAgICAgLy8gTm90ZTogdGhpcyBpcyBkb25lIGR1cmluZyByZW5kZXJpbmcgZm9yIGFsbCBzaGFkb3cgbWFwcywgYnV0IGRvIGl0IGhlcmUgZm9yIHRoZSBjYXNlIHNoYWRvdyByZW5kZXJpbmcgZm9yIHRoZSBkaXJlY3Rpb25hbCBsaWdodFxuICAgICAgICAgICAgLy8gaXMgZGlzYWJsZWQgLSB3ZSBuZWVkIHNoYWRvdyBtYXAgdG8gYmUgYXNzaWduZWQgZm9yIHJlbmRlcmluZyB0byB3b3JrIGV2ZW4gaW4gdGhpcyBjYXNlLiBUaGlzIG5lZWRzIGZ1cnRoZXIgcmVmYWN0b3JpbmcgLSBhcyB3aGVuXG4gICAgICAgICAgICAvLyBzaGFkb3cgcmVuZGVyaW5nIGlzIHNldCB0byBTSEFET1dVUERBVEVfTk9ORSwgd2Ugc2hvdWxkIG5vdCBldmVuIGV4ZWN1dGUgc2hhZG93IG1hcCBjdWxsaW5nXG4gICAgICAgICAgICBzaGFkb3dDYW0ucmVuZGVyVGFyZ2V0ID0gbGlnaHQuX3NoYWRvd01hcC5yZW5kZXJUYXJnZXRzWzBdO1xuXG4gICAgICAgICAgICAvLyB2aWV3cG9ydFxuICAgICAgICAgICAgbGlnaHRSZW5kZXJEYXRhLnNoYWRvd1ZpZXdwb3J0LmNvcHkobGlnaHQuY2FzY2FkZXNbY2FzY2FkZV0pO1xuICAgICAgICAgICAgbGlnaHRSZW5kZXJEYXRhLnNoYWRvd1NjaXNzb3IuY29weShsaWdodC5jYXNjYWRlc1tjYXNjYWRlXSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoYWRvd0NhbU5vZGUgPSBzaGFkb3dDYW0uX25vZGU7XG4gICAgICAgICAgICBjb25zdCBsaWdodE5vZGUgPSBsaWdodC5fbm9kZTtcblxuICAgICAgICAgICAgc2hhZG93Q2FtTm9kZS5zZXRQb3NpdGlvbihsaWdodE5vZGUuZ2V0UG9zaXRpb24oKSk7XG5cbiAgICAgICAgICAgIC8vIENhbWVyYSBsb29rcyBkb3duIHRoZSBuZWdhdGl2ZSBaLCBhbmQgZGlyZWN0aW9uYWwgbGlnaHQgcG9pbnRzIGRvd24gdGhlIG5lZ2F0aXZlIFlcbiAgICAgICAgICAgIHNoYWRvd0NhbU5vZGUuc2V0Um90YXRpb24obGlnaHROb2RlLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgc2hhZG93Q2FtTm9kZS5yb3RhdGVMb2NhbCgtOTAsIDAsIDApO1xuXG4gICAgICAgICAgICAvLyBnZXQgY2FtZXJhJ3MgZnJ1c3R1bSBjb3JuZXJzIGZvciB0aGUgY2FzY2FkZSwgY29udmVydCB0aGVtIHRvIHdvcmxkIHNwYWNlIGFuZCBmaW5kIHRoZWlyIGNlbnRlclxuICAgICAgICAgICAgY29uc3QgZnJ1c3R1bU5lYXJEaXN0ID0gY2FzY2FkZSA9PT0gMCA/IG5lYXJEaXN0IDogbGlnaHQuX3NoYWRvd0Nhc2NhZGVEaXN0YW5jZXNbY2FzY2FkZSAtIDFdO1xuICAgICAgICAgICAgY29uc3QgZnJ1c3R1bUZhckRpc3QgPSBsaWdodC5fc2hhZG93Q2FzY2FkZURpc3RhbmNlc1tjYXNjYWRlXTtcbiAgICAgICAgICAgIGNvbnN0IGZydXN0dW1Qb2ludHMgPSBjYW1lcmEuZ2V0RnJ1c3R1bUNvcm5lcnMoZnJ1c3R1bU5lYXJEaXN0LCBmcnVzdHVtRmFyRGlzdCk7XG4gICAgICAgICAgICBjZW50ZXIuc2V0KDAsIDAsIDApO1xuICAgICAgICAgICAgY29uc3QgY2FtZXJhV29ybGRNYXQgPSBjYW1lcmEubm9kZS5nZXRXb3JsZFRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBjYW1lcmFXb3JsZE1hdC50cmFuc2Zvcm1Qb2ludChmcnVzdHVtUG9pbnRzW2ldLCBmcnVzdHVtUG9pbnRzW2ldKTtcbiAgICAgICAgICAgICAgICBjZW50ZXIuYWRkKGZydXN0dW1Qb2ludHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2VudGVyLm11bFNjYWxhcigxIC8gOCk7XG5cbiAgICAgICAgICAgIC8vIHJhZGl1cyBvZiB0aGUgd29ybGQgc3BhY2UgYm91bmRpbmcgc3BoZXJlIGZvciB0aGUgZnJ1c3R1bSBzbGljZVxuICAgICAgICAgICAgbGV0IHJhZGl1cyA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBmcnVzdHVtUG9pbnRzW2ldLnN1YihjZW50ZXIpLmxlbmd0aCgpO1xuICAgICAgICAgICAgICAgIGlmIChkaXN0ID4gcmFkaXVzKVxuICAgICAgICAgICAgICAgICAgICByYWRpdXMgPSBkaXN0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBheGlzIG9mIGxpZ2h0IGNvb3JkaW5hdGUgc3lzdGVtXG4gICAgICAgICAgICBjb25zdCByaWdodCA9IHNoYWRvd0NhbU5vZGUucmlnaHQ7XG4gICAgICAgICAgICBjb25zdCB1cCA9IHNoYWRvd0NhbU5vZGUudXA7XG4gICAgICAgICAgICBjb25zdCBsaWdodERpciA9IHNoYWRvd0NhbU5vZGUuZm9yd2FyZDtcblxuICAgICAgICAgICAgLy8gdHJhbnNmb3JtIHRoZSBzcGhlcmUncyBjZW50ZXIgaW50byB0aGUgY2VudGVyIG9mIHRoZSBzaGFkb3cgbWFwLCBwaXhlbCBhbGlnbmVkLlxuICAgICAgICAgICAgLy8gdGhpcyBtYWtlcyB0aGUgc2hhZG93IG1hcCBzdGFibGUgYW5kIGF2b2lkcyBzaGltbWVyaW5nIG9uIHRoZSBlZGdlcyB3aGVuIHRoZSBjYW1lcmEgbW92ZXNcbiAgICAgICAgICAgIGNvbnN0IHNpemVSYXRpbyA9IDAuMjUgKiBsaWdodC5fc2hhZG93UmVzb2x1dGlvbiAvIHJhZGl1cztcbiAgICAgICAgICAgIGNvbnN0IHggPSBNYXRoLmNlaWwoY2VudGVyLmRvdCh1cCkgKiBzaXplUmF0aW8pIC8gc2l6ZVJhdGlvO1xuICAgICAgICAgICAgY29uc3QgeSA9IE1hdGguY2VpbChjZW50ZXIuZG90KHJpZ2h0KSAqIHNpemVSYXRpbykgLyBzaXplUmF0aW87XG5cbiAgICAgICAgICAgIGNvbnN0IHNjYWxlZFVwID0gdXAubXVsU2NhbGFyKHgpO1xuICAgICAgICAgICAgY29uc3Qgc2NhbGVkUmlnaHQgPSByaWdodC5tdWxTY2FsYXIoeSk7XG4gICAgICAgICAgICBjb25zdCBkb3QgPSBjZW50ZXIuZG90KGxpZ2h0RGlyKTtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlZERpciA9IGxpZ2h0RGlyLm11bFNjYWxhcihkb3QpO1xuICAgICAgICAgICAgY2VudGVyLmFkZDIoc2NhbGVkVXAsIHNjYWxlZFJpZ2h0KS5hZGQoc2NhbGVkRGlyKTtcblxuICAgICAgICAgICAgLy8gbG9vayBhdCB0aGUgY2VudGVyIGZyb20gZmFyIGF3YXkgdG8gaW5jbHVkZSBhbGwgY2FzdGVycyBkdXJpbmcgY3VsbGluZ1xuICAgICAgICAgICAgc2hhZG93Q2FtTm9kZS5zZXRQb3NpdGlvbihjZW50ZXIpO1xuICAgICAgICAgICAgc2hhZG93Q2FtTm9kZS50cmFuc2xhdGVMb2NhbCgwLCAwLCAxMDAwMDAwKTtcbiAgICAgICAgICAgIHNoYWRvd0NhbS5uZWFyQ2xpcCA9IDAuMDE7XG4gICAgICAgICAgICBzaGFkb3dDYW0uZmFyQ2xpcCA9IDIwMDAwMDA7XG4gICAgICAgICAgICBzaGFkb3dDYW0ub3J0aG9IZWlnaHQgPSByYWRpdXM7XG5cbiAgICAgICAgICAgIC8vIGN1bGwgc2hhZG93IGNhc3RlcnNcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlQ2FtZXJhRnJ1c3R1bShzaGFkb3dDYW0pO1xuICAgICAgICAgICAgdGhpcy5zaGFkb3dSZW5kZXJlci5jdWxsU2hhZG93Q2FzdGVycyhjb21wLCBsaWdodCwgbGlnaHRSZW5kZXJEYXRhLnZpc2libGVDYXN0ZXJzLCBzaGFkb3dDYW0sIGNhc3RlcnMpO1xuXG4gICAgICAgICAgICAvLyBmaW5kIG91dCBBQUJCIG9mIHZpc2libGUgc2hhZG93IGNhc3RlcnNcbiAgICAgICAgICAgIGxldCBlbXB0eUFhYmIgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgdmlzaWJsZUNhc3RlcnMgPSBsaWdodFJlbmRlckRhdGEudmlzaWJsZUNhc3RlcnM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZpc2libGVDYXN0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzaEluc3RhbmNlID0gdmlzaWJsZUNhc3RlcnNbaV07XG5cbiAgICAgICAgICAgICAgICBpZiAoZW1wdHlBYWJiKSB7XG4gICAgICAgICAgICAgICAgICAgIGVtcHR5QWFiYiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlU2NlbmVBYWJiLmNvcHkobWVzaEluc3RhbmNlLmFhYmIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVTY2VuZUFhYmIuYWRkKG1lc2hJbnN0YW5jZS5hYWJiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBkZXB0aCByYW5nZSBvZiB0aGUgY2FzdGVyJ3MgQUFCQiBmcm9tIHRoZSBwb2ludCBvZiB2aWV3IG9mIHRoZSBzaGFkb3cgY2FtZXJhXG4gICAgICAgICAgICBzaGFkb3dDYW1WaWV3LmNvcHkoc2hhZG93Q2FtTm9kZS5nZXRXb3JsZFRyYW5zZm9ybSgpKS5pbnZlcnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGRlcHRoUmFuZ2UgPSBnZXREZXB0aFJhbmdlKHNoYWRvd0NhbVZpZXcsIHZpc2libGVTY2VuZUFhYmIuZ2V0TWluKCksIHZpc2libGVTY2VuZUFhYmIuZ2V0TWF4KCkpO1xuXG4gICAgICAgICAgICAvLyBhZGp1c3Qgc2hhZG93IGNhbWVyYSdzIG5lYXIgYW5kIGZhciBwbGFuZSB0byB0aGUgZGVwdGggcmFuZ2Ugb2YgY2FzdGVycyB0byBtYXhpbWl6ZSBwcmVjaXNpb25cbiAgICAgICAgICAgIC8vIG9mIHZhbHVlcyBzdG9yZWQgaW4gdGhlIHNoYWRvdyBtYXAuIE1ha2UgaXQgc2xpZ2h0bHkgbGFyZ2VyIHRvIGF2b2lkIGNsaXBwaW5nIG9uIG5lYXIgLyBmYXIgcGxhbmUuXG4gICAgICAgICAgICBzaGFkb3dDYW1Ob2RlLnRyYW5zbGF0ZUxvY2FsKDAsIDAsIGRlcHRoUmFuZ2UubWF4ICsgMC4xKTtcbiAgICAgICAgICAgIHNoYWRvd0NhbS5mYXJDbGlwID0gZGVwdGhSYW5nZS5tYXggLSBkZXB0aFJhbmdlLm1pbiArIDAuMjtcblxuICAgICAgICAgICAgbGlnaHRSZW5kZXJEYXRhLmRlcHRoUmFuZ2VDb21wZW5zYXRpb24gPSBzaGFkb3dDYW0uZmFyQ2xpcDtcbiAgICAgICAgICAgIGxpZ2h0UmVuZGVyRGF0YS5wcm9qZWN0aW9uQ29tcGVuc2F0aW9uID0gcmFkaXVzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gZnVuY3Rpb24gdG8gZ2VuZXJhdGUgZnJ1c3R1bSBzcGxpdCBkaXN0YW5jZXNcbiAgICBnZW5lcmF0ZVNwbGl0RGlzdGFuY2VzKGxpZ2h0LCBuZWFyRGlzdCwgZmFyRGlzdCkge1xuXG4gICAgICAgIGxpZ2h0Ll9zaGFkb3dDYXNjYWRlRGlzdGFuY2VzLmZpbGwoZmFyRGlzdCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGlnaHQubnVtQ2FzY2FkZXM7IGkrKykge1xuXG4gICAgICAgICAgICAvLyAgbGVycCBiZXR3ZWVuIGxpbmVhciBhbmQgbG9nYXJpdGhtaWMgZGlzdGFuY2UsIGNhbGxlZCBwcmFjdGljYWwgc3BsaXQgZGlzdGFuY2VcbiAgICAgICAgICAgIGNvbnN0IGZyYWN0aW9uID0gaSAvIGxpZ2h0Lm51bUNhc2NhZGVzO1xuICAgICAgICAgICAgY29uc3QgbGluZWFyRGlzdCA9IG5lYXJEaXN0ICsgKGZhckRpc3QgLSBuZWFyRGlzdCkgKiBmcmFjdGlvbjtcbiAgICAgICAgICAgIGNvbnN0IGxvZ0Rpc3QgPSBuZWFyRGlzdCAqIChmYXJEaXN0IC8gbmVhckRpc3QpICoqIGZyYWN0aW9uO1xuICAgICAgICAgICAgY29uc3QgZGlzdCA9IG1hdGgubGVycChsaW5lYXJEaXN0LCBsb2dEaXN0LCBsaWdodC5jYXNjYWRlRGlzdHJpYnV0aW9uKTtcbiAgICAgICAgICAgIGxpZ2h0Ll9zaGFkb3dDYXNjYWRlRGlzdGFuY2VzW2kgLSAxXSA9IGRpc3Q7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSByZW5kZXIgcGFzcyBmb3IgZGlyZWN0aW9uYWwgbGlnaHQgc2hhZG93IHJlbmRlcmluZyBmb3IgYSBzcGVjaWZpZWQgY2FtZXJhLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL2xpZ2h0LmpzJykuTGlnaHR9IGxpZ2h0IC0gVGhlIGRpcmVjdGlvbmFsIGxpZ2h0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9jYW1lcmEuanMnKS5DYW1lcmF9IGNhbWVyYSAtIFRoZSBjYW1lcmEuXG4gICAgICogQHJldHVybnMge1JlbmRlclBhc3NTaGFkb3dEaXJlY3Rpb25hbHxudWxsfSAtIFRoZSByZW5kZXIgcGFzcyBpZiB0aGUgc2hhZG93IHJlbmRlcmluZyBpc1xuICAgICAqIHJlcXVpcmVkLCBvciBudWxsIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBnZXRMaWdodFJlbmRlclBhc3MobGlnaHQsIGNhbWVyYSkge1xuXG4gICAgICAgIERlYnVnLmFzc2VydChsaWdodCAmJiBsaWdodC5fdHlwZSA9PT0gTElHSFRUWVBFX0RJUkVDVElPTkFMKTtcblxuICAgICAgICBsZXQgcmVuZGVyUGFzcyA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnNoYWRvd1JlbmRlcmVyLm5lZWRzU2hhZG93UmVuZGVyaW5nKGxpZ2h0KSkge1xuXG4gICAgICAgICAgICAvLyBzaGFkb3cgY2FzY2FkZXMgaGF2ZSBtb3JlIGZhY2VzIHJlbmRlcmVkIHdpdGhpbiBhIHNpbmdlIHJlbmRlciBwYXNzXG4gICAgICAgICAgICBjb25zdCBmYWNlQ291bnQgPSBsaWdodC5udW1TaGFkb3dGYWNlcztcbiAgICAgICAgICAgIGNvbnN0IHNoYWRvd1VwZGF0ZU92ZXJyaWRlcyA9IGxpZ2h0LnNoYWRvd1VwZGF0ZU92ZXJyaWRlcztcblxuICAgICAgICAgICAgLy8gcHJlcGFyZSByZW5kZXIgdGFyZ2V0cyAvIGNhbWVyYXMgZm9yIHJlbmRlcmluZ1xuICAgICAgICAgICAgbGV0IGFsbENhc2NhZGVzUmVuZGVyaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBzaGFkb3dDYW1lcmE7XG4gICAgICAgICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGZhY2VDb3VudDsgZmFjZSsrKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2hhZG93VXBkYXRlT3ZlcnJpZGVzPy5bZmFjZV0gPT09IFNIQURPV1VQREFURV9OT05FKVxuICAgICAgICAgICAgICAgICAgICBhbGxDYXNjYWRlc1JlbmRlcmluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgc2hhZG93Q2FtZXJhID0gdGhpcy5zaGFkb3dSZW5kZXJlci5wcmVwYXJlRmFjZShsaWdodCwgY2FtZXJhLCBmYWNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVuZGVyUGFzcyA9IG5ldyBSZW5kZXJQYXNzU2hhZG93RGlyZWN0aW9uYWwodGhpcy5kZXZpY2UsIHRoaXMuc2hhZG93UmVuZGVyZXIsIGxpZ2h0LCBjYW1lcmEsIGFsbENhc2NhZGVzUmVuZGVyaW5nKTtcblxuICAgICAgICAgICAgLy8gc2V0dXAgcmVuZGVyIHBhc3MgdXNpbmcgYW55IG9mIHRoZSBjYW1lcmFzLCB0aGV5IGFsbCBoYXZlIHRoZSBzYW1lIHBhc3MgcmVsYXRlZCBwcm9wZXJ0aWVzXG4gICAgICAgICAgICB0aGlzLnNoYWRvd1JlbmRlcmVyLnNldHVwUmVuZGVyUGFzcyhyZW5kZXJQYXNzLCBzaGFkb3dDYW1lcmEsIGFsbENhc2NhZGVzUmVuZGVyaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZW5kZXJQYXNzO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgU2hhZG93UmVuZGVyZXJEaXJlY3Rpb25hbCB9O1xuIl0sIm5hbWVzIjpbInZpc2libGVTY2VuZUFhYmIiLCJCb3VuZGluZ0JveCIsImNlbnRlciIsIlZlYzMiLCJzaGFkb3dDYW1WaWV3IiwiTWF0NCIsImFhYmJQb2ludHMiLCJfZGVwdGhSYW5nZSIsIm1pbiIsIm1heCIsImdldERlcHRoUmFuZ2UiLCJjYW1lcmFWaWV3TWF0cml4IiwiYWFiYk1pbiIsImFhYmJNYXgiLCJ4IiwieSIsInoiLCJtaW56IiwibWF4eiIsImkiLCJ0cmFuc2Zvcm1Qb2ludCIsIlNoYWRvd1JlbmRlcmVyRGlyZWN0aW9uYWwiLCJjb25zdHJ1Y3RvciIsInJlbmRlcmVyIiwic2hhZG93UmVuZGVyZXIiLCJkZXZpY2UiLCJjdWxsIiwibGlnaHQiLCJjb21wIiwiY2FtZXJhIiwiY2FzdGVycyIsInZpc2libGVUaGlzRnJhbWUiLCJfc2hhZG93TWFwIiwiU2hhZG93TWFwIiwiY3JlYXRlIiwibmVhckRpc3QiLCJfbmVhckNsaXAiLCJnZW5lcmF0ZVNwbGl0RGlzdGFuY2VzIiwiTWF0aCIsIl9mYXJDbGlwIiwic2hhZG93RGlzdGFuY2UiLCJzaGFkb3dVcGRhdGVPdmVycmlkZXMiLCJjYXNjYWRlIiwibnVtQ2FzY2FkZXMiLCJTSEFET1dVUERBVEVfTk9ORSIsImxpZ2h0UmVuZGVyRGF0YSIsImdldFJlbmRlckRhdGEiLCJzaGFkb3dDYW0iLCJzaGFkb3dDYW1lcmEiLCJyZW5kZXJUYXJnZXQiLCJyZW5kZXJUYXJnZXRzIiwic2hhZG93Vmlld3BvcnQiLCJjb3B5IiwiY2FzY2FkZXMiLCJzaGFkb3dTY2lzc29yIiwic2hhZG93Q2FtTm9kZSIsIl9ub2RlIiwibGlnaHROb2RlIiwic2V0UG9zaXRpb24iLCJnZXRQb3NpdGlvbiIsInNldFJvdGF0aW9uIiwiZ2V0Um90YXRpb24iLCJyb3RhdGVMb2NhbCIsImZydXN0dW1OZWFyRGlzdCIsIl9zaGFkb3dDYXNjYWRlRGlzdGFuY2VzIiwiZnJ1c3R1bUZhckRpc3QiLCJmcnVzdHVtUG9pbnRzIiwiZ2V0RnJ1c3R1bUNvcm5lcnMiLCJzZXQiLCJjYW1lcmFXb3JsZE1hdCIsIm5vZGUiLCJnZXRXb3JsZFRyYW5zZm9ybSIsImFkZCIsIm11bFNjYWxhciIsInJhZGl1cyIsImRpc3QiLCJzdWIiLCJsZW5ndGgiLCJyaWdodCIsInVwIiwibGlnaHREaXIiLCJmb3J3YXJkIiwic2l6ZVJhdGlvIiwiX3NoYWRvd1Jlc29sdXRpb24iLCJjZWlsIiwiZG90Iiwic2NhbGVkVXAiLCJzY2FsZWRSaWdodCIsInNjYWxlZERpciIsImFkZDIiLCJ0cmFuc2xhdGVMb2NhbCIsIm5lYXJDbGlwIiwiZmFyQ2xpcCIsIm9ydGhvSGVpZ2h0IiwidXBkYXRlQ2FtZXJhRnJ1c3R1bSIsImN1bGxTaGFkb3dDYXN0ZXJzIiwidmlzaWJsZUNhc3RlcnMiLCJlbXB0eUFhYmIiLCJtZXNoSW5zdGFuY2UiLCJhYWJiIiwiaW52ZXJ0IiwiZGVwdGhSYW5nZSIsImdldE1pbiIsImdldE1heCIsImRlcHRoUmFuZ2VDb21wZW5zYXRpb24iLCJwcm9qZWN0aW9uQ29tcGVuc2F0aW9uIiwiZmFyRGlzdCIsImZpbGwiLCJmcmFjdGlvbiIsImxpbmVhckRpc3QiLCJsb2dEaXN0IiwibWF0aCIsImxlcnAiLCJjYXNjYWRlRGlzdHJpYnV0aW9uIiwiZ2V0TGlnaHRSZW5kZXJQYXNzIiwiRGVidWciLCJhc3NlcnQiLCJfdHlwZSIsIkxJR0hUVFlQRV9ESVJFQ1RJT05BTCIsInJlbmRlclBhc3MiLCJuZWVkc1NoYWRvd1JlbmRlcmluZyIsImZhY2VDb3VudCIsIm51bVNoYWRvd0ZhY2VzIiwiYWxsQ2FzY2FkZXNSZW5kZXJpbmciLCJmYWNlIiwicHJlcGFyZUZhY2UiLCJSZW5kZXJQYXNzU2hhZG93RGlyZWN0aW9uYWwiLCJzZXR1cFJlbmRlclBhc3MiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQWFBLE1BQU1BLGdCQUFnQixHQUFHLElBQUlDLFdBQVcsRUFBRSxDQUFBO0FBQzFDLE1BQU1DLE1BQU0sR0FBRyxJQUFJQyxJQUFJLEVBQUUsQ0FBQTtBQUN6QixNQUFNQyxhQUFhLEdBQUcsSUFBSUMsSUFBSSxFQUFFLENBQUE7QUFFaEMsTUFBTUMsVUFBVSxHQUFHLENBQ2YsSUFBSUgsSUFBSSxFQUFFLEVBQUUsSUFBSUEsSUFBSSxFQUFFLEVBQUUsSUFBSUEsSUFBSSxFQUFFLEVB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
