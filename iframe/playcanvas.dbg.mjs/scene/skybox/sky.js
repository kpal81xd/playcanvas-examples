import { Vec3 } from '../../core/math/vec3.js';
import { SKYTYPE_INFINITE } from '../constants.js';
import { GraphNode } from '../graph-node.js';
import { SkyMesh } from './sky-mesh.js';

/**
 * Implementation of the sky.
 *
 * @category Graphics
 */
class Sky {
  /**
   * Constructs a new sky.
   *
   * @param {import('../scene.js').Scene} scene - The scene owning the sky.
   * @hideconstructor
   */
  constructor(scene) {
    /**
     * The type of the sky. One of the SKYMESH_* constants.
     *
     * @type {string}
     * @private
     */
    this._type = SKYTYPE_INFINITE;
    /**
     * The center of the sky.
     *
     * @type {Vec3}
     * @private
     */
    this._center = new Vec3(0, 1, 0);
    /**
     * The sky mesh of the scene.
     *
     * @type {SkyMesh|null}
     * @ignore
     */
    this.skyMesh = null;
    /**
     * A graph node with a transform used to render the sky mesh. Adjust the position, rotation and
     * scale of this node to orient the sky mesh. Ignored for {@link SKYTYPE_INFINITE}.
     *
     * @type {GraphNode}
     * @readonly
     */
    this.node = new GraphNode('SkyMeshNode');
    this.device = scene.device;
    this.scene = scene;

    // defaults
    this.center = new Vec3(0, 1, 0);
    this.centerArray = new Float32Array(3);
    this.projectedSkydomeCenterId = this.device.scope.resolve('projectedSkydomeCenter');
  }
  applySettings(render) {
    var _render$skyType, _render$skyMeshPositi, _render$skyMeshRotati, _render$skyMeshScale;
    this.type = (_render$skyType = render.skyType) != null ? _render$skyType : SKYTYPE_INFINITE;
    this.node.setLocalPosition(new Vec3((_render$skyMeshPositi = render.skyMeshPosition) != null ? _render$skyMeshPositi : [0, 0, 0]));
    this.node.setLocalEulerAngles(new Vec3((_render$skyMeshRotati = render.skyMeshRotation) != null ? _render$skyMeshRotati : [0, 0, 0]));
    this.node.setLocalScale(new Vec3((_render$skyMeshScale = render.skyMeshScale) != null ? _render$skyMeshScale : [1, 1, 1]));
    if (render.skyCenter) {
      this._center = new Vec3(render.skyCenter);
    }
  }

  /**
   * The type of the sky. One of the SKYMESH_* constants. Defaults to {@link SKYTYPE_INFINITE}.
   * Can be:
   *
   * {@link SKYTYPE_INFINITE}
   * {@link SKYTYPE_BOX}
   * {@link SKYTYPE_DOME}
   *
   * @type {string}
   */
  set type(value) {
    if (this._type !== value) {
      this._type = value;
      this.scene.updateShaders = true;
      this.updateSkyMesh();
    }
  }
  get type() {
    return this._type;
  }

  /**
   * The center of the sky. Ignored for {@link SKYTYPE_INFINITE}. Typically only the y-coordinate
   * is used, representing the tripod height. Defaults to (0, 1, 0).
   *
   * @type {Vec3}
   */
  set center(value) {
    this._center.copy(value);
  }
  get center() {
    return this._center;
  }
  updateSkyMesh() {
    const texture = this.scene._getSkyboxTex();
    if (texture) {
      this.resetSkyMesh();
      this.skyMesh = new SkyMesh(this.device, this.scene, this.node, texture, this.type);
      this.scene.fire('set:skybox', texture);
    }
  }
  resetSkyMesh() {
    var _this$skyMesh;
    (_this$skyMesh = this.skyMesh) == null || _this$skyMesh.destroy();
    this.skyMesh = null;
  }
  update() {
    // uniforms
    if (this.type !== SKYTYPE_INFINITE) {
      const {
        center,
        centerArray
      } = this;

      // tripod position is relative to the node, transform it to the world space
      const temp = new Vec3();
      this.node.getWorldTransform().transformPoint(center, temp);
      centerArray[0] = temp.x;
      centerArray[1] = temp.y;
      centerArray[2] = temp.z;
      this.projectedSkydomeCenterId.setValue(centerArray);
    }
  }
}

export { Sky };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2t5LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvc2NlbmUvc2t5Ym94L3NreS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWMzIH0gZnJvbSBcIi4uLy4uL2NvcmUvbWF0aC92ZWMzLmpzXCI7XG5pbXBvcnQgeyBTS1lUWVBFX0lORklOSVRFIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgR3JhcGhOb2RlIH0gZnJvbSBcIi4uL2dyYXBoLW5vZGUuanNcIjtcbmltcG9ydCB7IFNreU1lc2ggfSBmcm9tIFwiLi9za3ktbWVzaC5qc1wiO1xuXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBza3kuXG4gKlxuICogQGNhdGVnb3J5IEdyYXBoaWNzXG4gKi9cbmNsYXNzIFNreSB7XG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgb2YgdGhlIHNreS4gT25lIG9mIHRoZSBTS1lNRVNIXyogY29uc3RhbnRzLlxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF90eXBlID0gU0tZVFlQRV9JTkZJTklURTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjZW50ZXIgb2YgdGhlIHNreS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtWZWMzfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2NlbnRlciA9IG5ldyBWZWMzKDAsIDEsIDApO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNreSBtZXNoIG9mIHRoZSBzY2VuZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtTa3lNZXNofG51bGx9XG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIHNreU1lc2ggPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQSBncmFwaCBub2RlIHdpdGggYSB0cmFuc2Zvcm0gdXNlZCB0byByZW5kZXIgdGhlIHNreSBtZXNoLiBBZGp1c3QgdGhlIHBvc2l0aW9uLCByb3RhdGlvbiBhbmRcbiAgICAgKiBzY2FsZSBvZiB0aGlzIG5vZGUgdG8gb3JpZW50IHRoZSBza3kgbWVzaC4gSWdub3JlZCBmb3Ige0BsaW5rIFNLWVRZUEVfSU5GSU5JVEV9LlxuICAgICAqXG4gICAgICogQHR5cGUge0dyYXBoTm9kZX1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBub2RlID0gbmV3IEdyYXBoTm9kZSgnU2t5TWVzaE5vZGUnKTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgc2t5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL3NjZW5lLmpzJykuU2NlbmV9IHNjZW5lIC0gVGhlIHNjZW5lIG93bmluZyB0aGUgc2t5LlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY2VuZSkge1xuICAgICAgICB0aGlzLmRldmljZSA9IHNjZW5lLmRldmljZTtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuXG4gICAgICAgIC8vIGRlZmF1bHRzXG4gICAgICAgIHRoaXMuY2VudGVyID0gbmV3IFZlYzMoMCwgMSwgMCk7XG5cbiAgICAgICAgdGhpcy5jZW50ZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIHRoaXMucHJvamVjdGVkU2t5ZG9tZUNlbnRlcklkID0gdGhpcy5kZXZpY2Uuc2NvcGUucmVzb2x2ZSgncHJvamVjdGVkU2t5ZG9tZUNlbnRlcicpO1xuICAgIH1cblxuXG4gICAgYXBwbHlTZXR0aW5ncyhyZW5kZXIpIHtcbiAgICAgICAgdGhpcy50eXBlID0gcmVuZGVyLnNreVR5cGUgPz8gU0tZVFlQRV9JTkZJTklURTtcbiAgICAgICAgdGhpcy5ub2RlLnNldExvY2FsUG9zaXRpb24obmV3IFZlYzMocmVuZGVyLnNreU1lc2hQb3NpdGlvbiA/PyBbMCwgMCwgMF0pKTtcbiAgICAgICAgdGhpcy5ub2RlLnNldExvY2FsRXVsZXJBbmdsZXMobmV3IFZlYzMocmVuZGVyLnNreU1lc2hSb3RhdGlvbiA/PyBbMCwgMCwgMF0pKTtcbiAgICAgICAgdGhpcy5ub2RlLnNldExvY2FsU2NhbGUobmV3IFZlYzMocmVuZGVyLnNreU1lc2hTY2FsZSA/PyBbMSwgMSwgMV0pKTtcbiAgICAgICAgaWYgKHJlbmRlci5za3lDZW50ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2NlbnRlciA9IG5ldyBWZWMzKHJlbmRlci5za3lDZW50ZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgb2YgdGhlIHNreS4gT25lIG9mIHRoZSBTS1lNRVNIXyogY29uc3RhbnRzLiBEZWZhdWx0cyB0byB7QGxpbmsgU0tZVFlQRV9JTkZJTklURX0uXG4gICAgICogQ2FuIGJlOlxuICAgICAqXG4gICAgICoge0BsaW5rIFNLWVRZUEVfSU5GSU5JVEV9XG4gICAgICoge0BsaW5rIFNLWVRZUEVfQk9YfVxuICAgICAqIHtAbGluayBTS1lUWVBFX0RPTUV9XG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHNldCB0eXBlKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLl90eXBlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fdHlwZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5zY2VuZS51cGRhdGVTaGFkZXJzID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2t5TWVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90eXBlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBjZW50ZXIgb2YgdGhlIHNreS4gSWdub3JlZCBmb3Ige0BsaW5rIFNLWVRZUEVfSU5GSU5JVEV9LiBUeXBpY2FsbHkgb25seSB0aGUgeS1jb29yZGluYXRlXG4gICAgICogaXMgdXNlZCwgcmVwcmVzZW50aW5nIHRoZSB0cmlwb2QgaGVpZ2h0LiBEZWZhdWx0cyB0byAoMCwgMSwgMCkuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7VmVjM31cbiAgICAgKi9cbiAgICBzZXQgY2VudGVyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NlbnRlci5jb3B5KHZhbHVlKTtcbiAgICB9XG5cbiAgICBnZXQgY2VudGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2VudGVyO1xuICAgIH1cblxuICAgIHVwZGF0ZVNreU1lc2goKSB7XG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSB0aGlzLnNjZW5lLl9nZXRTa3lib3hUZXgoKTtcbiAgICAgICAgaWYgKHRleHR1cmUpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTa3lNZXNoKCk7XG4gICAgICAgICAgICB0aGlzLnNreU1lc2ggPSBuZXcgU2t5TWVzaCh0aGlzLmRldmljZSwgdGhpcy5zY2VuZSwgdGhpcy5ub2RlLCB0ZXh0dXJlLCB0aGlzLnR5cGUpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZS5maXJlKCdzZXQ6c2t5Ym94JywgdGV4dHVyZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNldFNreU1lc2goKSB7XG4gICAgICAgIHRoaXMuc2t5TWVzaD8uZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnNreU1lc2ggPSBudWxsO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcblxuICAgICAgICAvLyB1bmlmb3Jtc1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBTS1lUWVBFX0lORklOSVRFKSB7XG4gICAgICAgICAgICBjb25zdCB7IGNlbnRlciwgY2VudGVyQXJyYXkgfSA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIHRyaXBvZCBwb3NpdGlvbiBpcyByZWxhdGl2ZSB0byB0aGUgbm9kZSwgdHJhbnNmb3JtIGl0IHRvIHRoZSB3b3JsZCBzcGFjZVxuICAgICAgICAgICAgY29uc3QgdGVtcCA9IG5ldyBWZWMzKCk7XG4gICAgICAgICAgICB0aGlzLm5vZGUuZ2V0V29ybGRUcmFuc2Zvcm0oKS50cmFuc2Zvcm1Qb2ludChjZW50ZXIsIHRlbXApO1xuXG4gICAgICAgICAgICBjZW50ZXJBcnJheVswXSA9IHRlbXAueDtcbiAgICAgICAgICAgIGNlbnRlckFycmF5WzFdID0gdGVtcC55O1xuICAgICAgICAgICAgY2VudGVyQXJyYXlbMl0gPSB0ZW1wLno7XG4gICAgICAgICAgICB0aGlzLnByb2plY3RlZFNreWRvbWVDZW50ZXJJZC5zZXRWYWx1ZShjZW50ZXJBcnJheSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IFNreSB9O1xuIl0sIm5hbWVzIjpbIlNreSIsImNvbnN0cnVjdG9yIiwic2NlbmUiLCJfdHlwZSIsIlNLWVRZUEVfSU5GSU5JVEUiLCJfY2VudGVyIiwiVmVjMyIsInNreU1lc2giLCJub2RlIiwiR3JhcGhOb2RlIiwiZGV2aWNlIiwiY2VudGVyIiwiY2VudGVyQXJyYXkiLCJGbG9hdDMyQXJyYXkiLCJwcm9qZWN0ZWRTa3lkb21lQ2VudGVySWQiLCJzY29wZSIsInJlc29sdmUiLCJhcHBseVNldHRpbmdzIiwicmVuZGVyIiwiX3JlbmRlciRza3lUeXBlIiwiX3JlbmRlciRza3lNZXNoUG9zaXRpIiwiX3JlbmRlciRza3lNZXNoUm90YXRpIiwiX3JlbmRlciRza3lNZXNoU2NhbGUiLCJ0eXBlIiwic2t5VHlwZSIsInNldExvY2FsUG9zaXRpb24iLCJza3lNZXNoUG9zaXRpb24iLCJzZXRMb2NhbEV1bGVyQW5nbGVzIiwic2t5TWVzaFJvdGF0aW9uIiwic2V0TG9jYWxTY2FsZSIsInNreU1lc2hTY2FsZSIsInNreUNlbnRlciIsInZhbHVlIiwidXBkYXRlU2hhZGVycyIsInVwZGF0ZVNreU1lc2giLCJjb3B5IiwidGV4dHVyZSIsIl9nZXRTa3lib3hUZXgiLCJyZXNldFNreU1lc2giLCJTa3lNZXNoIiwiZmlyZSIsIl90aGlzJHNreU1lc2giLCJkZXN0cm95IiwidXBkYXRlIiwidGVtcCIsImdldFdvcmxkVHJhbnNmb3JtIiwidHJhbnNmb3JtUG9pbnQiLCJ4IiwieSIsInoiLCJzZXRWYWx1ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsR0FBRyxDQUFDO0FBa0NOO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJQyxXQUFXQSxDQUFDQyxLQUFLLEVBQUU7QUF2Q25CO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtJQUxJLElBTUFDLENBQUFBLEtBQUssR0FBR0MsZ0JBQWdCLENBQUE7QUFFeEI7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0lBTEksSUFNQUMsQ0FBQUEsT0FBTyxHQUFHLElBQUlDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO0FBRTNCO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtJQUxJLElBTUFDLENBQUFBLE9BQU8sR0FBRyxJQUFJLENBQUE7QUFFZDtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5JLElBQUEsSUFBQSxDQU9BQyxJQUFJLEdBQUcsSUFBSUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFBO0FBUy9CLElBQUEsSUFBSSxDQUFDQyxNQUFNLEdBQUdSLEtBQUssQ0FBQ1EsTUFBTSxDQUFBO0lBQzFCLElBQUksQ0FBQ1IsS0FBSyxHQUFHQSxLQUFLLENBQUE7O0FBRWxCO0lBQ0EsSUFBSSxDQUFDUyxNQUFNLEdBQUcsSUFBSUwsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7QUFFL0IsSUFBQSxJQUFJLENBQUNNLFdBQVcsR0FBRyxJQUFJQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDdEMsSUFBQSxJQUFJLENBQUNDLHdCQUF3QixHQUFHLElBQUksQ0FBQ0osTUFBTSxDQUFDSyxLQUFLLENBQUNDLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFBO0FBQ3ZGLEdBQUE7RUFHQUMsYUFBYUEsQ0FBQ0MsTUFBTSxFQUFFO0FBQUEsSUFBQSxJQUFBQyxlQUFBLEVBQUFDLHFCQUFBLEVBQUFDLHFCQUFBLEVBQUFDLG9CQUFBLENBQUE7SUFDbEIsSUFBSSxDQUFDQyxJQUFJLEdBQUEsQ0FBQUosZUFBQSxHQUFHRCxNQUFNLENBQUNNLE9BQU8sS0FBQSxJQUFBLEdBQUFMLGVBQUEsR0FBSWYsZ0JBQWdCLENBQUE7SUFDOUMsSUFBSSxDQUFDSSxJQUFJLENBQUNpQixnQkFBZ0IsQ0FBQyxJQUFJbkIsSUFBSSxDQUFBLENBQUFjLHFCQUFBLEdBQUNGLE1BQU0sQ0FBQ1EsZUFBZSxLQUFBTixJQUFBQSxHQUFBQSxxQkFBQSxHQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDekUsSUFBSSxDQUFDWixJQUFJLENBQUNtQixtQkFBbUIsQ0FBQyxJQUFJckIsSUFBSSxDQUFBLENBQUFlLHFCQUFBLEdBQUNILE1BQU0sQ0FBQ1UsZUFBZSxLQUFBUCxJQUFBQSxHQUFBQSxxQkFBQSxHQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDNUUsSUFBSSxDQUFDYixJQUFJLENBQUNxQixhQUFhLENBQUMsSUFBSXZCLElBQUksQ0FBQSxDQUFBZ0Isb0JBQUEsR0FBQ0osTUFBTSxDQUFDWSxZQUFZLEtBQUFSLElBQUFBLEdBQUFBLG9CQUFBLEdBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtJQUNuRSxJQUFJSixNQUFNLENBQUNhLFNBQVMsRUFBRTtNQUNsQixJQUFJLENBQUMxQixPQUFPLEdBQUcsSUFBSUMsSUFBSSxDQUFDWSxNQUFNLENBQUNhLFNBQVMsQ0FBQyxDQUFBO0FBQzdDLEtBQUE7QUFDSixHQUFBOztBQUVBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0ksSUFBSVIsSUFBSUEsQ0FBQ1MsS0FBSyxFQUFFO0FBQ1osSUFBQSxJQUFJLElBQUksQ0FBQzdCLEtBQUssS0FBSzZCLEtBQUssRUFBRTtNQUN0QixJQUFJLENBQUM3QixLQUFLLEdBQUc2QixLQUFLLENBQUE7QUFDbEIsTUFBQSxJQUFJLENBQUM5QixLQUFLLENBQUMrQixhQUFhLEdBQUcsSUFBSSxDQUFBO01BQy9CLElBQUksQ0FBQ0MsYUFBYSxFQUFFLENBQUE7QUFDeEIsS0FBQTtBQUNKLEdBQUE7RUFFQSxJQUFJWCxJQUFJQSxHQUFHO0lBQ1AsT0FBTyxJQUFJLENBQUNwQixLQUFLLENBQUE7QUFDckIsR0FBQTs7QUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSSxJQUFJUSxNQUFNQSxDQUFDcUIsS0FBSyxFQUFFO0FBQ2QsSUFBQSxJQUFJLENBQUMzQixPQUFPLENBQUM4QixJQUFJLENBQUNILEtBQUssQ0FBQyxDQUFBO0FBQzVCLEdBQUE7RUFFQSxJQUFJckIsTUFBTUEsR0FBRztJQUNULE9BQU8sSUFBSSxDQUFDTixPQUFPLENBQUE7QUFDdkIsR0FBQTtBQUVBNkIsRUFBQUEsYUFBYUEsR0FBRztJQUNaLE1BQU1FLE9BQU8sR0FBRyxJQUFJLENBQUNsQyxLQUFLLENBQUNtQyxhQUFhLEVBQUUsQ0FBQTtBQUMxQyxJQUFBLElBQUlELE9BQU8sRUFBRTtNQUNULElBQUksQ0FBQ0UsWUFBWSxFQUFFLENBQUE7TUFDbkIsSUFBSSxDQUFDL0IsT0FBTyxHQUFHLElBQUlnQyxPQUFPLENBQUMsSUFBSSxDQUFDN0IsTUFBTSxFQUFFLElBQUksQ0FBQ1IsS0FBSyxFQUFFLElBQUksQ0FBQ00sSUFBSSxFQUFFNEIsT0FBTyxFQUFFLElBQUksQ0FBQ2IsSUFBSSxDQUFDLENBQUE7TUFDbEYsSUFBSSxDQUFDckIsS0FBSyxDQUFDc0MsSUFBSSxDQUFDLFlBQVksRUFBRUosT0FBTyxDQUFDLENBQUE7QUFDMUMsS0FBQTtBQUNKLEdBQUE7QUFFQUUsRUFBQUEsWUFBWUEsR0FBRztBQUFBLElBQUEsSUFBQUcsYUFBQSxDQUFBO0lBQ1gsQ0FBQUEsYUFBQSxPQUFJLENBQUNsQyxPQUFPLGFBQVprQyxhQUFBLENBQWNDLE9BQU8sRUFBRSxDQUFBO0lBQ3ZCLElBQUksQ0FBQ25DLE9BQU8sR0FBRyxJQUFJLENBQUE7QUFDdkIsR0FBQTtBQUVBb0MsRUFBQUEsTUFBTUEsR0FBRztBQUVMO0FBQ0EsSUFBQSxJQUFJLElBQUksQ0FBQ3BCLElBQUksS0FBS25CLGdCQUFnQixFQUFFO01BQ2hDLE1BQU07UUFBRU8sTUFBTTtBQUFFQyxRQUFBQSxXQUFBQTtBQUFZLE9BQUMsR0FBRyxJQUFJLENBQUE7O0FBRXBDO0FBQ0EsTUFBQSxNQUFNZ0MsSUFBSSxHQUFHLElBQUl0QyxJQUFJLEVBQUUsQ0FBQTtBQUN2QixNQUFBLElBQUksQ0FBQ0UsSUFBSSxDQUFDcUMsaUJBQWlCLEVBQUUsQ0FBQ0MsY0FBYyxDQUFDbkMsTUFBTSxFQUFFaUMsSUFBSSxDQUFDLENBQUE7QUFFMURoQyxNQUFBQSxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUdnQyxJQUFJLENBQUNHLENBQUMsQ0FBQTtBQUN2Qm5DLE1BQUFBLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBR2dDLElBQUksQ0FBQ0ksQ0FBQyxDQUFBO0FBQ3ZCcEMsTUFBQUEsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHZ0MsSUFBSSxDQUFDSyxDQUFDLENBQUE7QUFDdkIsTUFBQSxJQUFJLENBQUNuQyx3QkFBd0IsQ0FBQ29DLFFBQVEsQ0FBQ3RDLFdBQVcsQ0FBQyxDQUFBO0FBQ3ZELEtBQUE7QUFDSixHQUFBO0FBQ0o7Ozs7In0=
