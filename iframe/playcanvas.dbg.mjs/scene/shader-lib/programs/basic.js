import { SEMANTIC_POSITION, SEMANTIC_BLENDWEIGHT, SEMANTIC_BLENDINDICES, SEMANTIC_COLOR, SEMANTIC_TEXCOORD0 } from '../../../platform/graphics/constants.js';
import { ShaderUtils } from '../../../platform/graphics/shader-utils.js';
import { shaderChunks } from '../chunks/chunks.js';
import { SHADER_DEPTH, SHADER_PICK } from '../../constants.js';
import { ShaderPass } from '../../shader-pass.js';
import { ShaderGenerator } from './shader-generator.js';

class ShaderGeneratorBasic extends ShaderGenerator {
  generateKey(options) {
    let key = 'basic';
    if (options.fog) key += '_fog';
    if (options.alphaTest) key += '_atst';
    if (options.vertexColors) key += '_vcol';
    if (options.diffuseMap) key += '_diff';
    if (options.skin) key += '_skin';
    if (options.screenSpace) key += '_ss';
    if (options.useInstancing) key += '_inst';
    if (options.useMorphPosition) key += '_morphp';
    if (options.useMorphNormal) key += '_morphn';
    if (options.useMorphTextureBased) key += '_morpht';
    key += '_' + options.pass;
    return key;
  }
  createShaderDefinition(device, options) {
    // GENERATE ATTRIBUTES
    const attributes = {
      vertex_position: SEMANTIC_POSITION
    };
    if (options.skin) {
      attributes.vertex_boneWeights = SEMANTIC_BLENDWEIGHT;
      attributes.vertex_boneIndices = SEMANTIC_BLENDINDICES;
    }
    if (options.vertexColors) {
      attributes.vertex_color = SEMANTIC_COLOR;
    }
    if (options.diffuseMap) {
      attributes.vertex_texCoord0 = SEMANTIC_TEXCOORD0;
    }
    const shaderPassInfo = ShaderPass.get(device).getByIndex(options.pass);
    const shaderPassDefines = shaderPassInfo.shaderDefines;

    // GENERATE VERTEX SHADER
    let vshader = shaderPassDefines;

    // VERTEX SHADER DECLARATIONS
    vshader += shaderChunks.transformDeclVS;
    if (options.skin) {
      vshader += ShaderGenerator.skinCode(device);
      vshader += shaderChunks.transformSkinnedVS;
    } else {
      vshader += shaderChunks.transformVS;
    }
    if (options.vertexColors) {
      vshader += 'attribute vec4 vertex_color;\n';
      vshader += 'varying vec4 vColor;\n';
    }
    if (options.diffuseMap) {
      vshader += 'attribute vec2 vertex_texCoord0;\n';
      vshader += 'varying vec2 vUv0;\n';
    }
    if (options.pass === SHADER_DEPTH) {
      vshader += 'varying float vDepth;\n';
      vshader += '#ifndef VIEWMATRIX\n';
      vshader += '#define VIEWMATRIX\n';
      vshader += 'uniform mat4 matrix_view;\n';
      vshader += '#endif\n';
      vshader += '#ifndef CAMERAPLANES\n';
      vshader += '#define CAMERAPLANES\n';
      vshader += 'uniform vec4 camera_params;\n\n';
      vshader += '#endif\n';
    }

    // VERTEX SHADER BODY
    vshader += ShaderGenerator.begin();
    vshader += "   gl_Position = getPosition();\n";
    if (options.pass === SHADER_DEPTH) {
      vshader += "    vDepth = -(matrix_view * vec4(getWorldPosition(),1.0)).z * camera_params.x;\n";
    }
    if (options.vertexColors) {
      vshader += '    vColor = vertex_color;\n';
    }
    if (options.diffuseMap) {
      vshader += '    vUv0 = vertex_texCoord0;\n';
    }
    vshader += ShaderGenerator.end();

    // GENERATE FRAGMENT SHADER
    let fshader = shaderPassDefines;

    // FRAGMENT SHADER DECLARATIONS
    if (options.vertexColors) {
      fshader += 'varying vec4 vColor;\n';
    } else {
      fshader += 'uniform vec4 uColor;\n';
    }
    if (options.diffuseMap) {
      fshader += 'varying vec2 vUv0;\n';
      fshader += 'uniform sampler2D texture_diffuseMap;\n';
    }
    if (options.fog) {
      fshader += ShaderGenerator.fogCode(options.fog);
    }
    if (options.alphaTest) {
      fshader += shaderChunks.alphaTestPS;
    }
    if (options.pass === SHADER_DEPTH) {
      // ##### SCREEN DEPTH PASS #####
      fshader += 'varying float vDepth;\n';
      fshader += shaderChunks.packDepthPS;
    }

    // FRAGMENT SHADER BODY
    fshader += ShaderGenerator.begin();

    // Read the map texels that the shader needs
    if (options.vertexColors) {
      fshader += '    gl_FragColor = vColor;\n';
    } else {
      fshader += '    gl_FragColor = uColor;\n';
    }
    if (options.diffuseMap) {
      fshader += '    gl_FragColor *= texture2D(texture_diffuseMap, vUv0);\n';
    }
    if (options.alphaTest) {
      fshader += "   alphaTest(gl_FragColor.a);\n";
    }
    if (options.pass !== SHADER_PICK) {
      if (options.pass === SHADER_DEPTH) {
        // ##### SCREEN DEPTH PASS #####
        fshader += "    gl_FragColor = packFloat(vDepth);\n";
      } else {
        // ##### FORWARD PASS #####
        if (options.fog) {
          fshader += "   glFragColor.rgb = addFog(gl_FragColor.rgb);\n";
        }
      }
    }
    fshader += ShaderGenerator.end();
    return ShaderUtils.createDefinition(device, {
      name: 'BasicShader',
      attributes: attributes,
      vertexCode: vshader,
      fragmentCode: fshader
    });
  }
}
const basic = new ShaderGeneratorBasic();

export { basic };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9zY2VuZS9zaGFkZXItbGliL3Byb2dyYW1zL2Jhc2ljLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgU0VNQU5USUNfQkxFTkRJTkRJQ0VTLCBTRU1BTlRJQ19CTEVORFdFSUdIVCwgU0VNQU5USUNfQ09MT1IsIFNFTUFOVElDX1BPU0lUSU9OLCBTRU1BTlRJQ19URVhDT09SRDBcbn0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IFNoYWRlclV0aWxzIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3Mvc2hhZGVyLXV0aWxzLmpzJztcbmltcG9ydCB7IHNoYWRlckNodW5rcyB9IGZyb20gJy4uL2NodW5rcy9jaHVua3MuanMnO1xuXG5pbXBvcnQge1xuICAgIFNIQURFUl9ERVBUSCwgU0hBREVSX1BJQ0tcbn0gZnJvbSAnLi4vLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IFNoYWRlclBhc3MgfSBmcm9tICcuLi8uLi9zaGFkZXItcGFzcy5qcyc7XG5cbmltcG9ydCB7IFNoYWRlckdlbmVyYXRvciB9IGZyb20gJy4vc2hhZGVyLWdlbmVyYXRvci5qcyc7XG5cbmNsYXNzIFNoYWRlckdlbmVyYXRvckJhc2ljIGV4dGVuZHMgU2hhZGVyR2VuZXJhdG9yIHtcbiAgICBnZW5lcmF0ZUtleShvcHRpb25zKSB7XG4gICAgICAgIGxldCBrZXkgPSAnYmFzaWMnO1xuICAgICAgICBpZiAob3B0aW9ucy5mb2cpICAgICAgICAgICAgICAgICAgICBrZXkgKz0gJ19mb2cnO1xuICAgICAgICBpZiAob3B0aW9ucy5hbHBoYVRlc3QpICAgICAgICAgICAgICBrZXkgKz0gJ19hdHN0JztcbiAgICAgICAgaWYgKG9wdGlvbnMudmVydGV4Q29sb3JzKSAgICAgICAgICAga2V5ICs9ICdfdmNvbCc7XG4gICAgICAgIGlmIChvcHRpb25zLmRpZmZ1c2VNYXApICAgICAgICAgICAgIGtleSArPSAnX2RpZmYnO1xuICAgICAgICBpZiAob3B0aW9ucy5za2luKSAgICAgICAgICAgICAgICAgICBrZXkgKz0gJ19za2luJztcblxuICAgICAgICBpZiAob3B0aW9ucy5zY3JlZW5TcGFjZSkgICAgICAgICAgICBrZXkgKz0gJ19zcyc7XG4gICAgICAgIGlmIChvcHRpb25zLnVzZUluc3RhbmNpbmcpICAgICAgICAgIGtleSArPSAnX2luc3QnO1xuICAgICAgICBpZiAob3B0aW9ucy51c2VNb3JwaFBvc2l0aW9uKSAgICAgICBrZXkgKz0gJ19tb3JwaHAnO1xuICAgICAgICBpZiAob3B0aW9ucy51c2VNb3JwaE5vcm1hbCkgICAgICAgICBrZXkgKz0gJ19tb3JwaG4nO1xuICAgICAgICBpZiAob3B0aW9ucy51c2VNb3JwaFRleHR1cmVCYXNlZCkgICBrZXkgKz0gJ19tb3JwaHQnO1xuXG4gICAgICAgIGtleSArPSAnXycgKyBvcHRpb25zLnBhc3M7XG4gICAgICAgIHJldHVybiBrZXk7XG4gICAgfVxuXG4gICAgY3JlYXRlU2hhZGVyRGVmaW5pdGlvbihkZXZpY2UsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gR0VORVJBVEUgQVRUUklCVVRFU1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAgdmVydGV4X3Bvc2l0aW9uOiBTRU1BTlRJQ19QT1NJVElPTlxuICAgICAgICB9O1xuICAgICAgICBpZiAob3B0aW9ucy5za2luKSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzLnZlcnRleF9ib25lV2VpZ2h0cyA9IFNFTUFOVElDX0JMRU5EV0VJR0hUO1xuICAgICAgICAgICAgYXR0cmlidXRlcy52ZXJ0ZXhfYm9uZUluZGljZXMgPSBTRU1BTlRJQ19CTEVORElORElDRVM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMudmVydGV4Q29sb3JzKSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzLnZlcnRleF9jb2xvciA9IFNFTUFOVElDX0NPTE9SO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmRpZmZ1c2VNYXApIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMudmVydGV4X3RleENvb3JkMCA9IFNFTUFOVElDX1RFWENPT1JEMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNoYWRlclBhc3NJbmZvID0gU2hhZGVyUGFzcy5nZXQoZGV2aWNlKS5nZXRCeUluZGV4KG9wdGlvbnMucGFzcyk7XG4gICAgICAgIGNvbnN0IHNoYWRlclBhc3NEZWZpbmVzID0gc2hhZGVyUGFzc0luZm8uc2hhZGVyRGVmaW5lcztcblxuICAgICAgICAvLyBHRU5FUkFURSBWRVJURVggU0hBREVSXG4gICAgICAgIGxldCB2c2hhZGVyID0gc2hhZGVyUGFzc0RlZmluZXM7XG5cbiAgICAgICAgLy8gVkVSVEVYIFNIQURFUiBERUNMQVJBVElPTlNcbiAgICAgICAgdnNoYWRlciArPSBzaGFkZXJDaHVua3MudHJhbnNmb3JtRGVjbFZTO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnNraW4pIHtcbiAgICAgICAgICAgIHZzaGFkZXIgKz0gU2hhZGVyR2VuZXJhdG9yLnNraW5Db2RlKGRldmljZSk7XG4gICAgICAgICAgICB2c2hhZGVyICs9IHNoYWRlckNodW5rcy50cmFuc2Zvcm1Ta2lubmVkVlM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2c2hhZGVyICs9IHNoYWRlckNodW5rcy50cmFuc2Zvcm1WUztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnZlcnRleENvbG9ycykge1xuICAgICAgICAgICAgdnNoYWRlciArPSAnYXR0cmlidXRlIHZlYzQgdmVydGV4X2NvbG9yO1xcbic7XG4gICAgICAgICAgICB2c2hhZGVyICs9ICd2YXJ5aW5nIHZlYzQgdkNvbG9yO1xcbic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuZGlmZnVzZU1hcCkge1xuICAgICAgICAgICAgdnNoYWRlciArPSAnYXR0cmlidXRlIHZlYzIgdmVydGV4X3RleENvb3JkMDtcXG4nO1xuICAgICAgICAgICAgdnNoYWRlciArPSAndmFyeWluZyB2ZWMyIHZVdjA7XFxuJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnBhc3MgPT09IFNIQURFUl9ERVBUSCkge1xuICAgICAgICAgICAgdnNoYWRlciArPSAndmFyeWluZyBmbG9hdCB2RGVwdGg7XFxuJztcbiAgICAgICAgICAgIHZzaGFkZXIgKz0gJyNpZm5kZWYgVklFV01BVFJJWFxcbic7XG4gICAgICAgICAgICB2c2hhZGVyICs9ICcjZGVmaW5lIFZJRVdNQVRSSVhcXG4nO1xuICAgICAgICAgICAgdnNoYWRlciArPSAndW5pZm9ybSBtYXQ0IG1hdHJpeF92aWV3O1xcbic7XG4gICAgICAgICAgICB2c2hhZGVyICs9ICcjZW5kaWZcXG4nO1xuICAgICAgICAgICAgdnNoYWRlciArPSAnI2lmbmRlZiBDQU1FUkFQTEFORVNcXG4nO1xuICAgICAgICAgICAgdnNoYWRlciArPSAnI2RlZmluZSBDQU1FUkFQTEFORVNcXG4nO1xuICAgICAgICAgICAgdnNoYWRlciArPSAndW5pZm9ybSB2ZWM0IGNhbWVyYV9wYXJhbXM7XFxuXFxuJztcbiAgICAgICAgICAgIHZzaGFkZXIgKz0gJyNlbmRpZlxcbic7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBWRVJURVggU0hBREVSIEJPRFlcbiAgICAgICAgdnNoYWRlciArPSBTaGFkZXJHZW5lcmF0b3IuYmVnaW4oKTtcblxuICAgICAgICB2c2hhZGVyICs9IFwiICAgZ2xfUG9zaXRpb24gPSBnZXRQb3NpdGlvbigpO1xcblwiO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnBhc3MgPT09IFNIQURFUl9ERVBUSCkge1xuICAgICAgICAgICAgdnNoYWRlciArPSBcIiAgICB2RGVwdGggPSAtKG1hdHJpeF92aWV3ICogdmVjNChnZXRXb3JsZFBvc2l0aW9uKCksMS4wKSkueiAqIGNhbWVyYV9wYXJhbXMueDtcXG5cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnZlcnRleENvbG9ycykge1xuICAgICAgICAgICAgdnNoYWRlciArPSAnICAgIHZDb2xvciA9IHZlcnRleF9jb2xvcjtcXG4nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmRpZmZ1c2VNYXApIHtcbiAgICAgICAgICAgIHZzaGFkZXIgKz0gJyAgICB2VXYwID0gdmVydGV4X3RleENvb3JkMDtcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgdnNoYWRlciArPSBTaGFkZXJHZW5lcmF0b3IuZW5kKCk7XG5cbiAgICAgICAgLy8gR0VORVJBVEUgRlJBR01FTlQgU0hBREVSXG4gICAgICAgIGxldCBmc2hhZGVyID0gc2hhZGVyUGFzc0RlZmluZXM7XG5cbiAgICAgICAgLy8gRlJBR01FTlQgU0hBREVSIERFQ0xBUkFUSU9OU1xuICAgICAgICBpZiAob3B0aW9ucy52ZXJ0ZXhDb2xvcnMpIHtcbiAgICAgICAgICAgIGZzaGFkZXIgKz0gJ3ZhcnlpbmcgdmVjNCB2Q29sb3I7XFxuJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZzaGFkZXIgKz0gJ3VuaWZvcm0gdmVjNCB1Q29sb3I7XFxuJztcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5kaWZmdXNlTWFwKSB7XG4gICAgICAgICAgICBmc2hhZGVyICs9ICd2YXJ5aW5nIHZlYzIgdlV2MDtcXG4nO1xuICAgICAgICAgICAgZnNoYWRlciArPSAndW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZV9kaWZmdXNlTWFwO1xcbic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuZm9nKSB7XG4gICAgICAgICAgICBmc2hhZGVyICs9IFNoYWRlckdlbmVyYXRvci5mb2dDb2RlKG9wdGlvbnMuZm9nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5hbHBoYVRlc3QpIHtcbiAgICAgICAgICAgIGZzaGFkZXIgKz0gc2hhZGVyQ2h1bmtzLmFscGhhVGVzdFBTO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMucGFzcyA9PT0gU0hBREVSX0RFUFRIKSB7XG4gICAgICAgICAgICAvLyAjIyMjIyBTQ1JFRU4gREVQVEggUEFTUyAjIyMjI1xuICAgICAgICAgICAgZnNoYWRlciArPSAndmFyeWluZyBmbG9hdCB2RGVwdGg7XFxuJztcbiAgICAgICAgICAgIGZzaGFkZXIgKz0gc2hhZGVyQ2h1bmtzLnBhY2tEZXB0aFBTO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRlJBR01FTlQgU0hBREVSIEJPRFlcbiAgICAgICAgZnNoYWRlciArPSBTaGFkZXJHZW5lcmF0b3IuYmVnaW4oKTtcblxuICAgICAgICAvLyBSZWFkIHRoZSBtYXAgdGV4ZWxzIHRoYXQgdGhlIHNoYWRlciBuZWVkc1xuICAgICAgICBpZiAob3B0aW9ucy52ZXJ0ZXhDb2xvcnMpIHtcbiAgICAgICAgICAgIGZzaGFkZXIgKz0gJyAgICBnbF9GcmFnQ29sb3IgPSB2Q29sb3I7XFxuJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZzaGFkZXIgKz0gJyAgICBnbF9GcmFnQ29sb3IgPSB1Q29sb3I7XFxuJztcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5kaWZmdXNlTWFwKSB7XG4gICAgICAgICAgICBmc2hhZGVyICs9ICcgICAgZ2xfRnJhZ0NvbG9yICo9IHRleHR1cmUyRCh0ZXh0dXJlX2RpZmZ1c2VNYXAsIHZVdjApO1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5hbHBoYVRlc3QpIHtcbiAgICAgICAgICAgIGZzaGFkZXIgKz0gXCIgICBhbHBoYVRlc3QoZ2xfRnJhZ0NvbG9yLmEpO1xcblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMucGFzcyAhPT0gU0hBREVSX1BJQ0spIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBhc3MgPT09IFNIQURFUl9ERVBUSCkge1xuICAgICAgICAgICAgICAgIC8vICMjIyMjIFNDUkVFTiBERVBUSCBQQVNTICMjIyMjXG4gICAgICAgICAgICAgICAgZnNoYWRlciArPSBcIiAgICBnbF9GcmFnQ29sb3IgPSBwYWNrRmxvYXQodkRlcHRoKTtcXG5cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gIyMjIyMgRk9SV0FSRCBQQVNTICMjIyMjXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZm9nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZzaGFkZXIgKz0gXCIgICBnbEZyYWdDb2xvci5yZ2IgPSBhZGRGb2coZ2xfRnJhZ0NvbG9yLnJnYik7XFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnNoYWRlciArPSBTaGFkZXJHZW5lcmF0b3IuZW5kKCk7XG5cbiAgICAgICAgcmV0dXJuIFNoYWRlclV0aWxzLmNyZWF0ZURlZmluaXRpb24oZGV2aWNlLCB7XG4gICAgICAgICAgICBuYW1lOiAnQmFzaWNTaGFkZXInLFxuICAgICAgICAgICAgYXR0cmlidXRlczogYXR0cmlidXRlcyxcbiAgICAgICAgICAgIHZlcnRleENvZGU6IHZzaGFkZXIsXG4gICAgICAgICAgICBmcmFnbWVudENvZGU6IGZzaGFkZXJcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5jb25zdCBiYXNpYyA9IG5ldyBTaGFkZXJHZW5lcmF0b3JCYXNpYygpO1xuXG5leHBvcnQgeyBiYXNpYyB9O1xuIl0sIm5hbWVzIjpbIlNoYWRlckdlbmVyYXRvckJhc2ljIiwiU2hhZGVyR2VuZXJhdG9yIiwiZ2VuZXJhdGVLZXkiLCJvcHRpb25zIiwia2V5IiwiZm9nIiwiYWxwaGFUZXN0IiwidmVydGV4Q29sb3JzIiwiZGlmZnVzZU1hcCIsInNraW4iLCJzY3JlZW5TcGFjZSIsInVzZUluc3RhbmNpbmciLCJ1c2VNb3JwaFBvc2l0aW9uIiwidXNlTW9ycGhOb3JtYWwiLCJ1c2VNb3JwaFRleHR1cmVCYXNlZCIsInBhc3MiLCJjcmVhdGVTaGFkZXJEZWZpbml0aW9uIiwiZGV2aWNlIiwiYXR0cmlidXRlcyIsInZlcnRleF9wb3NpdGlvbiIsIlNFTUFOVElDX1BPU0lUSU9OIiwidmVydGV4X2JvbmVXZWlnaHRzIiwiU0VNQU5USUNfQkxFTkRXRUlHSFQiLCJ2ZXJ0ZXhfYm9uZUluZGljZXMiLCJTRU1BTlRJQ19CTEVORElORElDRVMiLCJ2ZXJ0ZXhfY29sb3IiLCJTRU1BTlRJQ19DT0xPUiIsInZlcnRleF90ZXhDb29yZDAiLCJTRU1BTlRJQ19URVhDT09SRDAiLCJzaGFkZXJQYXNzSW5mbyIsIlNoYWRlclBhc3MiLCJnZXQiLCJnZXRCeUluZGV4Iiwic2hhZGVyUGFzc0RlZmluZXMiLCJzaGFkZXJEZWZpbmVzIiwidnNoYWRlciIsInNoYWRlckNodW5rcyIsInRyYW5zZm9ybURlY2xWUyIsInNraW5Db2RlIiwidHJhbnNmb3JtU2tpbm5lZFZTIiwidHJhbnNmb3JtVlMiLCJTSEFERVJfREVQVEgiLCJiZWdpbiIsImVuZCIsImZzaGFkZXIiLCJmb2dDb2RlIiwiYWxwaGFUZXN0UFMiLCJwYWNrRGVwdGhQUyIsIlNIQURFUl9QSUNLIiwiU2hhZGVyVXRpbHMiLCJjcmVhdGVEZWZpbml0aW9uIiwibmFtZSIsInZlcnRleENvZGUiLCJmcmFnbWVudENvZGUiLCJiYXNpYyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQWFBLE1BQU1BLG9CQUFvQixTQUFTQyxlQUFlLENBQUM7RUFDL0NDLFdBQVdBLENBQUNDLE9BQU8sRUFBRTtJQUNqQixJQUFJQyxHQUFHLEdBQUcsT0FBTyxDQUFBO0FBQ2pCLElBQUEsSUFBSUQsT0FBTyxDQUFDRSxHQUFHLEVBQXFCRCxHQUFHLElBQUksTUFBTSxDQUFBO0FBQ2pELElBQUEsSUFBSUQsT0FBTyxDQUFDRyxTQUFTLEVBQWVGLEdBQUcsSUFBSSxPQUFPLENBQUE7QUFDbEQsSUFBQSxJQUFJRCxPQUFPLENBQUNJLFlBQVksRUFBWUgsR0FBRyxJQUFJLE9BQU8sQ0FBQTtB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
