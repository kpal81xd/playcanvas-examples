import { EventHandler } from '../core/event-handler.js';
import { Vec2 } from '../core/math/vec2.js';
import { SPRITE_RENDERMODE_SIMPLE, SPRITE_RENDERMODE_SLICED, SPRITE_RENDERMODE_TILED } from './constants.js';
import { createMesh } from './procedural.js';

// normals are the same for every mesh
const spriteNormals = [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1];

// indices are the same for every mesh
const spriteIndices = [0, 1, 3, 2, 3, 1];

/**
 * A Sprite contains references to one or more frames of a {@link TextureAtlas}. It can be used by
 * the {@link SpriteComponent} or the {@link ElementComponent} to render a single frame or a sprite
 * animation.
 *
 * @augments EventHandler
 * @category Graphics
 */
class Sprite extends EventHandler {
  /**
   * Create a new Sprite instance.
   *
   * @param {import('../platform/graphics/graphics-device.js').GraphicsDevice} device - The
   * graphics device of the application.
   * @param {object} [options] - Options for creating the Sprite.
   * @param {number} [options.pixelsPerUnit] - The number of pixels that map to one PlayCanvas
   * unit. Defaults to 1.
   * @param {number} [options.renderMode] - The rendering mode of the sprite. Can be:
   *
   * - {@link SPRITE_RENDERMODE_SIMPLE}
   * - {@link SPRITE_RENDERMODE_SLICED}
   * - {@link SPRITE_RENDERMODE_TILED}
   *
   * Defaults to {@link SPRITE_RENDERMODE_SIMPLE}.
   * @param {import('./texture-atlas.js').TextureAtlas} [options.atlas] - The texture atlas.
   * Defaults to null.
   * @param {string[]} [options.frameKeys] - The keys of the frames in the sprite atlas that this
   * sprite is using. Defaults to null.
   */
  constructor(device, options) {
    super();
    this._device = device;
    this._pixelsPerUnit = options && options.pixelsPerUnit !== undefined ? options.pixelsPerUnit : 1;
    this._renderMode = options && options.renderMode !== undefined ? options.renderMode : SPRITE_RENDERMODE_SIMPLE;
    this._atlas = options && options.atlas !== undefined ? options.atlas : null;
    this._frameKeys = options && options.frameKeys !== undefined ? options.frameKeys : null;
    this._meshes = [];

    // set to true to update multiple
    // properties without re-creating meshes
    this._updatingProperties = false;
    // if true, endUpdate() will re-create meshes when it's called
    this._meshesDirty = false;
    if (this._atlas && this._frameKeys) {
      this._createMeshes();
    }
  }

  /**
   * The keys of the frames in the sprite atlas that this sprite is using.
   *
   * @type {string[]}
   */
  set frameKeys(value) {
    this._frameKeys = value;
    if (this._atlas && this._frameKeys) {
      if (this._updatingProperties) {
        this._meshesDirty = true;
      } else {
        this._createMeshes();
      }
    }
    this.fire('set:frameKeys', value);
  }
  get frameKeys() {
    return this._frameKeys;
  }

  /**
   * The texture atlas.
   *
   * @type {import('./texture-atlas.js').TextureAtlas}
   */
  set atlas(value) {
    if (value === this._atlas) return;
    if (this._atlas) {
      this._atlas.off('set:frames', this._onSetFrames, this);
      this._atlas.off('set:frame', this._onFrameChanged, this);
      this._atlas.off('remove:frame', this._onFrameRemoved, this);
    }
    this._atlas = value;
    if (this._atlas && this._frameKeys) {
      this._atlas.on('set:frames', this._onSetFrames, this);
      this._atlas.on('set:frame', this._onFrameChanged, this);
      this._atlas.on('remove:frame', this._onFrameRemoved, this);
      if (this._updatingProperties) {
        this._meshesDirty = true;
      } else {
        this._createMeshes();
      }
    }
    this.fire('set:atlas', value);
  }
  get atlas() {
    return this._atlas;
  }

  /**
   * The number of pixels that map to one PlayCanvas unit.
   *
   * @type {number}
   */
  set pixelsPerUnit(value) {
    if (this._pixelsPerUnit === value) return;
    this._pixelsPerUnit = value;
    this.fire('set:pixelsPerUnit', value);

    // simple mode uses pixelsPerUnit to create the mesh so re-create those meshes
    if (this._atlas && this._frameKeys && this.renderMode === SPRITE_RENDERMODE_SIMPLE) {
      if (this._updatingProperties) {
        this._meshesDirty = true;
      } else {
        this._createMeshes();
      }
    }
  }
  get pixelsPerUnit() {
    return this._pixelsPerUnit;
  }

  /**
   * The rendering mode of the sprite. Can be:
   *
   * - {@link SPRITE_RENDERMODE_SIMPLE}
   * - {@link SPRITE_RENDERMODE_SLICED}
   * - {@link SPRITE_RENDERMODE_TILED}
   *
   * @type {number}
   */
  set renderMode(value) {
    if (this._renderMode === value) return;
    const prev = this._renderMode;
    this._renderMode = value;
    this.fire('set:renderMode', value);

    // re-create the meshes if we're going from simple to 9-sliced or vice versa
    if (prev === SPRITE_RENDERMODE_SIMPLE || value === SPRITE_RENDERMODE_SIMPLE) {
      if (this._atlas && this._frameKeys) {
        if (this._updatingProperties) {
          this._meshesDirty = true;
        } else {
          this._createMeshes();
        }
      }
    }
  }
  get renderMode() {
    return this._renderMode;
  }

  /**
   * An array that contains a mesh for each frame.
   *
   * @type {import('./mesh.js').Mesh[]}
   */
  get meshes() {
    return this._meshes;
  }
  _createMeshes() {
    // destroy old meshes
    const len = this._meshes.length;
    for (let i = 0; i < len; i++) {
      const mesh = this._meshes[i];
      if (mesh) {
        mesh.destroy();
      }
    }

    // clear meshes array
    const count = this._frameKeys.length;
    this._meshes = new Array(count);

    // get function to create meshes
    const createMeshFunc = this.renderMode === SPRITE_RENDERMODE_SLICED || this._renderMode === SPRITE_RENDERMODE_TILED ? this._create9SliceMesh : this._createSimpleMesh;

    // create a mesh for each frame in the sprite
    for (let i = 0; i < count; i++) {
      const frame = this._atlas.frames[this._frameKeys[i]];
      this._meshes[i] = frame ? createMeshFunc.call(this, frame) : null;
    }
    this.fire('set:meshes');
  }
  _createSimpleMesh(frame) {
    const rect = frame.rect;
    const texWidth = this._atlas.texture.width;
    const texHeight = this._atlas.texture.height;
    const w = rect.z / this._pixelsPerUnit;
    const h = rect.w / this._pixelsPerUnit;
    const hp = frame.pivot.x;
    const vp = frame.pivot.y;

    // positions based on pivot and size of frame
    const positions = [-hp * w, -vp * h, 0, (1 - hp) * w, -vp * h, 0, (1 - hp) * w, (1 - vp) * h, 0, -hp * w, (1 - vp) * h, 0];

    // uvs based on frame rect
    // uvs
    const lu = rect.x / texWidth;
    const bv = 1.0 - rect.y / texHeight;
    const ru = (rect.x + rect.z) / texWidth;
    const tv = 1.0 - (rect.y + rect.w) / texHeight;
    const uvs = [lu, bv, ru, bv, ru, tv, lu, tv];
    const mesh = createMesh(this._device, positions, {
      uvs: uvs,
      normals: spriteNormals,
      indices: spriteIndices
    });
    return mesh;
  }
  _create9SliceMesh() {
    // Check the supplied options and provide defaults for unspecified ones
    const he = Vec2.ONE;
    const ws = 3;
    const ls = 3;

    // Variable declarations
    const positions = [];
    const normals = [];
    const uvs = [];
    const indices = [];

    // Generate plane as follows (assigned UVs denoted at corners):
    // (0,1)x---------x(1,1)
    //      |         |
    //      |         |
    //      |    O--X |length
    //      |    |    |
    //      |    Z    |
    // (0,0)x---------x(1,0)
    // width
    let vcounter = 0;
    for (let i = 0; i <= ws; i++) {
      const u = i === 0 || i === ws ? 0 : 1;
      for (let j = 0; j <= ls; j++) {
        const x = -he.x + 2.0 * he.x * (i <= 1 ? 0 : 3) / ws;
        const y = 0.0;
        const z = -(-he.y + 2.0 * he.y * (j <= 1 ? 0 : 3) / ls);
        const v = j === 0 || j === ls ? 0 : 1;
        positions.push(-x, y, z);
        normals.push(0.0, 1.0, 0.0);
        uvs.push(u, v);
        if (i < ws && j < ls) {
          indices.push(vcounter + ls + 1, vcounter + 1, vcounter);
          indices.push(vcounter + ls + 1, vcounter + ls + 2, vcounter + 1);
        }
        vcounter++;
      }
    }
    const options = {
      normals: normals,
      // crashes without normals on mac?
      uvs: uvs,
      indices: indices
    };
    return createMesh(this._device, positions, options);
  }
  _onSetFrames(frames) {
    if (this._updatingProperties) {
      this._meshesDirty = true;
    } else {
      this._createMeshes();
    }
  }
  _onFrameChanged(frameKey, frame) {
    const idx = this._frameKeys.indexOf(frameKey);
    if (idx < 0) return;
    if (frame) {
      // only re-create frame for simple render mode, since
      // 9-sliced meshes don't need frame info to create their mesh
      if (this.renderMode === SPRITE_RENDERMODE_SIMPLE) {
        this._meshes[idx] = this._createSimpleMesh(frame);
      }
    } else {
      this._meshes[idx] = null;
    }
    this.fire('set:meshes');
  }
  _onFrameRemoved(frameKey) {
    const idx = this._frameKeys.indexOf(frameKey);
    if (idx < 0) return;
    this._meshes[idx] = null;
    this.fire('set:meshes');
  }
  startUpdate() {
    this._updatingProperties = true;
    this._meshesDirty = false;
  }
  endUpdate() {
    this._updatingProperties = false;
    if (this._meshesDirty && this._atlas && this._frameKeys) {
      this._createMeshes();
    }
    this._meshesDirty = false;
  }

  /**
   * Free up the meshes created by the sprite.
   */
  destroy() {
    for (const mesh of this._meshes) {
      if (mesh) mesh.destroy();
    }
    this._meshes.length = 0;
  }
}

export { Sprite };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3ByaXRlLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvc2NlbmUvc3ByaXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50SGFuZGxlciB9IGZyb20gJy4uL2NvcmUvZXZlbnQtaGFuZGxlci5qcyc7XG5pbXBvcnQgeyBWZWMyIH0gZnJvbSAnLi4vY29yZS9tYXRoL3ZlYzIuanMnO1xuXG5pbXBvcnQgeyBTUFJJVEVfUkVOREVSTU9ERV9TSU1QTEUsIFNQUklURV9SRU5ERVJNT0RFX1NMSUNFRCwgU1BSSVRFX1JFTkRFUk1PREVfVElMRUQgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVNZXNoIH0gZnJvbSAnLi9wcm9jZWR1cmFsLmpzJztcblxuLy8gbm9ybWFscyBhcmUgdGhlIHNhbWUgZm9yIGV2ZXJ5IG1lc2hcbmNvbnN0IHNwcml0ZU5vcm1hbHMgPSBbXG4gICAgMCwgMCwgMSxcbiAgICAwLCAwLCAxLFxuICAgIDAsIDAsIDEsXG4gICAgMCwgMCwgMVxuXTtcblxuLy8gaW5kaWNlcyBhcmUgdGhlIHNhbWUgZm9yIGV2ZXJ5IG1lc2hcbmNvbnN0IHNwcml0ZUluZGljZXMgPSBbXG4gICAgMCwgMSwgMyxcbiAgICAyLCAzLCAxXG5dO1xuXG4vKipcbiAqIEEgU3ByaXRlIGNvbnRhaW5zIHJlZmVyZW5jZXMgdG8gb25lIG9yIG1vcmUgZnJhbWVzIG9mIGEge0BsaW5rIFRleHR1cmVBdGxhc30uIEl0IGNhbiBiZSB1c2VkIGJ5XG4gKiB0aGUge0BsaW5rIFNwcml0ZUNvbXBvbmVudH0gb3IgdGhlIHtAbGluayBFbGVtZW50Q29tcG9uZW50fSB0byByZW5kZXIgYSBzaW5nbGUgZnJhbWUgb3IgYSBzcHJpdGVcbiAqIGFuaW1hdGlvbi5cbiAqXG4gKiBAYXVnbWVudHMgRXZlbnRIYW5kbGVyXG4gKiBAY2F0ZWdvcnkgR3JhcGhpY3NcbiAqL1xuY2xhc3MgU3ByaXRlIGV4dGVuZHMgRXZlbnRIYW5kbGVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgU3ByaXRlIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL3BsYXRmb3JtL2dyYXBoaWNzL2dyYXBoaWNzLWRldmljZS5qcycpLkdyYXBoaWNzRGV2aWNlfSBkZXZpY2UgLSBUaGVcbiAgICAgKiBncmFwaGljcyBkZXZpY2Ugb2YgdGhlIGFwcGxpY2F0aW9uLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25zIGZvciBjcmVhdGluZyB0aGUgU3ByaXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5waXhlbHNQZXJVbml0XSAtIFRoZSBudW1iZXIgb2YgcGl4ZWxzIHRoYXQgbWFwIHRvIG9uZSBQbGF5Q2FudmFzXG4gICAgICogdW5pdC4gRGVmYXVsdHMgdG8gMS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucmVuZGVyTW9kZV0gLSBUaGUgcmVuZGVyaW5nIG1vZGUgb2YgdGhlIHNwcml0ZS4gQ2FuIGJlOlxuICAgICAqXG4gICAgICogLSB7QGxpbmsgU1BSSVRFX1JFTkRFUk1PREVfU0lNUExFfVxuICAgICAqIC0ge0BsaW5rIFNQUklURV9SRU5ERVJNT0RFX1NMSUNFRH1cbiAgICAgKiAtIHtAbGluayBTUFJJVEVfUkVOREVSTU9ERV9USUxFRH1cbiAgICAgKlxuICAgICAqIERlZmF1bHRzIHRvIHtAbGluayBTUFJJVEVfUkVOREVSTU9ERV9TSU1QTEV9LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuL3RleHR1cmUtYXRsYXMuanMnKS5UZXh0dXJlQXRsYXN9IFtvcHRpb25zLmF0bGFzXSAtIFRoZSB0ZXh0dXJlIGF0bGFzLlxuICAgICAqIERlZmF1bHRzIHRvIG51bGwuXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gW29wdGlvbnMuZnJhbWVLZXlzXSAtIFRoZSBrZXlzIG9mIHRoZSBmcmFtZXMgaW4gdGhlIHNwcml0ZSBhdGxhcyB0aGF0IHRoaXNcbiAgICAgKiBzcHJpdGUgaXMgdXNpbmcuIERlZmF1bHRzIHRvIG51bGwuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5fZGV2aWNlID0gZGV2aWNlO1xuICAgICAgICB0aGlzLl9waXhlbHNQZXJVbml0ID0gb3B0aW9ucyAmJiBvcHRpb25zLnBpeGVsc1BlclVuaXQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucGl4ZWxzUGVyVW5pdCA6IDE7XG4gICAgICAgIHRoaXMuX3JlbmRlck1vZGUgPSBvcHRpb25zICYmIG9wdGlvbnMucmVuZGVyTW9kZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yZW5kZXJNb2RlIDogU1BSSVRFX1JFTkRFUk1PREVfU0lNUExFO1xuICAgICAgICB0aGlzLl9hdGxhcyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5hdGxhcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hdGxhcyA6IG51bGw7XG4gICAgICAgIHRoaXMuX2ZyYW1lS2V5cyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5mcmFtZUtleXMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZnJhbWVLZXlzIDogbnVsbDtcbiAgICAgICAgdGhpcy5fbWVzaGVzID0gW107XG5cbiAgICAgICAgLy8gc2V0IHRvIHRydWUgdG8gdXBkYXRlIG11bHRpcGxlXG4gICAgICAgIC8vIHByb3BlcnRpZXMgd2l0aG91dCByZS1jcmVhdGluZyBtZXNoZXNcbiAgICAgICAgdGhpcy5fdXBkYXRpbmdQcm9wZXJ0aWVzID0gZmFsc2U7XG4gICAgICAgIC8vIGlmIHRydWUsIGVuZFVwZGF0ZSgpIHdpbGwgcmUtY3JlYXRlIG1lc2hlcyB3aGVuIGl0J3MgY2FsbGVkXG4gICAgICAgIHRoaXMuX21lc2hlc0RpcnR5ID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHRoaXMuX2F0bGFzICYmIHRoaXMuX2ZyYW1lS2V5cykge1xuICAgICAgICAgICAgdGhpcy5fY3JlYXRlTWVzaGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUga2V5cyBvZiB0aGUgZnJhbWVzIGluIHRoZSBzcHJpdGUgYXRsYXMgdGhhdCB0aGlzIHNwcml0ZSBpcyB1c2luZy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmdbXX1cbiAgICAgKi9cbiAgICBzZXQgZnJhbWVLZXlzKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2ZyYW1lS2V5cyA9IHZhbHVlO1xuXG4gICAgICAgIGlmICh0aGlzLl9hdGxhcyAmJiB0aGlzLl9mcmFtZUtleXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl91cGRhdGluZ1Byb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9tZXNoZXNEaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NyZWF0ZU1lc2hlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5maXJlKCdzZXQ6ZnJhbWVLZXlzJywgdmFsdWUpO1xuICAgIH1cblxuICAgIGdldCBmcmFtZUtleXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mcmFtZUtleXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHRleHR1cmUgYXRsYXMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7aW1wb3J0KCcuL3RleHR1cmUtYXRsYXMuanMnKS5UZXh0dXJlQXRsYXN9XG4gICAgICovXG4gICAgc2V0IGF0bGFzKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5fYXRsYXMpIHJldHVybjtcblxuICAgICAgICBpZiAodGhpcy5fYXRsYXMpIHtcbiAgICAgICAgICAgIHRoaXMuX2F0bGFzLm9mZignc2V0OmZyYW1lcycsIHRoaXMuX29uU2V0RnJhbWVzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuX2F0bGFzLm9mZignc2V0OmZyYW1lJywgdGhpcy5fb25GcmFtZUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5fYXRsYXMub2ZmKCdyZW1vdmU6ZnJhbWUnLCB0aGlzLl9vbkZyYW1lUmVtb3ZlZCwgdGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9hdGxhcyA9IHZhbHVlO1xuICAgICAgICBpZiAodGhpcy5fYXRsYXMgJiYgdGhpcy5fZnJhbWVLZXlzKSB7XG4gICAgICAgICAgICB0aGlzLl9hdGxhcy5vbignc2V0OmZyYW1lcycsIHRoaXMuX29uU2V0RnJhbWVzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuX2F0bGFzLm9uKCdzZXQ6ZnJhbWUnLCB0aGlzLl9vbkZyYW1lQ2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLl9hdGxhcy5vbigncmVtb3ZlOmZyYW1lJywgdGhpcy5fb25GcmFtZVJlbW92ZWQsIHRoaXMpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5fdXBkYXRpbmdQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWVzaGVzRGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jcmVhdGVNZXNoZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZmlyZSgnc2V0OmF0bGFzJywgdmFsdWUpO1xuICAgIH1cblxuICAgIGdldCBhdGxhcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F0bGFzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgcGl4ZWxzIHRoYXQgbWFwIHRvIG9uZSBQbGF5Q2FudmFzIHVuaXQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNldCBwaXhlbHNQZXJVbml0KHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLl9waXhlbHNQZXJVbml0ID09PSB2YWx1ZSkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuX3BpeGVsc1BlclVuaXQgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5maXJlKCdzZXQ6cGl4ZWxzUGVyVW5pdCcsIHZhbHVlKTtcblxuICAgICAgICAvLyBzaW1wbGUgbW9kZSB1c2VzIHBpeGVsc1BlclVuaXQgdG8gY3JlYXRlIHRoZSBtZXNoIHNvIHJlLWNyZWF0ZSB0aG9zZSBtZXNoZXNcbiAgICAgICAgaWYgKHRoaXMuX2F0bGFzICYmIHRoaXMuX2ZyYW1lS2V5cyAmJiB0aGlzLnJlbmRlck1vZGUgPT09IFNQUklURV9SRU5ERVJNT0RFX1NJTVBMRSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3VwZGF0aW5nUHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHRoaXMuX21lc2hlc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3JlYXRlTWVzaGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgcGl4ZWxzUGVyVW5pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BpeGVsc1BlclVuaXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHJlbmRlcmluZyBtb2RlIG9mIHRoZSBzcHJpdGUuIENhbiBiZTpcbiAgICAgKlxuICAgICAqIC0ge0BsaW5rIFNQUklURV9SRU5ERVJNT0RFX1NJTVBMRX1cbiAgICAgKiAtIHtAbGluayBTUFJJVEVfUkVOREVSTU9ERV9TTElDRUR9XG4gICAgICogLSB7QGxpbmsgU1BSSVRFX1JFTkRFUk1PREVfVElMRUR9XG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNldCByZW5kZXJNb2RlKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZW5kZXJNb2RlID09PSB2YWx1ZSlcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICBjb25zdCBwcmV2ID0gdGhpcy5fcmVuZGVyTW9kZTtcbiAgICAgICAgdGhpcy5fcmVuZGVyTW9kZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmZpcmUoJ3NldDpyZW5kZXJNb2RlJywgdmFsdWUpO1xuXG4gICAgICAgIC8vIHJlLWNyZWF0ZSB0aGUgbWVzaGVzIGlmIHdlJ3JlIGdvaW5nIGZyb20gc2ltcGxlIHRvIDktc2xpY2VkIG9yIHZpY2UgdmVyc2FcbiAgICAgICAgaWYgKHByZXYgPT09IFNQUklURV9SRU5ERVJNT0RFX1NJTVBMRSB8fCB2YWx1ZSA9PT0gU1BSSVRFX1JFTkRFUk1PREVfU0lNUExFKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fYXRsYXMgJiYgdGhpcy5fZnJhbWVLZXlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3VwZGF0aW5nUHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZXNoZXNEaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY3JlYXRlTWVzaGVzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHJlbmRlck1vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJNb2RlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFuIGFycmF5IHRoYXQgY29udGFpbnMgYSBtZXNoIGZvciBlYWNoIGZyYW1lLlxuICAgICAqXG4gICAgICogQHR5cGUge2ltcG9ydCgnLi9tZXNoLmpzJykuTWVzaFtdfVxuICAgICAqL1xuICAgIGdldCBtZXNoZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tZXNoZXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZU1lc2hlcygpIHtcbiAgICAgICAgLy8gZGVzdHJveSBvbGQgbWVzaGVzXG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMuX21lc2hlcy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLl9tZXNoZXNbaV07XG4gICAgICAgICAgICBpZiAobWVzaCkge1xuICAgICAgICAgICAgICAgIG1lc2guZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2xlYXIgbWVzaGVzIGFycmF5XG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5fZnJhbWVLZXlzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5fbWVzaGVzID0gbmV3IEFycmF5KGNvdW50KTtcblxuICAgICAgICAvLyBnZXQgZnVuY3Rpb24gdG8gY3JlYXRlIG1lc2hlc1xuICAgICAgICBjb25zdCBjcmVhdGVNZXNoRnVuYyA9ICh0aGlzLnJlbmRlck1vZGUgPT09IFNQUklURV9SRU5ERVJNT0RFX1NMSUNFRCB8fCB0aGlzLl9yZW5kZXJNb2RlID09PSBTUFJJVEVfUkVOREVSTU9ERV9USUxFRCA/IHRoaXMuX2NyZWF0ZTlTbGljZU1lc2ggOiB0aGlzLl9jcmVhdGVTaW1wbGVNZXNoKTtcblxuICAgICAgICAvLyBjcmVhdGUgYSBtZXNoIGZvciBlYWNoIGZyYW1lIGluIHRoZSBzcHJpdGVcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBmcmFtZSA9IHRoaXMuX2F0bGFzLmZyYW1lc1t0aGlzLl9mcmFtZUtleXNbaV1dO1xuICAgICAgICAgICAgdGhpcy5fbWVzaGVzW2ldID0gZnJhbWUgPyBjcmVhdGVNZXNoRnVuYy5jYWxsKHRoaXMsIGZyYW1lKSA6IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmZpcmUoJ3NldDptZXNoZXMnKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlU2ltcGxlTWVzaChmcmFtZSkge1xuICAgICAgICBjb25zdCByZWN0ID0gZnJhbWUucmVjdDtcbiAgICAgICAgY29uc3QgdGV4V2lkdGggPSB0aGlzLl9hdGxhcy50ZXh0dXJlLndpZHRoO1xuICAgICAgICBjb25zdCB0ZXhIZWlnaHQgPSB0aGlzLl9hdGxhcy50ZXh0dXJlLmhlaWdodDtcblxuICAgICAgICBjb25zdCB3ID0gcmVjdC56IC8gdGhpcy5fcGl4ZWxzUGVyVW5pdDtcbiAgICAgICAgY29uc3QgaCA9IHJlY3QudyAvIHRoaXMuX3BpeGVsc1BlclVuaXQ7XG4gICAgICAgIGNvbnN0IGhwID0gZnJhbWUucGl2b3QueDtcbiAgICAgICAgY29uc3QgdnAgPSBmcmFtZS5waXZvdC55O1xuXG4gICAgICAgIC8vIHBvc2l0aW9ucyBiYXNlZCBvbiBwaXZvdCBhbmQgc2l6ZSBvZiBmcmFtZVxuICAgICAgICBjb25zdCBwb3NpdGlvbnMgPSBbXG4gICAgICAgICAgICAtaHAgKiB3LCAgICAgIC12cCAqIGgsICAgICAgMCxcbiAgICAgICAgICAgICgxIC0gaHApICogdywgLXZwICogaCwgICAgICAwLFxuICAgICAgICAgICAgKDEgLSBocCkgKiB3LCAoMSAtIHZwKSAqIGgsIDAsXG4gICAgICAgICAgICAtaHAgKiB3LCAgICAgICgxIC0gdnApICogaCwgMFxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIHV2cyBiYXNlZCBvbiBmcmFtZSByZWN0XG4gICAgICAgIC8vIHV2c1xuICAgICAgICBjb25zdCBsdSA9IHJlY3QueCAvIHRleFdpZHRoO1xuICAgICAgICBjb25zdCBidiA9IDEuMCAtIHJlY3QueSAvIHRleEhlaWdodDtcbiAgICAgICAgY29uc3QgcnUgPSAocmVjdC54ICsgcmVjdC56KSAvIHRleFdpZHRoO1xuICAgICAgICBjb25zdCB0diA9IDEuMCAtIChyZWN0LnkgKyByZWN0LncpIC8gdGV4SGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IHV2cyA9IFtcbiAgICAgICAgICAgIGx1LCBidixcbiAgICAgICAgICAgIHJ1LCBidixcbiAgICAgICAgICAgIHJ1LCB0dixcbiAgICAgICAgICAgIGx1LCB0dlxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IG1lc2ggPSBjcmVhdGVNZXNoKHRoaXMuX2RldmljZSwgcG9zaXRpb25zLCB7XG4gICAgICAgICAgICB1dnM6IHV2cyxcbiAgICAgICAgICAgIG5vcm1hbHM6IHNwcml0ZU5vcm1hbHMsXG4gICAgICAgICAgICBpbmRpY2VzOiBzcHJpdGVJbmRpY2VzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBtZXNoO1xuICAgIH1cblxuICAgIF9jcmVhdGU5U2xpY2VNZXNoKCkge1xuICAgICAgICAvLyBDaGVjayB0aGUgc3VwcGxpZWQgb3B0aW9ucyBhbmQgcHJvdmlkZSBkZWZhdWx0cyBmb3IgdW5zcGVjaWZpZWQgb25lc1xuICAgICAgICBjb25zdCBoZSA9IFZlYzIuT05FO1xuICAgICAgICBjb25zdCB3cyA9IDM7XG4gICAgICAgIGNvbnN0IGxzID0gMztcblxuICAgICAgICAvLyBWYXJpYWJsZSBkZWNsYXJhdGlvbnNcbiAgICAgICAgY29uc3QgcG9zaXRpb25zID0gW107XG4gICAgICAgIGNvbnN0IG5vcm1hbHMgPSBbXTtcbiAgICAgICAgY29uc3QgdXZzID0gW107XG4gICAgICAgIGNvbnN0IGluZGljZXMgPSBbXTtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBwbGFuZSBhcyBmb2xsb3dzIChhc3NpZ25lZCBVVnMgZGVub3RlZCBhdCBjb3JuZXJzKTpcbiAgICAgICAgLy8gKDAsMSl4LS0tLS0tLS0teCgxLDEpXG4gICAgICAgIC8vICAgICAgfCAgICAgICAgIHxcbiAgICAgICAgLy8gICAgICB8ICAgICAgICAgfFxuICAgICAgICAvLyAgICAgIHwgICAgTy0tWCB8bGVuZ3RoXG4gICAgICAgIC8vICAgICAgfCAgICB8ICAgIHxcbiAgICAgICAgLy8gICAgICB8ICAgIFogICAgfFxuICAgICAgICAvLyAoMCwwKXgtLS0tLS0tLS14KDEsMClcbiAgICAgICAgLy8gd2lkdGhcbiAgICAgICAgbGV0IHZjb3VudGVyID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gd3M7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgdSA9IChpID09PSAwIHx8IGkgPT09IHdzKSA/IDAgOiAxO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSBsczsgaisrKSB7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB4ID0gLWhlLnggKyAyLjAgKiBoZS54ICogKGkgPD0gMSA/IDAgOiAzKSAvIHdzO1xuICAgICAgICAgICAgICAgIGNvbnN0IHkgPSAwLjA7XG4gICAgICAgICAgICAgICAgY29uc3QgeiA9IC0oLWhlLnkgKyAyLjAgKiBoZS55ICogKGogPD0gMSA/IDAgOiAzKSAvIGxzKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSAoaiA9PT0gMCB8fCBqID09PSBscykgPyAwIDogMTtcblxuICAgICAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKC14LCB5LCB6KTtcbiAgICAgICAgICAgICAgICBub3JtYWxzLnB1c2goMC4wLCAxLjAsIDAuMCk7XG4gICAgICAgICAgICAgICAgdXZzLnB1c2godSwgdik7XG5cbiAgICAgICAgICAgICAgICBpZiAoKGkgPCB3cykgJiYgKGogPCBscykpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kaWNlcy5wdXNoKHZjb3VudGVyICsgbHMgKyAxLCB2Y291bnRlciArIDEsIHZjb3VudGVyKTtcbiAgICAgICAgICAgICAgICAgICAgaW5kaWNlcy5wdXNoKHZjb3VudGVyICsgbHMgKyAxLCB2Y291bnRlciArIGxzICsgMiwgdmNvdW50ZXIgKyAxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2Y291bnRlcisrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG5vcm1hbHM6IG5vcm1hbHMsIC8vIGNyYXNoZXMgd2l0aG91dCBub3JtYWxzIG9uIG1hYz9cbiAgICAgICAgICAgIHV2czogdXZzLFxuICAgICAgICAgICAgaW5kaWNlczogaW5kaWNlc1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBjcmVhdGVNZXNoKHRoaXMuX2RldmljZSwgcG9zaXRpb25zLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBfb25TZXRGcmFtZXMoZnJhbWVzKSB7XG4gICAgICAgIGlmICh0aGlzLl91cGRhdGluZ1Byb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuX21lc2hlc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZU1lc2hlcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX29uRnJhbWVDaGFuZ2VkKGZyYW1lS2V5LCBmcmFtZSkge1xuICAgICAgICBjb25zdCBpZHggPSB0aGlzLl9mcmFtZUtleXMuaW5kZXhPZihmcmFtZUtleSk7XG4gICAgICAgIGlmIChpZHggPCAwKSByZXR1cm47XG5cbiAgICAgICAgaWYgKGZyYW1lKSB7XG4gICAgICAgICAgICAvLyBvbmx5IHJlLWNyZWF0ZSBmcmFtZSBmb3Igc2ltcGxlIHJlbmRlciBtb2RlLCBzaW5jZVxuICAgICAgICAgICAgLy8gOS1zbGljZWQgbWVzaGVzIGRvbid0IG5lZWQgZnJhbWUgaW5mbyB0byBjcmVhdGUgdGhlaXIgbWVzaFxuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyTW9kZSA9PT0gU1BSSVRFX1JFTkRFUk1PREVfU0lNUExFKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWVzaGVzW2lkeF0gPSB0aGlzLl9jcmVhdGVTaW1wbGVNZXNoKGZyYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX21lc2hlc1tpZHhdID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZmlyZSgnc2V0Om1lc2hlcycpO1xuICAgIH1cblxuICAgIF9vbkZyYW1lUmVtb3ZlZChmcmFtZUtleSkge1xuICAgICAgICBjb25zdCBpZHggPSB0aGlzLl9mcmFtZUtleXMuaW5kZXhPZihmcmFtZUtleSk7XG4gICAgICAgIGlmIChpZHggPCAwKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5fbWVzaGVzW2lkeF0gPSBudWxsO1xuICAgICAgICB0aGlzLmZpcmUoJ3NldDptZXNoZXMnKTtcbiAgICB9XG5cbiAgICBzdGFydFVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRpbmdQcm9wZXJ0aWVzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbWVzaGVzRGlydHkgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBlbmRVcGRhdGUoKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0aW5nUHJvcGVydGllcyA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5fbWVzaGVzRGlydHkgJiYgdGhpcy5fYXRsYXMgJiYgdGhpcy5fZnJhbWVLZXlzKSB7XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVNZXNoZXMoKTtcblxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21lc2hlc0RpcnR5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnJlZSB1cCB0aGUgbWVzaGVzIGNyZWF0ZWQgYnkgdGhlIHNwcml0ZS5cbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBmb3IgKGNvbnN0IG1lc2ggb2YgdGhpcy5fbWVzaGVzKSB7XG4gICAgICAgICAgICBpZiAobWVzaClcbiAgICAgICAgICAgICAgICBtZXNoLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tZXNoZXMubGVuZ3RoID0gMDtcbiAgICB9XG59XG5cbmV4cG9ydCB7IFNwcml0ZSB9O1xuIl0sIm5hbWVzIjpbInNwcml0ZU5vcm1hbHMiLCJzcHJpdGVJbmRpY2VzIiwiU3ByaXRlIiwiRXZlbnRIYW5kbGVyIiwiY29uc3RydWN0b3IiLCJkZXZpY2UiLCJvcHRpb25zIiwiX2RldmljZSIsIl9waXhlbHNQZXJVbml0IiwicGl4ZWxzUGVyVW5pdCIsInVuZGVmaW5lZCIsIl9yZW5kZXJNb2RlIiwicmVuZGVyTW9kZSIsIlNQUklURV9SRU5ERVJNT0RFX1NJTVBMRSIsIl9hdGxhcyIsImF0bGFzIiwiX2ZyYW1lS2V5cyIsImZyYW1lS2V5cyIsIl9tZXNoZXMiLCJfdXBkYXRpbmdQcm9wZXJ0aWVzIiwiX21lc2hlc0RpcnR5IiwiX2NyZWF0ZU1lc2hlcyIsInZhbHVlIiwiZmlyZSIsIm9mZiIsIl9vblNldEZyYW1lcyIsIl9vbkZyYW1lQ2hhbmdlZCIsIl9vbkZyYW1lUmVtb3ZlZCIsIm9uIiwicHJldiIsIm1lc2hlcyIsImxlbiIsImxlbmd0aCIsImkiLCJtZXNoIiwiZGVzdHJveSIsImNvdW50IiwiQXJyYXkiLCJjcmVhdGVNZXNoRnVuYyIsIlNQUklURV9SRU5ERVJNT0RFX1NMSUNFRCIsIlNQUklURV9SRU5ERVJNT0RFX1RJTEVEIiwiX2NyZWF0ZTlTbGljZU1lc2giLCJfY3JlYXRlU2ltcGxlTWVzaCIsImZyYW1lIiwiZnJhbWVzIiwiY2FsbCIsInJlY3QiLCJ0ZXhXaWR0aCIsInRleHR1cmUiLCJ3aWR0aCIsInRleEhlaWdodCIsImhlaWdodCIsInciLCJ6IiwiaCIsImhwIiwicGl2b3QiLCJ4IiwidnAiLCJ5IiwicG9zaXRpb25zIiwibHUiLCJidiIsInJ1IiwidHYiLCJ1dnMiLCJjcmVhdGVNZXNoIiwibm9ybWFscyIsImluZGljZXMiLCJoZSIsIlZlYzIiLCJPTkUiLCJ3cyIsImxzIiwidmNvdW50ZXIiLCJ1IiwiaiIsInYiLCJwdXNoIiwiZnJhbWVLZXkiLCJpZHgiLCJpbmRleE9mIiwic3RhcnRVcGRhdGUiLCJlbmRVcGRhdGUiXSwibWFwcGluZ3MiOiI7Ozs7O0FBTUE7QUFDQSxNQUFNQSxhQUFhLEdBQUcsQ0FDbEIsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQ1AsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQ1AsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQ1AsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQ1YsQ0FBQTs7QUFFRDtBQUNBLE1BQU1DLGFBQWEsR0FBRyxDQUNsQixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFF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
