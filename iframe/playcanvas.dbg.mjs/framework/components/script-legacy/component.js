import { Debug } from '../../../core/debug.js';
import { path } from '../../../core/path.js';
import { Component } from '../component.js';

class ScriptLegacyComponent extends Component {
  constructor(system, entity) {
    super(system, entity);
    this.on('set_scripts', this.onSetScripts, this);
  }
  send(name, functionName) {
    Debug.deprecated('ScriptLegacyComponent.send() is deprecated and will be removed soon. Please use: https://developer.playcanvas.com/user-manual/scripting/communication/');
    const args = Array.prototype.slice.call(arguments, 2);
    const instances = this.entity.script.instances;
    let fn;
    if (instances && instances[name]) {
      fn = instances[name].instance[functionName];
      if (fn) {
        return fn.apply(instances[name].instance, args);
      }
    }
    return undefined;
  }
  onEnable() {
    // if the scripts of the component have been loaded
    // then call the appropriate methods on the component
    if (this.data.areScriptsLoaded && !this.system.preloading) {
      if (!this.data.initialized) {
        this.system._initializeScriptComponent(this);
      } else {
        this.system._enableScriptComponent(this);
      }
      if (!this.data.postInitialized) {
        this.system._postInitializeScriptComponent(this);
      }
    }
  }
  onDisable() {
    this.system._disableScriptComponent(this);
  }
  onSetScripts(name, oldValue, newValue) {
    if (!this.system._inTools || this.runInTools) {
      // if we only need to update script attributes then update them and return
      if (this._updateScriptAttributes(oldValue, newValue)) {
        return;
      }

      // disable the script first
      if (this.enabled) {
        this.system._disableScriptComponent(this);
      }
      this.system._destroyScriptComponent(this);
      this.data.areScriptsLoaded = false;

      // get the urls
      const scripts = newValue;
      const urls = scripts.map(function (s) {
        return s.url;
      });

      // try to load the scripts synchronously first
      if (this._loadFromCache(urls)) {
        return;
      }

      // not all scripts are in the cache so load them asynchronously
      this._loadScripts(urls);
    }
  }

  // Check if only script attributes need updating in which
  // case just update the attributes and return otherwise return false
  _updateScriptAttributes(oldValue, newValue) {
    let onlyUpdateAttributes = true;
    if (oldValue.length !== newValue.length) {
      onlyUpdateAttributes = false;
    } else {
      for (let i = 0, len = newValue.length; i < len; i++) {
        if (oldValue[i].url !== newValue[i].url) {
          onlyUpdateAttributes = false;
          break;
        }
      }
    }
    if (onlyUpdateAttributes) {
      for (const key in this.instances) {
        if (this.instances.hasOwnProperty(key)) {
          this.system._updateAccessors(this.entity, this.instances[key]);
        }
      }
    }
    return onlyUpdateAttributes;
  }

  // Load each url from the cache synchronously. If one of the urls is not in the cache
  // then stop and return false.
  _loadFromCache(urls) {
    const cached = [];
    const prefix = this.system.app._scriptPrefix || '';
    const regex = /^http(s)?:\/\//i;
    for (let i = 0, len = urls.length; i < len; i++) {
      let url = urls[i];
      if (!regex.test(url)) {
        url = path.join(prefix, url);
      }
      const type = this.system.app.loader.getFromCache(url, 'script');

      // if we cannot find the script in the cache then return and load
      // all scripts with the resource loader
      if (!type) {
        return false;
      }
      cached.push(type);
    }
    for (let i = 0, len = cached.length; i < len; i++) {
      const ScriptType = cached[i];

      // check if this is a regular JS file
      if (ScriptType === true) {
        continue;
      }

      // ScriptType may be null if the script component is loading an ordinary JavaScript lib rather than a PlayCanvas script
      // Make sure that script component hasn't been removed since we started loading
      if (ScriptType && this.entity.script) {
        // Make sure that we haven't already instantiated another identical script while loading
        // e.g. if you do addComponent, removeComponent, addComponent, in quick succession
        if (!this.entity.script.instances[ScriptType._pcScriptName]) {
          const instance = new ScriptType(this.entity);
          this.system._preRegisterInstance(this.entity, urls[i], ScriptType._pcScriptName, instance);
        }
      }
    }
    if (this.data) {
      this.data.areScriptsLoaded = true;
    }

    // We only need to initialize after preloading is complete
    // During preloading all scripts are initialized after everything is loaded
    if (!this.system.preloading) {
      this.system.onInitialize(this.entity);
      this.system.onPostInitialize(this.entity);
    }
    return true;
  }
  _loadScripts(urls) {
    let count = urls.length;
    const prefix = this.system.app._scriptPrefix || '';
    urls.forEach(url => {
      let _url = null;
      let _unprefixed = null;
      // support absolute URLs (for now)
      if (url.toLowerCase().startsWith('http://') || url.toLowerCase().startsWith('https://')) {
        _unprefixed = url;
        _url = url;
      } else {
        _unprefixed = url;
        _url = path.join(prefix, url);
      }
      this.system.app.loader.load(_url, 'script', (err, ScriptType) => {
        count--;
        if (!err) {
          // ScriptType is null if the script is not a PlayCanvas script
          if (ScriptType && this.entity.script) {
            if (!this.entity.script.instances[ScriptType._pcScriptName]) {
              const instance = new ScriptType(this.entity);
              this.system._preRegisterInstance(this.entity, _unprefixed, ScriptType._pcScriptName, instance);
            }
          }
        } else {
          console.error(err);
        }
        if (count === 0) {
          this.data.areScriptsLoaded = true;

          // We only need to initialize after preloading is complete
          // During preloading all scripts are initialized after everything is loaded
          if (!this.system.preloading) {
            this.system.onInitialize(this.entity);
            this.system.onPostInitialize(this.entity);
          }
        }
      });
    });
  }
}

export { ScriptLegacyComponent };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvc2NyaXB0LWxlZ2FjeS9jb21wb25lbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVidWcgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2RlYnVnLmpzJztcbmltcG9ydCB7IHBhdGggfSBmcm9tICcuLi8uLi8uLi9jb3JlL3BhdGguanMnO1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnQuanMnO1xuXG5jbGFzcyBTY3JpcHRMZWdhY3lDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHN5c3RlbSwgZW50aXR5KSB7XG4gICAgICAgIHN1cGVyKHN5c3RlbSwgZW50aXR5KTtcbiAgICAgICAgdGhpcy5vbignc2V0X3NjcmlwdHMnLCB0aGlzLm9uU2V0U2NyaXB0cywgdGhpcyk7XG4gICAgfVxuXG4gICAgc2VuZChuYW1lLCBmdW5jdGlvbk5hbWUpIHtcbiAgICAgICAgRGVidWcuZGVwcmVjYXRlZCgnU2NyaXB0TGVnYWN5Q29tcG9uZW50LnNlbmQoKSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgc29vbi4gUGxlYXNlIHVzZTogaHR0cHM6Ly9kZXZlbG9wZXIucGxheWNhbnZhcy5jb20vdXNlci1tYW51YWwvc2NyaXB0aW5nL2NvbW11bmljYXRpb24vJyk7XG5cbiAgICAgICAgY29uc3QgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlcyA9IHRoaXMuZW50aXR5LnNjcmlwdC5pbnN0YW5jZXM7XG4gICAgICAgIGxldCBmbjtcblxuICAgICAgICBpZiAoaW5zdGFuY2VzICYmIGluc3RhbmNlc1tuYW1lXSkge1xuICAgICAgICAgICAgZm4gPSBpbnN0YW5jZXNbbmFtZV0uaW5zdGFuY2VbZnVuY3Rpb25OYW1lXTtcbiAgICAgICAgICAgIGlmIChmbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseShpbnN0YW5jZXNbbmFtZV0uaW5zdGFuY2UsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgb25FbmFibGUoKSB7XG4gICAgICAgIC8vIGlmIHRoZSBzY3JpcHRzIG9mIHRoZSBjb21wb25lbnQgaGF2ZSBiZWVuIGxvYWRlZFxuICAgICAgICAvLyB0aGVuIGNhbGwgdGhlIGFwcHJvcHJpYXRlIG1ldGhvZHMgb24gdGhlIGNvbXBvbmVudFxuICAgICAgICBpZiAodGhpcy5kYXRhLmFyZVNjcmlwdHNMb2FkZWQgJiYgIXRoaXMuc3lzdGVtLnByZWxvYWRpbmcpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kYXRhLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW0uX2luaXRpYWxpemVTY3JpcHRDb21wb25lbnQodGhpcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3lzdGVtLl9lbmFibGVTY3JpcHRDb21wb25lbnQodGhpcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5kYXRhLnBvc3RJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3lzdGVtLl9wb3N0SW5pdGlhbGl6ZVNjcmlwdENvbXBvbmVudCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uRGlzYWJsZSgpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0uX2Rpc2FibGVTY3JpcHRDb21wb25lbnQodGhpcyk7XG4gICAgfVxuXG4gICAgb25TZXRTY3JpcHRzKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLl9pblRvb2xzIHx8IHRoaXMucnVuSW5Ub29scykge1xuICAgICAgICAgICAgLy8gaWYgd2Ugb25seSBuZWVkIHRvIHVwZGF0ZSBzY3JpcHQgYXR0cmlidXRlcyB0aGVuIHVwZGF0ZSB0aGVtIGFuZCByZXR1cm5cbiAgICAgICAgICAgIGlmICh0aGlzLl91cGRhdGVTY3JpcHRBdHRyaWJ1dGVzKG9sZFZhbHVlLCBuZXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGRpc2FibGUgdGhlIHNjcmlwdCBmaXJzdFxuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3lzdGVtLl9kaXNhYmxlU2NyaXB0Q29tcG9uZW50KHRoaXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5fZGVzdHJveVNjcmlwdENvbXBvbmVudCh0aGlzKTtcblxuICAgICAgICAgICAgdGhpcy5kYXRhLmFyZVNjcmlwdHNMb2FkZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgLy8gZ2V0IHRoZSB1cmxzXG4gICAgICAgICAgICBjb25zdCBzY3JpcHRzID0gbmV3VmFsdWU7XG4gICAgICAgICAgICBjb25zdCB1cmxzID0gc2NyaXB0cy5tYXAoZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcy51cmw7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gdHJ5IHRvIGxvYWQgdGhlIHNjcmlwdHMgc3luY2hyb25vdXNseSBmaXJzdFxuICAgICAgICAgICAgaWYgKHRoaXMuX2xvYWRGcm9tQ2FjaGUodXJscykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG5vdCBhbGwgc2NyaXB0cyBhcmUgaW4gdGhlIGNhY2hlIHNvIGxvYWQgdGhlbSBhc3luY2hyb25vdXNseVxuICAgICAgICAgICAgdGhpcy5fbG9hZFNjcmlwdHModXJscyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBvbmx5IHNjcmlwdCBhdHRyaWJ1dGVzIG5lZWQgdXBkYXRpbmcgaW4gd2hpY2hcbiAgICAvLyBjYXNlIGp1c3QgdXBkYXRlIHRoZSBhdHRyaWJ1dGVzIGFuZCByZXR1cm4gb3RoZXJ3aXNlIHJldHVybiBmYWxzZVxuICAgIF91cGRhdGVTY3JpcHRBdHRyaWJ1dGVzKG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICBsZXQgb25seVVwZGF0ZUF0dHJpYnV0ZXMgPSB0cnVlO1xuXG4gICAgICAgIGlmIChvbGRWYWx1ZS5sZW5ndGggIT09IG5ld1ZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgb25seVVwZGF0ZUF0dHJpYnV0ZXMgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBuZXdWYWx1ZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChvbGRWYWx1ZVtpXS51cmwgIT09IG5ld1ZhbHVlW2ldLnVybCkge1xuICAgICAgICAgICAgICAgICAgICBvbmx5VXBkYXRlQXR0cmlidXRlcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob25seVVwZGF0ZUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuaW5zdGFuY2VzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW0uX3VwZGF0ZUFjY2Vzc29ycyh0aGlzLmVudGl0eSwgdGhpcy5pbnN0YW5jZXNba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9ubHlVcGRhdGVBdHRyaWJ1dGVzO1xuICAgIH1cblxuICAgIC8vIExvYWQgZWFjaCB1cmwgZnJvbSB0aGUgY2FjaGUgc3luY2hyb25vdXNseS4gSWYgb25lIG9mIHRoZSB1cmxzIGlzIG5vdCBpbiB0aGUgY2FjaGVcbiAgICAvLyB0aGVuIHN0b3AgYW5kIHJldHVybiBmYWxzZS5cbiAgICBfbG9hZEZyb21DYWNoZSh1cmxzKSB7XG4gICAgICAgIGNvbnN0IGNhY2hlZCA9IFtdO1xuXG4gICAgICAgIGNvbnN0IHByZWZpeCA9IHRoaXMuc3lzdGVtLmFwcC5fc2NyaXB0UHJlZml4IHx8ICcnO1xuICAgICAgICBjb25zdCByZWdleCA9IC9eaHR0cChzKT86XFwvXFwvL2k7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHVybHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB1cmwgPSB1cmxzW2ldO1xuICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KHVybCkpIHtcbiAgICAgICAgICAgICAgICB1cmwgPSBwYXRoLmpvaW4ocHJlZml4LCB1cmwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdGhpcy5zeXN0ZW0uYXBwLmxvYWRlci5nZXRGcm9tQ2FjaGUodXJsLCAnc2NyaXB0Jyk7XG5cbiAgICAgICAgICAgIC8vIGlmIHdlIGNhbm5vdCBmaW5kIHRoZSBzY3JpcHQgaW4gdGhlIGNhY2hlIHRoZW4gcmV0dXJuIGFuZCBsb2FkXG4gICAgICAgICAgICAvLyBhbGwgc2NyaXB0cyB3aXRoIHRoZSByZXNvdXJjZSBsb2FkZXJcbiAgICAgICAgICAgIGlmICghdHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FjaGVkLnB1c2godHlwZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gY2FjaGVkLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBTY3JpcHRUeXBlID0gY2FjaGVkW2ldO1xuXG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgcmVndWxhciBKUyBmaWxlXG4gICAgICAgICAgICBpZiAoU2NyaXB0VHlwZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTY3JpcHRUeXBlIG1heSBiZSBudWxsIGlmIHRoZSBzY3JpcHQgY29tcG9uZW50IGlzIGxvYWRpbmcgYW4gb3JkaW5hcnkgSmF2YVNjcmlwdCBsaWIgcmF0aGVyIHRoYW4gYSBQbGF5Q2FudmFzIHNjcmlwdFxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgc2NyaXB0IGNvbXBvbmVudCBoYXNuJ3QgYmVlbiByZW1vdmVkIHNpbmNlIHdlIHN0YXJ0ZWQgbG9hZGluZ1xuICAgICAgICAgICAgaWYgKFNjcmlwdFR5cGUgJiYgdGhpcy5lbnRpdHkuc2NyaXB0KSB7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgd2UgaGF2ZW4ndCBhbHJlYWR5IGluc3RhbnRpYXRlZCBhbm90aGVyIGlkZW50aWNhbCBzY3JpcHQgd2hpbGUgbG9hZGluZ1xuICAgICAgICAgICAgICAgIC8vIGUuZy4gaWYgeW91IGRvIGFkZENvbXBvbmVudCwgcmVtb3ZlQ29tcG9uZW50LCBhZGRDb21wb25lbnQsIGluIHF1aWNrIHN1Y2Nlc3Npb25cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZW50aXR5LnNjcmlwdC5pbnN0YW5jZXNbU2NyaXB0VHlwZS5fcGNTY3JpcHROYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBTY3JpcHRUeXBlKHRoaXMuZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW0uX3ByZVJlZ2lzdGVySW5zdGFuY2UodGhpcy5lbnRpdHksIHVybHNbaV0sIFNjcmlwdFR5cGUuX3BjU2NyaXB0TmFtZSwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5hcmVTY3JpcHRzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIG9ubHkgbmVlZCB0byBpbml0aWFsaXplIGFmdGVyIHByZWxvYWRpbmcgaXMgY29tcGxldGVcbiAgICAgICAgLy8gRHVyaW5nIHByZWxvYWRpbmcgYWxsIHNjcmlwdHMgYXJlIGluaXRpYWxpemVkIGFmdGVyIGV2ZXJ5dGhpbmcgaXMgbG9hZGVkXG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJlbG9hZGluZykge1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW0ub25Jbml0aWFsaXplKHRoaXMuZW50aXR5KTtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLm9uUG9zdEluaXRpYWxpemUodGhpcy5lbnRpdHkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgX2xvYWRTY3JpcHRzKHVybHMpIHtcbiAgICAgICAgbGV0IGNvdW50ID0gdXJscy5sZW5ndGg7XG5cbiAgICAgICAgY29uc3QgcHJlZml4ID0gdGhpcy5zeXN0ZW0uYXBwLl9zY3JpcHRQcmVmaXggfHwgJyc7XG5cbiAgICAgICAgdXJscy5mb3JFYWNoKCh1cmwpID0+IHtcbiAgICAgICAgICAgIGxldCBfdXJsID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBfdW5wcmVmaXhlZCA9IG51bGw7XG4gICAgICAgICAgICAvLyBzdXBwb3J0IGFic29sdXRlIFVSTHMgKGZvciBub3cpXG4gICAgICAgICAgICBpZiAodXJsLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IHVybC50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHtcbiAgICAgICAgICAgICAgICBfdW5wcmVmaXhlZCA9IHVybDtcbiAgICAgICAgICAgICAgICBfdXJsID0gdXJsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdW5wcmVmaXhlZCA9IHVybDtcbiAgICAgICAgICAgICAgICBfdXJsID0gcGF0aC5qb2luKHByZWZpeCwgdXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLmFwcC5sb2FkZXIubG9hZChfdXJsLCAnc2NyaXB0JywgKGVyciwgU2NyaXB0VHlwZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvdW50LS07XG4gICAgICAgICAgICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2NyaXB0VHlwZSBpcyBudWxsIGlmIHRoZSBzY3JpcHQgaXMgbm90IGEgUGxheUNhbnZhcyBzY3JpcHRcbiAgICAgICAgICAgICAgICAgICAgaWYgKFNjcmlwdFR5cGUgJiYgdGhpcy5lbnRpdHkuc2NyaXB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZW50aXR5LnNjcmlwdC5pbnN0YW5jZXNbU2NyaXB0VHlwZS5fcGNTY3JpcHROYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IFNjcmlwdFR5cGUodGhpcy5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3lzdGVtLl9wcmVSZWdpc3Rlckluc3RhbmNlKHRoaXMuZW50aXR5LCBfdW5wcmVmaXhlZCwgU2NyaXB0VHlwZS5fcGNTY3JpcHROYW1lLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEuYXJlU2NyaXB0c0xvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gV2Ugb25seSBuZWVkIHRvIGluaXRpYWxpemUgYWZ0ZXIgcHJlbG9hZGluZyBpcyBjb21wbGV0ZVxuICAgICAgICAgICAgICAgICAgICAvLyBEdXJpbmcgcHJlbG9hZGluZyBhbGwgc2NyaXB0cyBhcmUgaW5pdGlhbGl6ZWQgYWZ0ZXIgZXZlcnl0aGluZyBpcyBsb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcmVsb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5c3RlbS5vbkluaXRpYWxpemUodGhpcy5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW0ub25Qb3N0SW5pdGlhbGl6ZSh0aGlzLmVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBTY3JpcHRMZWdhY3lDb21wb25lbnQgfTtcbiJdLCJuYW1lcyI6WyJTY3JpcHRMZWdhY3lDb21wb25lbnQiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInN5c3RlbSIsImVudGl0eSIsIm9uIiwib25TZXRTY3JpcHRzIiwic2VuZCIsIm5hbWUiLCJmdW5jdGlvbk5hbWUiLCJEZWJ1ZyIsImRlcHJlY2F0ZWQiLCJhcmdzIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJpbnN0YW5jZXMiLCJzY3JpcHQiLCJmbiIsImluc3RhbmNlIiwiYXBwbHkiLCJ1bmRlZmluZWQiLCJvbkVuYWJsZSIsImRhdGEiLCJhcmVTY3JpcHRzTG9hZGVkIiwicHJlbG9hZGluZyIsImluaXRpYWxpemVkIiwiX2luaXRpYWxpemVTY3JpcHRDb21wb25lbnQiLCJfZW5hYmxlU2NyaXB0Q29tcG9uZW50IiwicG9zdEluaXRpYWxpemVkIiwiX3Bvc3RJbml0aWFsaXplU2NyaXB0Q29tcG9uZW50Iiwib25EaXNhYmxlIiwiX2Rpc2FibGVTY3JpcHRDb21wb25lbnQiLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwiX2luVG9vbHMiLCJydW5JblRvb2xzIiwiX3VwZGF0ZVNjcmlwdEF0dHJpYnV0ZXMiLCJlbmFibGVkIiwiX2Rlc3Ryb3lTY3JpcHRDb21wb25lbnQiLCJzY3JpcHRzIiwidXJscyIsIm1hcCIsInMiLCJ1cmwiLCJfbG9hZEZyb21DYWNoZSIsIl9sb2FkU2NyaXB0cyIsIm9ubHlVcGRhdGVBdHRyaWJ1dGVzIiwibGVuZ3RoIiwiaSIsImxlbiIsImtleSIsImhhc093blByb3BlcnR5IiwiX3VwZGF0ZUFjY2Vzc29ycyIsImNhY2hlZCIsInByZWZpeCIsImFwcCIsIl9zY3JpcHRQcmVmaXgiLCJyZWdleCIsInRlc3QiLCJwYXRoIiwiam9pbiIsInR5cGUiLCJsb2FkZXIiLCJnZXRGcm9tQ2FjaGUiLCJwdXNoIiwiU2NyaXB0VHlwZSIsIl9wY1NjcmlwdE5hbWUiLCJfcHJlUmVnaXN0ZXJJbnN0YW5jZSIsIm9uSW5pdGlhbGl6ZSIsIm9uUG9zdEluaXRpYWxpemUiLCJjb3VudCIsImZvckVhY2giLCJfdXJsIiwiX3VucHJlZml4ZWQiLCJ0b0xvd2VyQ2FzZSIsInN0YXJ0c1dpdGgiLCJsb2FkIiwiZXJyIiwiY29uc29sZSIsImVycm9yIl0sIm1hcHBpbmdzIjoiOzs7O0FBS0EsTUFBTUEscUJBQXFCLFNBQVNDLFNBQVMsQ0FBQztBQUMxQ0MsRUFBQUEsV0FBV0EsQ0FBQ0MsTUFBTSxFQUFFQyxNQUFNLEVBQUU7QUFDeEIsSUFBQSxLQUFLLENBQUNELE1BQU0sRUFBRUMsTUFBTSxDQUFDLENBQUE7SUFDckIsSUFBSSxDQUFDQyxFQUFFLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQ0MsWUFBWSxF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
