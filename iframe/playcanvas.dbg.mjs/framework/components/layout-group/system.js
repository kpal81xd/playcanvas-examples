import { Vec2 } from '../../../core/math/vec2.js';
import { Vec4 } from '../../../core/math/vec4.js';
import { Component } from '../component.js';
import { ComponentSystem } from '../system.js';
import { LayoutGroupComponent } from './component.js';
import { LayoutGroupComponentData } from './data.js';

const _schema = ['enabled'];
const MAX_ITERATIONS = 100;

/**
 * Manages creation of {@link LayoutGroupComponent}s.
 *
 * @augments ComponentSystem
 * @category User Interface
 */
class LayoutGroupComponentSystem extends ComponentSystem {
  /**
   * Create a new LayoutGroupComponentSystem instance.
   *
   * @param {import('../../app-base.js').AppBase} app - The application.
   * @hideconstructor
   */
  constructor(app) {
    super(app);
    this.id = 'layoutgroup';
    this.ComponentType = LayoutGroupComponent;
    this.DataType = LayoutGroupComponentData;
    this.schema = _schema;
    this._reflowQueue = [];
    this.on('beforeremove', this._onRemoveComponent, this);

    // Perform reflow when running in the engine
    this.app.systems.on('postUpdate', this._onPostUpdate, this);
  }
  initializeComponentData(component, data, properties) {
    if (data.enabled !== undefined) component.enabled = data.enabled;
    if (data.orientation !== undefined) component.orientation = data.orientation;
    if (data.reverseX !== undefined) component.reverseX = data.reverseX;
    if (data.reverseY !== undefined) component.reverseY = data.reverseY;
    if (data.alignment !== undefined) {
      component.alignment = Array.isArray(data.alignment) ? new Vec2(data.alignment) : data.alignment;
    }
    if (data.padding !== undefined) {
      component.padding = Array.isArray(data.padding) ? new Vec4(data.padding) : data.padding;
    }
    if (data.spacing !== undefined) {
      component.spacing = Array.isArray(data.spacing) ? new Vec2(data.spacing) : data.spacing;
    }
    if (data.widthFitting !== undefined) component.widthFitting = data.widthFitting;
    if (data.heightFitting !== undefined) component.heightFitting = data.heightFitting;
    if (data.wrap !== undefined) component.wrap = data.wrap;
    super.initializeComponentData(component, data, properties);
  }
  cloneComponent(entity, clone) {
    const layoutGroup = entity.layoutgroup;
    return this.addComponent(clone, {
      enabled: layoutGroup.enabled,
      orientation: layoutGroup.orientation,
      reverseX: layoutGroup.reverseX,
      reverseY: layoutGroup.reverseY,
      alignment: layoutGroup.alignment,
      padding: layoutGroup.padding,
      spacing: layoutGroup.spacing,
      widthFitting: layoutGroup.widthFitting,
      heightFitting: layoutGroup.heightFitting,
      wrap: layoutGroup.wrap
    });
  }
  scheduleReflow(component) {
    if (this._reflowQueue.indexOf(component) === -1) {
      this._reflowQueue.push(component);
    }
  }
  _onPostUpdate() {
    this._processReflowQueue();
  }
  _processReflowQueue() {
    if (this._reflowQueue.length === 0) {
      return;
    }
    let iterationCount = 0;
    while (this._reflowQueue.length > 0) {
      // Create a copy of the queue to sort and process. If processing the reflow of any
      // layout groups results in additional groups being pushed to the queue, they will
      // be processed on the next iteration of the while loop.
      const queue = this._reflowQueue.slice();
      this._reflowQueue.length = 0;

      // Sort in ascending order of depth within the graph (i.e. outermost first), so that
      // any layout groups which are children of other layout groups will always have their
      // new size set before their own reflow is calculated.
      queue.sort(function (componentA, componentB) {
        return componentA.entity.graphDepth - componentB.entity.graphDepth;
      });
      for (let i = 0; i < queue.length; ++i) {
        queue[i].reflow();
      }
      if (++iterationCount >= MAX_ITERATIONS) {
        console.warn('Max reflow iterations limit reached, bailing.');
        break;
      }
    }
  }
  _onRemoveComponent(entity, component) {
    component.onRemove();
  }
  destroy() {
    super.destroy();
    this.app.systems.off('postUpdate', this._onPostUpdate, this);
  }
}
Component._buildAccessors(LayoutGroupComponent.prototype, _schema);

export { LayoutGroupComponentSystem };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3lzdGVtLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvbGF5b3V0LWdyb3VwL3N5c3RlbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWMyIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9tYXRoL3ZlYzIuanMnO1xuaW1wb3J0IHsgVmVjNCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvbWF0aC92ZWM0LmpzJztcblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50LmpzJztcbmltcG9ydCB7IENvbXBvbmVudFN5c3RlbSB9IGZyb20gJy4uL3N5c3RlbS5qcyc7XG5cbmltcG9ydCB7IExheW91dEdyb3VwQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnQuanMnO1xuaW1wb3J0IHsgTGF5b3V0R3JvdXBDb21wb25lbnREYXRhIH0gZnJvbSAnLi9kYXRhLmpzJztcblxuY29uc3QgX3NjaGVtYSA9IFsnZW5hYmxlZCddO1xuXG5jb25zdCBNQVhfSVRFUkFUSU9OUyA9IDEwMDtcblxuLyoqXG4gKiBNYW5hZ2VzIGNyZWF0aW9uIG9mIHtAbGluayBMYXlvdXRHcm91cENvbXBvbmVudH1zLlxuICpcbiAqIEBhdWdtZW50cyBDb21wb25lbnRTeXN0ZW1cbiAqIEBjYXRlZ29yeSBVc2VyIEludGVyZmFjZVxuICovXG5jbGFzcyBMYXlvdXRHcm91cENvbXBvbmVudFN5c3RlbSBleHRlbmRzIENvbXBvbmVudFN5c3RlbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IExheW91dEdyb3VwQ29tcG9uZW50U3lzdGVtIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL2FwcC1iYXNlLmpzJykuQXBwQmFzZX0gYXBwIC0gVGhlIGFwcGxpY2F0aW9uLlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcblxuICAgICAgICB0aGlzLmlkID0gJ2xheW91dGdyb3VwJztcblxuICAgICAgICB0aGlzLkNvbXBvbmVudFR5cGUgPSBMYXlvdXRHcm91cENvbXBvbmVudDtcbiAgICAgICAgdGhpcy5EYXRhVHlwZSA9IExheW91dEdyb3VwQ29tcG9uZW50RGF0YTtcblxuICAgICAgICB0aGlzLnNjaGVtYSA9IF9zY2hlbWE7XG5cbiAgICAgICAgdGhpcy5fcmVmbG93UXVldWUgPSBbXTtcblxuICAgICAgICB0aGlzLm9uKCdiZWZvcmVyZW1vdmUnLCB0aGlzLl9vblJlbW92ZUNvbXBvbmVudCwgdGhpcyk7XG5cbiAgICAgICAgLy8gUGVyZm9ybSByZWZsb3cgd2hlbiBydW5uaW5nIGluIHRoZSBlbmdpbmVcbiAgICAgICAgdGhpcy5hcHAuc3lzdGVtcy5vbigncG9zdFVwZGF0ZScsIHRoaXMuX29uUG9zdFVwZGF0ZSwgdGhpcyk7XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZUNvbXBvbmVudERhdGEoY29tcG9uZW50LCBkYXRhLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmIChkYXRhLmVuYWJsZWQgIT09IHVuZGVmaW5lZCkgY29tcG9uZW50LmVuYWJsZWQgPSBkYXRhLmVuYWJsZWQ7XG4gICAgICAgIGlmIChkYXRhLm9yaWVudGF0aW9uICE9PSB1bmRlZmluZWQpIGNvbXBvbmVudC5vcmllbnRhdGlvbiA9IGRhdGEub3JpZW50YXRpb247XG4gICAgICAgIGlmIChkYXRhLnJldmVyc2VYICE9PSB1bmRlZmluZWQpIGNvbXBvbmVudC5yZXZlcnNlWCA9IGRhdGEucmV2ZXJzZVg7XG4gICAgICAgIGlmIChkYXRhLnJldmVyc2VZICE9PSB1bmRlZmluZWQpIGNvbXBvbmVudC5yZXZlcnNlWSA9IGRhdGEucmV2ZXJzZVk7XG4gICAgICAgIGlmIChkYXRhLmFsaWdubWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb21wb25lbnQuYWxpZ25tZW50ID0gQXJyYXkuaXNBcnJheShkYXRhLmFsaWdubWVudCkgPyBuZXcgVmVjMihkYXRhLmFsaWdubWVudCkgOiBkYXRhLmFsaWdubWVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS5wYWRkaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbXBvbmVudC5wYWRkaW5nID0gQXJyYXkuaXNBcnJheShkYXRhLnBhZGRpbmcpID8gbmV3IFZlYzQoZGF0YS5wYWRkaW5nKSA6IGRhdGEucGFkZGluZztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS5zcGFjaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbXBvbmVudC5zcGFjaW5nID0gQXJyYXkuaXNBcnJheShkYXRhLnNwYWNpbmcpID8gbmV3IFZlYzIoZGF0YS5zcGFjaW5nKSA6IGRhdGEuc3BhY2luZztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS53aWR0aEZpdHRpbmcgIT09IHVuZGVmaW5lZCkgY29tcG9uZW50LndpZHRoRml0dGluZyA9IGRhdGEud2lkdGhGaXR0aW5nO1xuICAgICAgICBpZiAoZGF0YS5oZWlnaHRGaXR0aW5nICE9PSB1bmRlZmluZWQpIGNvbXBvbmVudC5oZWlnaHRGaXR0aW5nID0gZGF0YS5oZWlnaHRGaXR0aW5nO1xuICAgICAgICBpZiAoZGF0YS53cmFwICE9PSB1bmRlZmluZWQpIGNvbXBvbmVudC53cmFwID0gZGF0YS53cmFwO1xuXG4gICAgICAgIHN1cGVyLmluaXRpYWxpemVDb21wb25lbnREYXRhKGNvbXBvbmVudCwgZGF0YSwgcHJvcGVydGllcyk7XG4gICAgfVxuXG4gICAgY2xvbmVDb21wb25lbnQoZW50aXR5LCBjbG9uZSkge1xuICAgICAgICBjb25zdCBsYXlvdXRHcm91cCA9IGVudGl0eS5sYXlvdXRncm91cDtcblxuICAgICAgICByZXR1cm4gdGhpcy5hZGRDb21wb25lbnQoY2xvbmUsIHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IGxheW91dEdyb3VwLmVuYWJsZWQsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogbGF5b3V0R3JvdXAub3JpZW50YXRpb24sXG4gICAgICAgICAgICByZXZlcnNlWDogbGF5b3V0R3JvdXAucmV2ZXJzZVgsXG4gICAgICAgICAgICByZXZlcnNlWTogbGF5b3V0R3JvdXAucmV2ZXJzZVksXG4gICAgICAgICAgICBhbGlnbm1lbnQ6IGxheW91dEdyb3VwLmFsaWdubWVudCxcbiAgICAgICAgICAgIHBhZGRpbmc6IGxheW91dEdyb3VwLnBhZGRpbmcsXG4gICAgICAgICAgICBzcGFjaW5nOiBsYXlvdXRHcm91cC5zcGFjaW5nLFxuICAgICAgICAgICAgd2lkdGhGaXR0aW5nOiBsYXlvdXRHcm91cC53aWR0aEZpdHRpbmcsXG4gICAgICAgICAgICBoZWlnaHRGaXR0aW5nOiBsYXlvdXRHcm91cC5oZWlnaHRGaXR0aW5nLFxuICAgICAgICAgICAgd3JhcDogbGF5b3V0R3JvdXAud3JhcFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzY2hlZHVsZVJlZmxvdyhjb21wb25lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuX3JlZmxvd1F1ZXVlLmluZGV4T2YoY29tcG9uZW50KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlZmxvd1F1ZXVlLnB1c2goY29tcG9uZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9vblBvc3RVcGRhdGUoKSB7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NSZWZsb3dRdWV1ZSgpO1xuICAgIH1cblxuICAgIF9wcm9jZXNzUmVmbG93UXVldWUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWZsb3dRdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpdGVyYXRpb25Db3VudCA9IDA7XG5cbiAgICAgICAgd2hpbGUgKHRoaXMuX3JlZmxvd1F1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIGNvcHkgb2YgdGhlIHF1ZXVlIHRvIHNvcnQgYW5kIHByb2Nlc3MuIElmIHByb2Nlc3NpbmcgdGhlIHJlZmxvdyBvZiBhbnlcbiAgICAgICAgICAgIC8vIGxheW91dCBncm91cHMgcmVzdWx0cyBpbiBhZGRpdGlvbmFsIGdyb3VwcyBiZWluZyBwdXNoZWQgdG8gdGhlIHF1ZXVlLCB0aGV5IHdpbGxcbiAgICAgICAgICAgIC8vIGJlIHByb2Nlc3NlZCBvbiB0aGUgbmV4dCBpdGVyYXRpb24gb2YgdGhlIHdoaWxlIGxvb3AuXG4gICAgICAgICAgICBjb25zdCBxdWV1ZSA9IHRoaXMuX3JlZmxvd1F1ZXVlLnNsaWNlKCk7XG4gICAgICAgICAgICB0aGlzLl9yZWZsb3dRdWV1ZS5sZW5ndGggPSAwO1xuXG4gICAgICAgICAgICAvLyBTb3J0IGluIGFzY2VuZGluZyBvcmRlciBvZiBkZXB0aCB3aXRoaW4gdGhlIGdyYXBoIChpLmUuIG91dGVybW9zdCBmaXJzdCksIHNvIHRoYXRcbiAgICAgICAgICAgIC8vIGFueSBsYXlvdXQgZ3JvdXBzIHdoaWNoIGFyZSBjaGlsZHJlbiBvZiBvdGhlciBsYXlvdXQgZ3JvdXBzIHdpbGwgYWx3YXlzIGhhdmUgdGhlaXJcbiAgICAgICAgICAgIC8vIG5ldyBzaXplIHNldCBiZWZvcmUgdGhlaXIgb3duIHJlZmxvdyBpcyBjYWxjdWxhdGVkLlxuICAgICAgICAgICAgcXVldWUuc29ydChmdW5jdGlvbiAoY29tcG9uZW50QSwgY29tcG9uZW50Qikge1xuICAgICAgICAgICAgICAgIHJldHVybiAoY29tcG9uZW50QS5lbnRpdHkuZ3JhcGhEZXB0aCAtIGNvbXBvbmVudEIuZW50aXR5LmdyYXBoRGVwdGgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBxdWV1ZVtpXS5yZWZsb3coKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCsraXRlcmF0aW9uQ291bnQgPj0gTUFYX0lURVJBVElPTlMpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01heCByZWZsb3cgaXRlcmF0aW9ucyBsaW1pdCByZWFjaGVkLCBiYWlsaW5nLicpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX29uUmVtb3ZlQ29tcG9uZW50KGVudGl0eSwgY29tcG9uZW50KSB7XG4gICAgICAgIGNvbXBvbmVudC5vblJlbW92ZSgpO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcblxuICAgICAgICB0aGlzLmFwcC5zeXN0ZW1zLm9mZigncG9zdFVwZGF0ZScsIHRoaXMuX29uUG9zdFVwZGF0ZSwgdGhpcyk7XG4gICAgfVxufVxuXG5Db21wb25lbnQuX2J1aWxkQWNjZXNzb3JzKExheW91dEdyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgX3NjaGVtYSk7XG5cbmV4cG9ydCB7IExheW91dEdyb3VwQ29tcG9uZW50U3lzdGVtIH07XG4iXSwibmFtZXMiOlsiX3NjaGVtYSIsIk1BWF9JVEVSQVRJT05TIiwiTGF5b3V0R3JvdXBDb21wb25lbnRTeXN0ZW0iLCJDb21wb25lbnRTeXN0ZW0iLCJjb25zdHJ1Y3RvciIsImFwcCIsImlkIiwiQ29tcG9uZW50VHlwZSIsIkxheW91dEdyb3VwQ29tcG9uZW50IiwiRGF0YVR5cGUiLCJMYXlvdXRHcm91cENvbXBvbmVudERhdGEiLCJzY2hlbWEiLCJfcmVmbG93UXVldWUiLCJvbiIsIl9vblJlbW92ZUNvbXBvbmVudCIsInN5c3RlbXMiLCJfb25Qb3N0VXBkYXRlIiwiaW5pdGlhbGl6ZUNvbXBvbmVudERhdGEiLCJjb21wb25lbnQiLCJkYXRhIiwicHJvcGVydGllcyIsImVuYWJsZWQiLCJ1bmRlZmluZWQiLCJvcmllbnRhdGlvbiIsInJldmVyc2VYIiwicmV2ZXJzZVkiLCJhbGlnbm1lbnQiLCJBcnJheSIsImlzQXJyYXkiLCJWZWMyIiwicGFkZGluZyIsIlZlYzQiLCJzcGFjaW5nIiwid2lkdGhGaXR0aW5nIiwiaGVpZ2h0Rml0dGluZyIsIndyYXAiLCJjbG9uZUNvbXBvbmVudCIsImVudGl0eSIsImNsb25lIiwibGF5b3V0R3JvdXAiLCJsYXlvdXRncm91cCIsImFkZENvbXBvbmVudCIsInNjaGVkdWxlUmVmbG93IiwiaW5kZXhPZiIsInB1c2giLCJfcHJvY2Vzc1JlZmxvd1F1ZXVlIiwibGVuZ3RoIiwiaXRlcmF0aW9uQ291bnQiLCJxdWV1ZSIsInNsaWNlIiwic29ydCIsImNvbXBvbmVudEEiLCJjb21wb25lbnRCIiwiZ3JhcGhEZXB0aCIsImkiLCJyZWZsb3ciLCJjb25zb2xlIiwid2FybiIsIm9uUmVtb3ZlIiwiZGVzdHJveSIsIm9mZiIsIkNvbXBvbmVudCIsIl9idWlsZEFjY2Vzc29ycyIsInByb3RvdHlwZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQVNBLE1BQU1BLE9BQU8sR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFBO0FBRTNCLE1BQU1DLGNBQWMsR0FBRyxHQUFHLENBQUE7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1DLDBCQUEwQixTQUFTQyxlQUFlLENBQUM7QUFDckQ7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0lDLFdBQVdBLENBQUNDLEdBQUcsRUFBRTtJQUNiLEtBQUssQ0FBQ0EsR0FBRyxDQUFDLENBQUE7SUFFVixJQUFJLENBQUNDLEVBQUUsR0FBRyxhQUFhLENBQUE7SUFFdkIsSUFBSSxDQUFDQyxhQUFhLEdBQUdDLG9CQUFvQixDQUFBO0lBQ3pDLElBQUksQ0FBQ0MsUUFBUSxHQUFHQyx3QkFBd0IsQ0FBQTtJQUV4QyxJQUFJLENBQUNDLE1BQU0sR0FBR1gsT0FBTyxDQUFBO0lBRXJCLElBQUksQ0FBQ1ksWUFBWSxHQUFHLEVBQUUsQ0FBQTtJQUV0QixJQUFJLENBQUNDLEVBQUUsQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsQ0FBQTs7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
