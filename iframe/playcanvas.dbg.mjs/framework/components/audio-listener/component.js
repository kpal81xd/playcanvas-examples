import { Component } from '../component.js';

/**
 * Represents the audio listener in the 3D world, so that 3D positioned audio sources are heard
 * correctly.
 *
 * @augments Component
 * @category Sound
 */
class AudioListenerComponent extends Component {
  /**
   * Create a new AudioListenerComponent instance.
   *
   * @param {import('./system.js').AudioListenerComponentSystem} system - The ComponentSystem
   * that created this component.
   * @param {import('../../entity.js').Entity} entity - The Entity that this component is
   * attached to.
   */
  constructor(system, entity) {
    // eslint-disable-line no-useless-constructor
    super(system, entity);
  }
  setCurrentListener() {
    if (this.enabled && this.entity.audiolistener && this.entity.enabled) {
      this.system.current = this.entity;
      const position = this.system.current.getPosition();
      this.system.manager.listener.setPosition(position);
    }
  }
  onEnable() {
    this.setCurrentListener();
  }
  onDisable() {
    if (this.system.current === this.entity) {
      this.system.current = null;
    }
  }
}

export { AudioListenerComponent };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvYXVkaW8tbGlzdGVuZXIvY29tcG9uZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudC5qcyc7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgYXVkaW8gbGlzdGVuZXIgaW4gdGhlIDNEIHdvcmxkLCBzbyB0aGF0IDNEIHBvc2l0aW9uZWQgYXVkaW8gc291cmNlcyBhcmUgaGVhcmRcbiAqIGNvcnJlY3RseS5cbiAqXG4gKiBAYXVnbWVudHMgQ29tcG9uZW50XG4gKiBAY2F0ZWdvcnkgU291bmRcbiAqL1xuY2xhc3MgQXVkaW9MaXN0ZW5lckNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IEF1ZGlvTGlzdGVuZXJDb21wb25lbnQgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi9zeXN0ZW0uanMnKS5BdWRpb0xpc3RlbmVyQ29tcG9uZW50U3lzdGVtfSBzeXN0ZW0gLSBUaGUgQ29tcG9uZW50U3lzdGVtXG4gICAgICogdGhhdCBjcmVhdGVkIHRoaXMgY29tcG9uZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9lbnRpdHkuanMnKS5FbnRpdHl9IGVudGl0eSAtIFRoZSBFbnRpdHkgdGhhdCB0aGlzIGNvbXBvbmVudCBpc1xuICAgICAqIGF0dGFjaGVkIHRvLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHN5c3RlbSwgZW50aXR5KSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlbGVzcy1jb25zdHJ1Y3RvclxuICAgICAgICBzdXBlcihzeXN0ZW0sIGVudGl0eSk7XG4gICAgfVxuXG4gICAgc2V0Q3VycmVudExpc3RlbmVyKCkge1xuICAgICAgICBpZiAodGhpcy5lbmFibGVkICYmIHRoaXMuZW50aXR5LmF1ZGlvbGlzdGVuZXIgJiYgdGhpcy5lbnRpdHkuZW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uY3VycmVudCA9IHRoaXMuZW50aXR5O1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLnN5c3RlbS5jdXJyZW50LmdldFBvc2l0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5tYW5hZ2VyLmxpc3RlbmVyLnNldFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uRW5hYmxlKCkge1xuICAgICAgICB0aGlzLnNldEN1cnJlbnRMaXN0ZW5lcigpO1xuICAgIH1cblxuICAgIG9uRGlzYWJsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3lzdGVtLmN1cnJlbnQgPT09IHRoaXMuZW50aXR5KSB7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IHsgQXVkaW9MaXN0ZW5lckNvbXBvbmVudCB9O1xuIl0sIm5hbWVzIjpbIkF1ZGlvTGlzdGVuZXJDb21wb25lbnQiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInN5c3RlbSIsImVudGl0eSIsInNldEN1cnJlbnRMaXN0ZW5lciIsImVuYWJsZWQiLCJhdWRpb2xpc3RlbmVyIiwiY3VycmVudCIsInBvc2l0aW9uIiwiZ2V0UG9zaXRpb24iLCJtYW5hZ2VyIiwibGlzdGVuZXIiLCJzZXRQb3NpdGlvbiIsIm9uRW5hYmxlIiwib25EaXNhYmxlIl0sIm1hcHBpbmdzIjoiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsc0JBQXNCLFNBQVNDLFNBQVMsQ0FBQztBQUMzQztBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0lDLEVBQUFBLFdBQVdBLENBQUNDLE1BQU0sRUFBRUMsTUFBTSxFQUFFO0FBQUU7QUFDMUIsSUFBQSxLQUFLLENBQUNELE1BQU0sRUFBRUMsTUFBTSxDQUFDLENBQUE7QUFDekIsR0FBQTtBQUVBQyxFQUFBQSxrQkFBa0JBLEdBQUc7QUFDakIsSUFBQSxJQUFJLElBQUksQ0FBQ0MsT0FBTyxJQUFJLElBQUksQ0FBQ0YsTUFBTSxDQUFDRyxhQUFhLElBQUksSUFBSSxDQUFDSCxNQUFNLENBQUNFLE9BQU8sRUFBRTtBQUNsRSxNQUFBLElBQUksQ0FBQ0gsTUFBTSxDQUFDSyxPQUFPLEdBQUcsSUFBSSxDQUFDSixNQUFNLENBQUE7TUFDakMsTUFBTUssUUFBUSxHQUFHLElBQUksQ0FBQ04sTUFBTSxDQUFDSyxPQUFPLENBQUNFLFdBQVcsRUFBRSxDQUFBO01BQ2xELElBQUksQ0FBQ1AsTUFBTSxDQUFDUSxPQUFPLENBQUNDLFFBQVEsQ0FBQ0MsV0FBVyxDQUFDSixRQUFRLENBQUMsQ0FBQTtBQUN0RCxLQUFBO0FBQ0osR0FBQTtBQUVBSyxFQUFBQSxRQUFRQSxHQUFHO0lBQ1AsSUFBSSxDQUFDVCxrQkFBa0IsRUFBRSxDQUFBO0FBQzdCLEdBQUE7QUFFQVUsRUFBQUEsU0FBU0EsR0FBRztJQUNSLElBQUksSUFBSSxDQUFDWixNQUFNLENBQUNLLE9BQU8sS0FBSyxJQUFJLENBQUNKLE1BQU0sRUFBRTtBQUNyQyxNQUFBLElBQUksQ0FBQ0QsTUFBTSxDQUFDSyxPQUFPLEdBQUcsSUFBSSxDQUFBO0FBQzlCLEtBQUE7QUFDSixHQUFBO0FBQ0o7Ozs7In0=
