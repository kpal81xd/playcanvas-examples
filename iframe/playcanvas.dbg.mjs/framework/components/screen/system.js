import { IndexedList } from '../../../core/indexed-list.js';
import { Vec2 } from '../../../core/math/vec2.js';
import { Component } from '../component.js';
import { ComponentSystem } from '../system.js';
import { ScreenComponent } from './component.js';
import { ScreenComponentData } from './data.js';

const _schema = ['enabled'];

/**
 * Manages creation of {@link ScreenComponent}s.
 *
 * @augments ComponentSystem
 * @category User Interface
 */
class ScreenComponentSystem extends ComponentSystem {
  /**
   * Create a new ScreenComponentSystem instance.
   *
   * @param {import('../../app-base.js').AppBase} app - The application.
   * @hideconstructor
   */
  constructor(app) {
    super(app);
    this.id = 'screen';
    this.ComponentType = ScreenComponent;
    this.DataType = ScreenComponentData;
    this.schema = _schema;
    this.windowResolution = new Vec2();

    // queue of callbacks
    this._drawOrderSyncQueue = new IndexedList();
    this.app.graphicsDevice.on('resizecanvas', this._onResize, this);
    this.app.systems.on('update', this._onUpdate, this);
    this.on('beforeremove', this.onRemoveComponent, this);
  }
  initializeComponentData(component, data, properties) {
    if (data.priority !== undefined) component.priority = data.priority;
    if (data.screenSpace !== undefined) component.screenSpace = data.screenSpace;
    component.cull = component.screenSpace;
    if (data.scaleMode !== undefined) component.scaleMode = data.scaleMode;
    if (data.scaleBlend !== undefined) component.scaleBlend = data.scaleBlend;
    if (data.resolution !== undefined) {
      if (data.resolution instanceof Vec2) {
        component._resolution.copy(data.resolution);
      } else {
        component._resolution.set(data.resolution[0], data.resolution[1]);
      }
      component.resolution = component._resolution;
    }
    if (data.referenceResolution !== undefined) {
      if (data.referenceResolution instanceof Vec2) {
        component._referenceResolution.copy(data.referenceResolution);
      } else {
        component._referenceResolution.set(data.referenceResolution[0], data.referenceResolution[1]);
      }
      component.referenceResolution = component._referenceResolution;
    }

    // queue up a draw order sync
    component.syncDrawOrder();
    super.initializeComponentData(component, data, properties);
  }
  destroy() {
    super.destroy();
    this.app.graphicsDevice.off('resizecanvas', this._onResize, this);
    this.app.systems.off('update', this._onUpdate, this);
  }
  _onUpdate(dt) {
    const components = this.store;
    for (const id in components) {
      if (components[id].entity.screen.update) components[id].entity.screen.update(dt);
    }
  }
  _onResize(width, height) {
    this.windowResolution.x = width;
    this.windowResolution.y = height;
  }
  cloneComponent(entity, clone) {
    const screen = entity.screen;
    return this.addComponent(clone, {
      enabled: screen.enabled,
      screenSpace: screen.screenSpace,
      scaleMode: screen.scaleMode,
      resolution: screen.resolution.clone(),
      referenceResolution: screen.referenceResolution.clone()
    });
  }
  onRemoveComponent(entity, component) {
    component.onRemove();
  }
  processDrawOrderSyncQueue() {
    const list = this._drawOrderSyncQueue.list();
    for (let i = 0; i < list.length; i++) {
      const item = list[i];
      item.callback.call(item.scope);
    }
    this._drawOrderSyncQueue.clear();
  }
  queueDrawOrderSync(id, fn, scope) {
    // first queued sync this frame
    // attach an event listener
    if (!this._drawOrderSyncQueue.list().length) {
      this.app.once('prerender', this.processDrawOrderSyncQueue, this);
    }
    if (!this._drawOrderSyncQueue.has(id)) {
      this._drawOrderSyncQueue.push(id, {
        callback: fn,
        scope: scope
      });
    }
  }
}
Component._buildAccessors(ScreenComponent.prototype, _schema);

export { ScreenComponentSystem };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3lzdGVtLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvc2NyZWVuL3N5c3RlbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmRleGVkTGlzdCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvaW5kZXhlZC1saXN0LmpzJztcblxuaW1wb3J0IHsgVmVjMiB9IGZyb20gJy4uLy4uLy4uL2NvcmUvbWF0aC92ZWMyLmpzJztcblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50LmpzJztcbmltcG9ydCB7IENvbXBvbmVudFN5c3RlbSB9IGZyb20gJy4uL3N5c3RlbS5qcyc7XG5cbmltcG9ydCB7IFNjcmVlbkNvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50LmpzJztcbmltcG9ydCB7IFNjcmVlbkNvbXBvbmVudERhdGEgfSBmcm9tICcuL2RhdGEuanMnO1xuXG5jb25zdCBfc2NoZW1hID0gWydlbmFibGVkJ107XG5cbi8qKlxuICogTWFuYWdlcyBjcmVhdGlvbiBvZiB7QGxpbmsgU2NyZWVuQ29tcG9uZW50fXMuXG4gKlxuICogQGF1Z21lbnRzIENvbXBvbmVudFN5c3RlbVxuICogQGNhdGVnb3J5IFVzZXIgSW50ZXJmYWNlXG4gKi9cbmNsYXNzIFNjcmVlbkNvbXBvbmVudFN5c3RlbSBleHRlbmRzIENvbXBvbmVudFN5c3RlbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IFNjcmVlbkNvbXBvbmVudFN5c3RlbSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9hcHAtYmFzZS5qcycpLkFwcEJhc2V9IGFwcCAtIFRoZSBhcHBsaWNhdGlvbi5cbiAgICAgKiBAaGlkZWNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG5cbiAgICAgICAgdGhpcy5pZCA9ICdzY3JlZW4nO1xuXG4gICAgICAgIHRoaXMuQ29tcG9uZW50VHlwZSA9IFNjcmVlbkNvbXBvbmVudDtcbiAgICAgICAgdGhpcy5EYXRhVHlwZSA9IFNjcmVlbkNvbXBvbmVudERhdGE7XG5cbiAgICAgICAgdGhpcy5zY2hlbWEgPSBfc2NoZW1hO1xuXG4gICAgICAgIHRoaXMud2luZG93UmVzb2x1dGlvbiA9IG5ldyBWZWMyKCk7XG5cbiAgICAgICAgLy8gcXVldWUgb2YgY2FsbGJhY2tzXG4gICAgICAgIHRoaXMuX2RyYXdPcmRlclN5bmNRdWV1ZSA9IG5ldyBJbmRleGVkTGlzdCgpO1xuXG4gICAgICAgIHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLm9uKCdyZXNpemVjYW52YXMnLCB0aGlzLl9vblJlc2l6ZSwgdGhpcyk7XG5cbiAgICAgICAgdGhpcy5hcHAuc3lzdGVtcy5vbigndXBkYXRlJywgdGhpcy5fb25VcGRhdGUsIHRoaXMpO1xuXG4gICAgICAgIHRoaXMub24oJ2JlZm9yZXJlbW92ZScsIHRoaXMub25SZW1vdmVDb21wb25lbnQsIHRoaXMpO1xuICAgIH1cblxuICAgIGluaXRpYWxpemVDb21wb25lbnREYXRhKGNvbXBvbmVudCwgZGF0YSwgcHJvcGVydGllcykge1xuICAgICAgICBpZiAoZGF0YS5wcmlvcml0eSAhPT0gdW5kZWZpbmVkKSBjb21wb25lbnQucHJpb3JpdHkgPSBkYXRhLnByaW9yaXR5O1xuICAgICAgICBpZiAoZGF0YS5zY3JlZW5TcGFjZSAhPT0gdW5kZWZpbmVkKSBjb21wb25lbnQuc2NyZWVuU3BhY2UgPSBkYXRhLnNjcmVlblNwYWNlO1xuICAgICAgICBjb21wb25lbnQuY3VsbCA9IGNvbXBvbmVudC5zY3JlZW5TcGFjZTtcbiAgICAgICAgaWYgKGRhdGEuc2NhbGVNb2RlICE9PSB1bmRlZmluZWQpIGNvbXBvbmVudC5zY2FsZU1vZGUgPSBkYXRhLnNjYWxlTW9kZTtcbiAgICAgICAgaWYgKGRhdGEuc2NhbGVCbGVuZCAhPT0gdW5kZWZpbmVkKSBjb21wb25lbnQuc2NhbGVCbGVuZCA9IGRhdGEuc2NhbGVCbGVuZDtcbiAgICAgICAgaWYgKGRhdGEucmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5yZXNvbHV0aW9uIGluc3RhbmNlb2YgVmVjMikge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fcmVzb2x1dGlvbi5jb3B5KGRhdGEucmVzb2x1dGlvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fcmVzb2x1dGlvbi5zZXQoZGF0YS5yZXNvbHV0aW9uWzBdLCBkYXRhLnJlc29sdXRpb25bMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9uZW50LnJlc29sdXRpb24gPSBjb21wb25lbnQuX3Jlc29sdXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEucmVmZXJlbmNlUmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5yZWZlcmVuY2VSZXNvbHV0aW9uIGluc3RhbmNlb2YgVmVjMikge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fcmVmZXJlbmNlUmVzb2x1dGlvbi5jb3B5KGRhdGEucmVmZXJlbmNlUmVzb2x1dGlvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fcmVmZXJlbmNlUmVzb2x1dGlvbi5zZXQoZGF0YS5yZWZlcmVuY2VSZXNvbHV0aW9uWzBdLCBkYXRhLnJlZmVyZW5jZVJlc29sdXRpb25bMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9uZW50LnJlZmVyZW5jZVJlc29sdXRpb24gPSBjb21wb25lbnQuX3JlZmVyZW5jZVJlc29sdXRpb247XG4gICAgICAgIH1cblxuICAgICAgICAvLyBxdWV1ZSB1cCBhIGRyYXcgb3JkZXIgc3luY1xuICAgICAgICBjb21wb25lbnQuc3luY0RyYXdPcmRlcigpO1xuICAgICAgICBzdXBlci5pbml0aWFsaXplQ29tcG9uZW50RGF0YShjb21wb25lbnQsIGRhdGEsIHByb3BlcnRpZXMpO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcblxuICAgICAgICB0aGlzLmFwcC5ncmFwaGljc0RldmljZS5vZmYoJ3Jlc2l6ZWNhbnZhcycsIHRoaXMuX29uUmVzaXplLCB0aGlzKTtcbiAgICAgICAgdGhpcy5hcHAuc3lzdGVtcy5vZmYoJ3VwZGF0ZScsIHRoaXMuX29uVXBkYXRlLCB0aGlzKTtcbiAgICB9XG5cbiAgICBfb25VcGRhdGUoZHQpIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHRoaXMuc3RvcmU7XG5cbiAgICAgICAgZm9yIChjb25zdCBpZCBpbiBjb21wb25lbnRzKSB7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50c1tpZF0uZW50aXR5LnNjcmVlbi51cGRhdGUpIGNvbXBvbmVudHNbaWRdLmVudGl0eS5zY3JlZW4udXBkYXRlKGR0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9vblJlc2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMud2luZG93UmVzb2x1dGlvbi54ID0gd2lkdGg7XG4gICAgICAgIHRoaXMud2luZG93UmVzb2x1dGlvbi55ID0gaGVpZ2h0O1xuICAgIH1cblxuICAgIGNsb25lQ29tcG9uZW50KGVudGl0eSwgY2xvbmUpIHtcbiAgICAgICAgY29uc3Qgc2NyZWVuID0gZW50aXR5LnNjcmVlbjtcblxuICAgICAgICByZXR1cm4gdGhpcy5hZGRDb21wb25lbnQoY2xvbmUsIHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHNjcmVlbi5lbmFibGVkLFxuICAgICAgICAgICAgc2NyZWVuU3BhY2U6IHNjcmVlbi5zY3JlZW5TcGFjZSxcbiAgICAgICAgICAgIHNjYWxlTW9kZTogc2NyZWVuLnNjYWxlTW9kZSxcbiAgICAgICAgICAgIHJlc29sdXRpb246IHNjcmVlbi5yZXNvbHV0aW9uLmNsb25lKCksXG4gICAgICAgICAgICByZWZlcmVuY2VSZXNvbHV0aW9uOiBzY3JlZW4ucmVmZXJlbmNlUmVzb2x1dGlvbi5jbG9uZSgpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uUmVtb3ZlQ29tcG9uZW50KGVudGl0eSwgY29tcG9uZW50KSB7XG4gICAgICAgIGNvbXBvbmVudC5vblJlbW92ZSgpO1xuICAgIH1cblxuICAgIHByb2Nlc3NEcmF3T3JkZXJTeW5jUXVldWUoKSB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSB0aGlzLl9kcmF3T3JkZXJTeW5jUXVldWUubGlzdCgpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGxpc3RbaV07XG4gICAgICAgICAgICBpdGVtLmNhbGxiYWNrLmNhbGwoaXRlbS5zY29wZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZHJhd09yZGVyU3luY1F1ZXVlLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgcXVldWVEcmF3T3JkZXJTeW5jKGlkLCBmbiwgc2NvcGUpIHtcbiAgICAgICAgLy8gZmlyc3QgcXVldWVkIHN5bmMgdGhpcyBmcmFtZVxuICAgICAgICAvLyBhdHRhY2ggYW4gZXZlbnQgbGlzdGVuZXJcbiAgICAgICAgaWYgKCF0aGlzLl9kcmF3T3JkZXJTeW5jUXVldWUubGlzdCgpLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5hcHAub25jZSgncHJlcmVuZGVyJywgdGhpcy5wcm9jZXNzRHJhd09yZGVyU3luY1F1ZXVlLCB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5fZHJhd09yZGVyU3luY1F1ZXVlLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2RyYXdPcmRlclN5bmNRdWV1ZS5wdXNoKGlkLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZuLFxuICAgICAgICAgICAgICAgIHNjb3BlOiBzY29wZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkNvbXBvbmVudC5fYnVpbGRBY2Nlc3NvcnMoU2NyZWVuQ29tcG9uZW50LnByb3RvdHlwZSwgX3NjaGVtYSk7XG5cbmV4cG9ydCB7IFNjcmVlbkNvbXBvbmVudFN5c3RlbSB9O1xuIl0sIm5hbWVzIjpbIl9zY2hlbWEiLCJTY3JlZW5Db21wb25lbnRTeXN0ZW0iLCJDb21wb25lbnRTeXN0ZW0iLCJjb25zdHJ1Y3RvciIsImFwcCIsImlkIiwiQ29tcG9uZW50VHlwZSIsIlNjcmVlbkNvbXBvbmVudCIsIkRhdGFUeXBlIiwiU2NyZWVuQ29tcG9uZW50RGF0YSIsInNjaGVtYSIsIndpbmRvd1Jlc29sdXRpb24iLCJWZWMyIiwiX2RyYXdPcmRlclN5bmNRdWV1ZSIsIkluZGV4ZWRMaXN0IiwiZ3JhcGhpY3NEZXZpY2UiLCJvbiIsIl9vblJlc2l6ZSIsInN5c3RlbXMiLCJfb25VcGRhdGUiLCJvblJlbW92ZUNvbXBvbmVudCIsImluaXRpYWxpemVDb21wb25lbnREYXRhIiwiY29tcG9uZW50IiwiZGF0YSIsInByb3BlcnRpZXMiLCJwcmlvcml0eSIsInVuZGVmaW5lZCIsInNjcmVlblNwYWNlIiwiY3VsbCIsInNjYWxlTW9kZSIsInNjYWxlQmxlbmQiLCJyZXNvbHV0aW9uIiwiX3Jlc29sdXRpb24iLCJjb3B5Iiwic2V0IiwicmVmZXJlbmNlUmVzb2x1dGlvbiIsIl9yZWZlcmVuY2VSZXNvbHV0aW9uIiwic3luY0RyYXdPcmRlciIsImRlc3Ryb3kiLCJvZmYiLCJkdCIsImNvbXBvbmVudHMiLCJzdG9yZSIsImVudGl0eSIsInNjcmVlbiIsInVwZGF0ZSIsIndpZHRoIiwiaGVpZ2h0IiwieCIsInkiLCJjbG9uZUNvbXBvbmVudCIsImNsb25lIiwiYWRkQ29tcG9uZW50IiwiZW5hYmxlZCIsIm9uUmVtb3ZlIiwicHJvY2Vzc0RyYXdPcmRlclN5bmNRdWV1ZSIsImxpc3QiLCJpIiwibGVuZ3RoIiwiaXRlbSIsImNhbGxiYWNrIiwiY2FsbCIsInNjb3BlIiwiY2xlYXIiLCJxdWV1ZURyYXdPcmRlclN5bmMiLCJmbiIsIm9uY2UiLCJoYXMiLCJwdXNoIiwiQ29tcG9uZW50IiwiX2J1aWxkQWNjZXNzb3JzIiwicHJvdG90eXBlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBVUEsTUFBTUEsT0FBTyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUE7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1DLHFCQUFxQixTQUFTQyxlQUFlLENBQUM7QUFDaEQ7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0lDLFdBQVdBLENBQUNDLEdBQUcsRUFBRTtJQUNiLEtBQUssQ0FBQ0EsR0FBRyxDQUFDLENBQUE7SUFFVixJQUFJLENBQUNDLEVBQUUsR0FBRyxRQUFRLENBQUE7SUFFbEIsSUFBSSxDQUFDQyxhQUFhLEdBQUdDLGVBQWUsQ0FBQTtJQUNwQyxJQUFJLENBQUNDLFFBQVEsR0FBR0MsbUJBQW1CLENBQUE7SUFFbkMsSUFBSSxDQUFDQyxNQUFNLEdBQUdWLE9BQU8sQ0FBQTtBQUVyQixJQUFBLElBQUksQ0FBQ1csZ0JBQWdCLEdBQUcsSUFBSUMsSUFBSSxFQUFFLENBQUE7O0FBRWxDO0FBQ0EsSUFBQSxJQUFJLENBQUNDLG1CQUFtQixHQUFHLElBQUlDLFdBQVcsRUFBRSxDQUFBO0FBRTVDLElBQUEsSUFBSSxDQUFDVixHQUFHLENBQUNXLGNBQWMsQ0FBQ0MsRUFBRSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUNDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUVoRSxJQUFBLElBQUksQ0FBQ2IsR0FBRyxDQUFDYyxPQUFPLENBQUNGLEVBQUUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDRyxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUE7SUFFbkQsSUFBSSxDQUFDSCxFQUFFLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQ0ksaUJBQWlCLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDekQsR0FBQTtBQUVBQyxFQUFBQSx1QkFBdUJBLENBQUNDLFNBQVMsRUFBRUMsSUFBSSxFQUFFQyxVQUFVLEVBQUU7QUFDakQsSUFBQSxJQUFJRCxJQUFJLENBQUNFLFFBQVEsS0FBS0MsU0FBUyxFQUFFSixTQUFTLENBQUNHLFFBQVEsR0FBR0YsSUFBSSxDQUFDRSxRQUFRLENBQUE7QUFDbkUsSUFBQSxJQUFJRixJQUFJLENBQUNJLFdBQVcsS0FBS0QsU0FBUyxFQUFFSixTQUFTLENBQUNLLFdBQVcsR0FBR0osSUFBSSxDQUFDSSxXQUFXLENBQUE7QUFDNUVMLElBQUFBLFNBQVMsQ0FBQ00sSUFBSSxHQUFHTixTQUFTLENBQUNLLFdBQVcsQ0FBQTtBQUN0QyxJQUFBLElBQUlKLElBQUksQ0FBQ00sU0FBUyxLQUFLSCxTQUFTLEVBQUVKLFNBQVMsQ0FBQ08sU0FBUyxHQUFHTixJQUFJLENBQUNNLFNBQVMsQ0FBQTtBQUN0RSxJQUFBLElBQUlOLElBQUksQ0FBQ08sVUFBVSxLQUFLSixTQUFTLEVBQUVKLFNBQVMsQ0FBQ1EsVUFBVSxHQUFHUCxJQUFJLENBQUNPLFVBQVUsQ0FBQTtBQUN6RSxJQUFBLElBQUlQLElBQUksQ0FBQ1EsVUFBVSxLQUFLTCxTQUFTLEVBQUU7QUFDL0IsTUFBQSxJQUFJSCxJQUFJLENBQUNRLFVBQVUsWUFBWW5CLElBQUksRUFBRTtRQUNqQ1UsU0FBUyxDQUFDVSxXQUFXLENBQUNDLElBQUksQ0FBQ1YsSUFBSSxDQUFDUSxVQUFVLENBQUMsQ0FBQTtBQUMvQyxPQUFDLE1BQU07QUFDSFQsUUFBQUEsU0FBUyxDQUFDVSxXQUFXLENBQUNFLEdBQUcsQ0FBQ1gsSUFBSSxDQUFDUSxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUVSLElBQUksQ0FBQ1EsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDckUsT0FBQTtBQUNBVCxNQUFBQSxTQUFTLENBQUNTLFVBQVUsR0FBR1QsU0FBUyxDQUFDVSxXQUFXLENBQUE7QUFDaEQsS0FBQTtBQUNBLElBQUEsSUFBSVQsSUFBSSxDQUFDWSxtQkFBbUIsS0FBS1QsU0FBUyxFQUFFO0FBQ3hDLE1BQUEsSUFBSUgsSUFBSSxDQUFDWSxtQkFBbUIsWUFBWXZCLElBQUksRUFBRTtRQUMxQ1UsU0FBUyxDQUFDYyxvQkFBb0IsQ0FBQ0gsSUFBSSxDQUFDVixJQUFJLENBQUNZLG1CQUFtQixDQUFDLENBQUE7QUFDakUsT0FBQyxNQUFNO0FBQ0hiLFFBQUFBLFNBQVMsQ0FBQ2Msb0JBQW9CLENBQUNGLEdBQUcsQ0FBQ1gsSUFBSSxDQUFDWSxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsRUFBRVosSUFBSSxDQUFDWSxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ2hHLE9BQUE7QUFDQWIsTUFBQUEsU0FBUyxDQUFDYSxtQkFBbUIsR0FBR2IsU0FBUyxDQUFDYyxvQkFBb0IsQ0FBQTtBQUNsRSxLQUFBOztBQUVBO0lBQ0FkLFNBQVMsQ0FBQ2UsYUFBYSxFQUFFLENBQUE7SUFDekIsS0FBSyxDQUFDaEIsdUJBQXVCLENBQUNDLFNBQVMsRUFBRUMsSUFBSSxFQUFFQyxVQUFVLENBQUMsQ0FBQTtBQUM5RCxHQUFBO0FBRUFjLEVBQUFBLE9BQU9BLEdBQUc7SUFDTixLQUFLLENBQUNBLE9BQU8sRUFBRSxDQUFBO0FBRWYsSUFBQSxJQUFJLENBQUNsQyxHQUFHLENBQUNXLGNBQWMsQ0FBQ3dCLEdBQUcsQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDdEIsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFBO0FBQ2pFLElBQUEsSUFBSSxDQUFDYixHQUFHLENBQUNjLE9BQU8sQ0FBQ3FCLEdBQUcsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDcEIsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFBO0FBQ3hELEdBQUE7RUFFQUEsU0FBU0EsQ0FBQ3FCLEVBQUUsRUFBRTtBQUNWLElBQUEsTUFBTUMsVUFBVSxHQUFHLElBQUksQ0FBQ0MsS0FBSyxDQUFBO0FBRTdCLElBQUEsS0FBSyxNQUFNckMsRUFBRSxJQUFJb0MsVUFBVSxFQUFFO01BQ3pCLElBQUlBLFVBQVUsQ0FBQ3BDLEVBQUUsQ0FBQyxDQUFDc0MsTUFBTSxDQUFDQyxNQUFNLENBQUNDLE1BQU0sRUFBRUosVUFBVSxDQUFDcEMsRUFBRSxDQUFDLENBQUNzQyxNQUFNLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDTCxFQUFFLENBQUMsQ0FBQTtBQUNwRixLQUFBO0FBQ0osR0FBQTtBQUVBdkIsRUFBQUEsU0FBU0EsQ0FBQzZCLEtBQUssRUFBRUMsTUFBTSxFQUFFO0FBQ3JCLElBQUEsSUFBSSxDQUFDcEMsZ0JBQWdCLENBQUNxQyxDQUFDLEdBQUdGLEtBQUssQ0FBQTtBQUMvQixJQUFBLElBQUksQ0FBQ25DLGdCQUFnQixDQUFDc0MsQ0FBQyxHQUFHRixNQUFNLENBQUE7QUFDcEMsR0FBQTtBQUVBRyxFQUFBQSxjQUFjQSxDQUFDUCxNQUFNLEVBQUVRLEtBQUssRUFBRTtBQUMxQixJQUFBLE1BQU1QLE1BQU0sR0FBR0QsTUFBTSxDQUFDQyxNQUFNLENBQUE7QUFFNUIsSUFBQSxPQUFPLElBQUksQ0FBQ1EsWUFBWSxDQUFDRCxLQUFLLEVBQUU7TUFDNUJFLE9BQU8sRUFBRVQsTUFBTSxDQUFDUyxPQUFPO01BQ3ZCMUIsV0FBVyxFQUFFaUIsTUFBTSxDQUFDakIsV0FBVztNQUMvQkUsU0FBUyxFQUFFZSxNQUFNLENBQUNmLFNBQVM7QUFDM0JFLE1BQUFBLFVBQVUsRUFBRWEsTUFBTSxDQUFDYixVQUFVLENBQUNvQixLQUFLLEVBQUU7QUFDckNoQixNQUFBQSxtQkFBbUIsRUFBRVMsTUFBTSxDQUFDVCxtQkFBbUIsQ0FBQ2dCLEtBQUssRUFBQztBQUMxRCxLQUFDLENBQUMsQ0FBQTtBQUNOLEdBQUE7QUFFQS9CLEVBQUFBLGlCQUFpQkEsQ0FBQ3VCLE1BQU0sRUFBRXJCLFNBQVMsRUFBRTtJQUNqQ0EsU0FBUyxDQUFDZ0MsUUFBUSxFQUFFLENBQUE7QUFDeEIsR0FBQTtBQUVBQyxFQUFBQSx5QkFBeUJBLEdBQUc7SUFDeEIsTUFBTUMsSUFBSSxHQUFHLElBQUksQ0FBQzNDLG1CQUFtQixDQUFDMkMsSUFBSSxFQUFFLENBQUE7QUFFNUMsSUFBQSxLQUFLLElBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0QsSUFBSSxDQUFDRSxNQUFNLEVBQUVELENBQUMsRUFBRSxFQUFFO0FBQ2xDLE1BQUEsTUFBTUUsSUFBSSxHQUFHSCxJQUFJLENBQUNDLENBQUMsQ0FBQyxDQUFBO01BQ3BCRSxJQUFJLENBQUNDLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDRixJQUFJLENBQUNHLEtBQUssQ0FBQyxDQUFBO0FBQ2xDLEtBQUE7QUFDQSxJQUFBLElBQUksQ0FBQ2pELG1CQUFtQixDQUFDa0QsS0FBSyxFQUFFLENBQUE7QUFDcEMsR0FBQTtBQUVBQyxFQUFBQSxrQkFBa0JBLENBQUMzRCxFQUFFLEVBQUU0RCxFQUFFLEVBQUVILEtBQUssRUFBRTtBQUM5QjtBQUNBO0lBQ0EsSUFBSSxDQUFDLElBQUksQ0FBQ2pELG1CQUFtQixDQUFDMkMsSUFBSSxFQUFFLENBQUNFLE1BQU0sRUFBRTtBQUN6QyxNQUFBLElBQUksQ0FBQ3RELEdBQUcsQ0FBQzhELElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDWCx5QkFBeUIsRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUNwRSxLQUFBO0lBRUEsSUFBSSxDQUFDLElBQUksQ0FBQzFDLG1CQUFtQixDQUFDc0QsR0FBRyxDQUFDOUQsRUFBRSxDQUFDLEVBQUU7QUFDbkMsTUFBQSxJQUFJLENBQUNRLG1CQUFtQixDQUFDdUQsSUFBSSxDQUFDL0QsRUFBRSxFQUFFO0FBQzlCdUQsUUFBQUEsUUFBUSxFQUFFSyxFQUFFO0FBQ1pILFFBQUFBLEtBQUssRUFBRUEsS0FBQUE7QUFDWCxPQUFDLENBQUMsQ0FBQTtBQUNOLEtBQUE7QUFDSixHQUFBO0FBQ0osQ0FBQTtBQUVBTyxTQUFTLENBQUNDLGVBQWUsQ0FBQy9ELGVBQWUsQ0FBQ2dFLFNBQVMsRUFBRXZFLE9BQU8sQ0FBQzs7OzsifQ==
