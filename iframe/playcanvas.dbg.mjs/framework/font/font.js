import { FONT_MSDF } from './constants.js';

/**
 * Represents the resource of a font asset.
 *
 * @category User Interface
 */
class Font {
  /**
   * Create a new Font instance.
   *
   * @param {import('../../platform/graphics/texture.js').Texture[]} textures - The font
   * textures.
   * @param {object} data - The font data.
   */
  constructor(textures, data) {
    this.type = data ? data.type || FONT_MSDF : FONT_MSDF;
    this.em = 1;

    /**
     * The font textures.
     *
     * @type {import('../../platform/graphics/texture.js').Texture[]}
     */
    this.textures = textures;

    /**
     * The font intensity.
     *
     * @type {number}
     */
    this.intensity = 0.0;

    // json data
    this._data = null;
    this.data = data;
  }
  set data(value) {
    this._data = value;
    if (!value) return;
    if (this._data.intensity !== undefined) {
      this.intensity = this._data.intensity;
    }
    if (!this._data.info) this._data.info = {};

    // check if we need to migrate to version 2
    if (!this._data.version || this._data.version < 2) {
      this._data.info.maps = [{
        width: this._data.info.width,
        height: this._data.info.height
      }];
      if (this._data.chars) {
        for (const key in this._data.chars) {
          this._data.chars[key].map = 0;
        }
      }
    }
  }
  get data() {
    return this._data;
  }
}

export { Font };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9udC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2ZyYW1ld29yay9mb250L2ZvbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRk9OVF9NU0RGIH0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIHJlc291cmNlIG9mIGEgZm9udCBhc3NldC5cbiAqXG4gKiBAY2F0ZWdvcnkgVXNlciBJbnRlcmZhY2VcbiAqL1xuY2xhc3MgRm9udCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IEZvbnQgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvdGV4dHVyZS5qcycpLlRleHR1cmVbXX0gdGV4dHVyZXMgLSBUaGUgZm9udFxuICAgICAqIHRleHR1cmVzLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIC0gVGhlIGZvbnQgZGF0YS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0dXJlcywgZGF0YSkge1xuICAgICAgICB0aGlzLnR5cGUgPSBkYXRhID8gZGF0YS50eXBlIHx8IEZPTlRfTVNERiA6IEZPTlRfTVNERjtcblxuICAgICAgICB0aGlzLmVtID0gMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGZvbnQgdGV4dHVyZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3RleHR1cmUuanMnKS5UZXh0dXJlW119XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRleHR1cmVzID0gdGV4dHVyZXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBmb250IGludGVuc2l0eS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW50ZW5zaXR5ID0gMC4wO1xuXG4gICAgICAgIC8vIGpzb24gZGF0YVxuICAgICAgICB0aGlzLl9kYXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB9XG5cbiAgICBzZXQgZGF0YSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9kYXRhID0gdmFsdWU7XG4gICAgICAgIGlmICghdmFsdWUpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgaWYgKHRoaXMuX2RhdGEuaW50ZW5zaXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZW5zaXR5ID0gdGhpcy5fZGF0YS5pbnRlbnNpdHk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuX2RhdGEuaW5mbylcbiAgICAgICAgICAgIHRoaXMuX2RhdGEuaW5mbyA9IHt9O1xuXG4gICAgICAgIC8vIGNoZWNrIGlmIHdlIG5lZWQgdG8gbWlncmF0ZSB0byB2ZXJzaW9uIDJcbiAgICAgICAgaWYgKCF0aGlzLl9kYXRhLnZlcnNpb24gfHwgdGhpcy5fZGF0YS52ZXJzaW9uIDwgMikge1xuICAgICAgICAgICAgdGhpcy5fZGF0YS5pbmZvLm1hcHMgPSBbe1xuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLl9kYXRhLmluZm8ud2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLl9kYXRhLmluZm8uaGVpZ2h0XG4gICAgICAgICAgICB9XTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX2RhdGEuY2hhcnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLl9kYXRhLmNoYXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RhdGEuY2hhcnNba2V5XS5tYXAgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEZvbnQgfTtcbiJdLCJuYW1lcyI6WyJGb250IiwiY29uc3RydWN0b3IiLCJ0ZXh0dXJlcyIsImRhdGEiLCJ0eXBlIiwiRk9OVF9NU0RGIiwiZW0iLCJpbnRlbnNpdHkiLCJfZGF0YSIsInZhbHVlIiwidW5kZWZpbmVkIiwiaW5mbyIsInZlcnNpb24iLCJtYXBzIiwid2lkdGgiLCJoZWlnaHQiLCJjaGFycyIsImtleSIsIm1hcCJdLCJtYXBwaW5ncyI6Ijs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsSUFBSSxDQUFDO0FBQ1A7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSUMsRUFBQUEsV0FBV0EsQ0FBQ0MsUUFBUSxFQUFFQyxJQUFJLEVBQUU7SUFDeEIsSUFBSSxDQUFDQyxJQUFJLEdBQUdELElBQUksR0FBR0EsSUFBSSxDQUFDQyxJQUFJLElBQUlDLFNBQVMsR0FBR0EsU0FBUyxDQUFBO0lBRXJELElBQUksQ0FBQ0MsRUFBRSxHQUFHLENBQUMsQ0FBQTs7QUFFWDtBQUNSO0FBQ0E7QUFDQTtBQUNBO0lBQ1EsSUFBSSxDQUFDSixRQUFRLEdBQUdBLFFBQVEsQ0FBQTs7QUFFeEI7QUFDUjtBQUNBO0FBQ0E7QUFDQTtJQUNRLElBQUksQ0FBQ0ssU0FBUyxHQUFHLEdBQUcsQ0FBQTs7QUFFcEI7SUFDQSxJQUFJLENBQUNDLEtBQUssR0FBRyxJQUFJLENBQUE7SUFDakIsSUFBSSxDQUFDTCxJQUFJLEdBQUdBLElBQUksQ0FBQTtBQUNwQixHQUFBO0VBRUEsSUFBSUEsSUFBSUEsQ0FBQ00sS0FBSyxFQUFFO0lBQ1osSUFBSSxDQUFDRCxLQUFLLEdBQUdDLEtBQUssQ0FBQTtJQUNsQixJQUFJLENBQUNBLEtBQUssRUFDTixPQUFBO0FBRUosSUFBQSxJQUFJLElBQUksQ0FBQ0QsS0FBSyxDQUFDRCxTQUFTLEtBQUtHLFNBQVMsRUFBRTtBQUNwQyxNQUFBLElBQUksQ0FBQ0gsU0FBUyxHQUFHLElBQUksQ0FBQ0MsS0FBSyxDQUFDRCxTQUFTLENBQUE7QUFDekMsS0FBQTtBQUVBLElBQUEsSUFBSSxDQUFDLElBQUksQ0FBQ0MsS0FBSyxDQUFDRyxJQUFJLEVBQ2hCLElBQUksQ0FBQ0gsS0FBSyxDQUFDRyxJQUFJLEdBQUcsRUFBRSxDQUFBOztBQUV4QjtBQUNBLElBQUEsSUFBSSxDQUFDLElBQUksQ0FBQ0gsS0FBSyxDQUFDSSxPQUFPLElBQUksSUFBSSxDQUFDSixLQUFLLENBQUNJLE9BQU8sR0FBRyxDQUFDLEVBQUU7QUFDL0MsTUFBQSxJQUFJLENBQUNKLEtBQUssQ0FBQ0csSUFBSSxDQUFDRSxJQUFJLEdBQUcsQ0FBQztBQUNwQkMsUUFBQUEsS0FBSyxFQUFFLElBQUksQ0FBQ04sS0FBSyxDQUFDRyxJQUFJLENBQUNHLEtBQUs7QUFDNUJDLFFBQUFBLE1BQU0sRUFBRSxJQUFJLENBQUNQLEtBQUssQ0FBQ0csSUFBSSxDQUFDSSxNQUFBQTtBQUM1QixPQUFDLENBQUMsQ0FBQTtBQUVGLE1BQUEsSUFBSSxJQUFJLENBQUNQLEtBQUssQ0FBQ1EsS0FBSyxFQUFFO1FBQ2xCLEtBQUssTUFBTUMsR0FBRyxJQUFJLElBQUksQ0FBQ1QsS0FBSyxDQUFDUSxLQUFLLEVBQUU7VUFDaEMsSUFBSSxDQUFDUixLQUFLLENBQUNRLEtBQUssQ0FBQ0MsR0FBRyxDQUFDLENBQUNDLEdBQUcsR0FBRyxDQUFDLENBQUE7QUFDakMsU0FBQTtBQUNKLE9BQUE7QUFDSixLQUFBO0FBQ0osR0FBQTtFQUVBLElBQUlmLElBQUlBLEdBQUc7SUFDUCxPQUFPLElBQUksQ0FBQ0ssS0FBSyxDQUFBO0FBQ3JCLEdBQUE7QUFDSjs7OzsifQ==
