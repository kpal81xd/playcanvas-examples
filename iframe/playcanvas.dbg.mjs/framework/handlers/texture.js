import { path } from '../../core/path.js';
import { TEXTURETYPE_RGBM, TEXTURETYPE_SWIZZLEGGGR, PIXELFORMAT_RGB8, ADDRESS_REPEAT, ADDRESS_CLAMP_TO_EDGE, ADDRESS_MIRRORED_REPEAT, FILTER_NEAREST, FILTER_LINEAR, FILTER_NEAREST_MIPMAP_NEAREST, FILTER_LINEAR_MIPMAP_NEAREST, FILTER_NEAREST_MIPMAP_LINEAR, FILTER_LINEAR_MIPMAP_LINEAR, TEXTURETYPE_DEFAULT, TEXTURETYPE_RGBE, TEXTURETYPE_RGBP, PIXELFORMAT_RGBA8, PIXELFORMAT_RGBA32F, TEXHINT_ASSET } from '../../platform/graphics/constants.js';
import { Texture } from '../../platform/graphics/texture.js';
import { TextureUtils } from '../../platform/graphics/texture-utils.js';
import { BasisParser } from '../parsers/texture/basis.js';
import { ImgParser } from '../parsers/texture/img.js';
import { KtxParser } from '../parsers/texture/ktx.js';
import { Ktx2Parser } from '../parsers/texture/ktx2.js';
import { DdsParser } from '../parsers/texture/dds.js';
import { HdrParser } from '../parsers/texture/hdr.js';
import { ResourceHandler } from './handler.js';

const JSON_ADDRESS_MODE = {
  'repeat': ADDRESS_REPEAT,
  'clamp': ADDRESS_CLAMP_TO_EDGE,
  'mirror': ADDRESS_MIRRORED_REPEAT
};
const JSON_FILTER_MODE = {
  'nearest': FILTER_NEAREST,
  'linear': FILTER_LINEAR,
  'nearest_mip_nearest': FILTER_NEAREST_MIPMAP_NEAREST,
  'linear_mip_nearest': FILTER_LINEAR_MIPMAP_NEAREST,
  'nearest_mip_linear': FILTER_NEAREST_MIPMAP_LINEAR,
  'linear_mip_linear': FILTER_LINEAR_MIPMAP_LINEAR
};
const JSON_TEXTURE_TYPE = {
  'default': TEXTURETYPE_DEFAULT,
  'rgbm': TEXTURETYPE_RGBM,
  'rgbe': TEXTURETYPE_RGBE,
  'rgbp': TEXTURETYPE_RGBP,
  'swizzleGGGR': TEXTURETYPE_SWIZZLEGGGR
};

/**
 * @interface
 * @name TextureParser
 * @description Interface to a texture parser. Implementations of this interface handle the loading
 * and opening of texture assets.
 *
 * @category Graphics
 */
class TextureParser {
  /* eslint-disable jsdoc/require-returns-check */
  /**
   * @function
   * @name TextureParser#load
   * @description Load the texture from the remote URL. When loaded (or failed),
   * use the callback to return an the raw resource data (or error).
   * @param {object} url - The URL of the resource to load.
   * @param {string} url.load - The URL to use for loading the resource.
   * @param {string} url.original - The original URL useful for identifying the resource type.
   * @param {import('./handler.js').ResourceHandlerCallback} callback - The callback used when
   * the resource is loaded or an error occurs.
   * @param {import('../asset/asset.js').Asset} [asset] - Optional asset that is passed by
   * ResourceLoader.
   */
  load(url, callback, asset) {
    throw new Error('not implemented');
  }

  /**
   * @function
   * @name TextureParser#open
   * @description Convert raw resource data into a resource instance. E.g. Take 3D model format
   * JSON and return a {@link Model}.
   * @param {string} url - The URL of the resource to open.
   * @param {*} data - The raw resource data passed by callback from {@link ResourceHandler#load}.
   * @param {import('../../platform/graphics/graphics-device.js').GraphicsDevice} device - The
   * graphics device.
   * @returns {Texture} The parsed resource data.
   */
  open(url, data, device) {
    throw new Error('not implemented');
  }
  /* eslint-enable jsdoc/require-returns-check */
}

// In the case where a texture has more than 1 level of mip data specified, but not the full
// mip chain, we generate the missing levels here.
// This is to overcome an issue where iphone xr and xs ignores further updates to the mip data
// after invoking gl.generateMipmap on the texture (which was the previous method of ensuring
// the texture's full mip chain was complete).
// NOTE: this function only resamples RGBA8 and RGBAFloat32 data.
const _completePartialMipmapChain = function _completePartialMipmapChain(texture) {
  const requiredMipLevels = TextureUtils.calcMipLevelsCount(texture._width, texture._height);
  const isHtmlElement = function isHtmlElement(object) {
    return object instanceof HTMLCanvasElement || object instanceof HTMLImageElement || object instanceof HTMLVideoElement;
  };
  if (!(texture._format === PIXELFORMAT_RGBA8 || texture._format === PIXELFORMAT_RGBA32F) || texture._volume || texture._compressed || texture._levels.length === 1 || texture._levels.length === requiredMipLevels || isHtmlElement(texture._cubemap ? texture._levels[0][0] : texture._levels[0])) {
    return;
  }
  const downsample = function downsample(width, height, data) {
    const sampledWidth = Math.max(1, width >> 1);
    const sampledHeight = Math.max(1, height >> 1);
    const sampledData = new data.constructor(sampledWidth * sampledHeight * 4);
    const xs = Math.floor(width / sampledWidth);
    const ys = Math.floor(height / sampledHeight);
    const xsys = xs * ys;
    for (let y = 0; y < sampledHeight; ++y) {
      for (let x = 0; x < sampledWidth; ++x) {
        for (let e = 0; e < 4; ++e) {
          let sum = 0;
          for (let sy = 0; sy < ys; ++sy) {
            for (let sx = 0; sx < xs; ++sx) {
              sum += data[(x * xs + sx + (y * ys + sy) * width) * 4 + e];
            }
          }
          sampledData[(x + y * sampledWidth) * 4 + e] = sum / xsys;
        }
      }
    }
    return sampledData;
  };

  // step through levels
  for (let level = texture._levels.length; level < requiredMipLevels; ++level) {
    const width = Math.max(1, texture._width >> level - 1);
    const height = Math.max(1, texture._height >> level - 1);
    if (texture._cubemap) {
      const mips = [];
      for (let face = 0; face < 6; ++face) {
        mips.push(downsample(width, height, texture._levels[level - 1][face]));
      }
      texture._levels.push(mips);
    } else {
      texture._levels.push(downsample(width, height, texture._levels[level - 1]));
    }
  }
  texture._levelsUpdated = texture._cubemap ? [[true, true, true, true, true, true]] : [true];
};

/**
 * Resource handler used for loading 2D and 3D {@link Texture} resources.
 *
 * @category Graphics
 */
class TextureHandler extends ResourceHandler {
  /**
   * Create a new TextureHandler instance.
   *
   * @param {import('../app-base.js').AppBase} app - The running {@link AppBase}.
   * @ignore
   */
  constructor(app) {
    super(app, 'texture');
    const assets = app.assets;
    const device = app.graphicsDevice;
    this._device = device;
    this._assets = assets;

    // img parser handles all browser-supported image formats, this
    // parser will be used when other more specific parsers are not found.
    this.imgParser = new ImgParser(assets, device);
    this.parsers = {
      dds: new DdsParser(assets),
      ktx: new KtxParser(assets),
      ktx2: new Ktx2Parser(assets, device),
      basis: new BasisParser(assets, device),
      hdr: new HdrParser(assets)
    };
  }
  set crossOrigin(value) {
    this.imgParser.crossOrigin = value;
  }
  get crossOrigin() {
    return this.imgParser.crossOrigin;
  }
  set maxRetries(value) {
    this.imgParser.maxRetries = value;
    for (const parser in this.parsers) {
      if (this.parsers.hasOwnProperty(parser)) {
        this.parsers[parser].maxRetries = value;
      }
    }
  }
  get maxRetries() {
    return this.imgParser.maxRetries;
  }
  _getUrlWithoutParams(url) {
    return url.indexOf('?') >= 0 ? url.split('?')[0] : url;
  }
  _getParser(url) {
    const ext = path.getExtension(this._getUrlWithoutParams(url)).toLowerCase().replace('.', '');
    return this.parsers[ext] || this.imgParser;
  }
  _getTextureOptions(asset) {
    const options = {
      profilerHint: TEXHINT_ASSET
    };
    if (asset) {
      var _asset$name;
      if (((_asset$name = asset.name) == null ? void 0 : _asset$name.length) > 0) {
        options.name = asset.name;
      }
      const assetData = asset.data;
      if (assetData.hasOwnProperty('minfilter')) {
        options.minFilter = JSON_FILTER_MODE[assetData.minfilter];
      }
      if (assetData.hasOwnProperty('magfilter')) {
        options.magFilter = JSON_FILTER_MODE[assetData.magfilter];
      }
      if (assetData.hasOwnProperty('addressu')) {
        options.addressU = JSON_ADDRESS_MODE[assetData.addressu];
      }
      if (assetData.hasOwnProperty('addressv')) {
        options.addressV = JSON_ADDRESS_MODE[assetData.addressv];
      }
      if (assetData.hasOwnProperty('mipmaps')) {
        options.mipmaps = assetData.mipmaps;
      }
      if (assetData.hasOwnProperty('anisotropy')) {
        options.anisotropy = assetData.anisotropy;
      }
      if (assetData.hasOwnProperty('flipY')) {
        options.flipY = !!assetData.flipY;
      }

      // extract asset type (this is bit of a mess)
      if (assetData.hasOwnProperty('type')) {
        options.type = JSON_TEXTURE_TYPE[assetData.type];
      } else if (assetData.hasOwnProperty('rgbm') && assetData.rgbm) {
        options.type = TEXTURETYPE_RGBM;
      } else if (asset.file && (asset.file.opt & 8) !== 0) {
        // basis normalmaps flag the variant as swizzled
        options.type = TEXTURETYPE_SWIZZLEGGGR;
      }
    }
    return options;
  }
  load(url, callback, asset) {
    if (typeof url === 'string') {
      url = {
        load: url,
        original: url
      };
    }
    this._getParser(url.original).load(url, callback, asset);
  }
  open(url, data, asset) {
    if (!url) return undefined;
    const textureOptions = this._getTextureOptions(asset);
    let texture = this._getParser(url).open(url, data, this._device, textureOptions);
    if (texture === null) {
      texture = new Texture(this._device, {
        width: 4,
        height: 4,
        format: PIXELFORMAT_RGB8
      });
    } else {
      // check if the texture has only a partial mipmap chain specified and generate the
      // missing levels if possible.
      _completePartialMipmapChain(texture);

      // if the basis transcoder unswizzled a GGGR texture, remove the flag from the asset
      if (data.unswizzledGGGR) {
        asset.file.variants.basis.opt &= ~8;
      }
    }
    return texture;
  }
  patch(asset, assets) {
    const texture = asset.resource;
    if (!texture) {
      return;
    }

    // apply asset options, based on asset.data
    const options = this._getTextureOptions(asset);
    for (const key of Object.keys(options)) {
      texture[key] = options[key];
    }
  }
}

export { TextureHandler, TextureParser };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dHVyZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2ZyYW1ld29yay9oYW5kbGVycy90ZXh0dXJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhdGggfSBmcm9tICcuLi8uLi9jb3JlL3BhdGguanMnO1xuXG5pbXBvcnQge1xuICAgIFRFWEhJTlRfQVNTRVQsXG4gICAgQUREUkVTU19DTEFNUF9UT19FREdFLCBBRERSRVNTX01JUlJPUkVEX1JFUEVBVCwgQUREUkVTU19SRVBFQVQsXG4gICAgRklMVEVSX0xJTkVBUiwgRklMVEVSX05FQVJFU1QsIEZJTFRFUl9ORUFSRVNUX01JUE1BUF9ORUFSRVNULCBGSUxURVJfTkVBUkVTVF9NSVBNQVBfTElORUFSLCBGSUxURVJfTElORUFSX01JUE1BUF9ORUFSRVNULCBGSUxURVJfTElORUFSX01JUE1BUF9MSU5FQVIsXG4gICAgUElYRUxGT1JNQVRfUkdCOCwgUElYRUxGT1JNQVRfUkdCQTgsIFBJWEVMRk9STUFUX1JHQkEzMkYsXG4gICAgVEVYVFVSRVRZUEVfREVGQVVMVCwgVEVYVFVSRVRZUEVfUkdCRSwgVEVYVFVSRVRZUEVfUkdCTSwgVEVYVFVSRVRZUEVfU1dJWlpMRUdHR1IsIFRFWFRVUkVUWVBFX1JHQlBcbn0gZnJvbSAnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IFRleHR1cmUgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy90ZXh0dXJlLmpzJztcbmltcG9ydCB7IFRleHR1cmVVdGlscyB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3RleHR1cmUtdXRpbHMuanMnO1xuXG5pbXBvcnQgeyBCYXNpc1BhcnNlciB9IGZyb20gJy4uL3BhcnNlcnMvdGV4dHVyZS9iYXNpcy5qcyc7XG5pbXBvcnQgeyBJbWdQYXJzZXIgfSBmcm9tICcuLi9wYXJzZXJzL3RleHR1cmUvaW1nLmpzJztcbmltcG9ydCB7IEt0eFBhcnNlciB9IGZyb20gJy4uL3BhcnNlcnMvdGV4dHVyZS9rdHguanMnO1xuaW1wb3J0IHsgS3R4MlBhcnNlciB9IGZyb20gJy4uL3BhcnNlcnMvdGV4dHVyZS9rdHgyLmpzJztcbmltcG9ydCB7IERkc1BhcnNlciB9IGZyb20gJy4uL3BhcnNlcnMvdGV4dHVyZS9kZHMuanMnO1xuaW1wb3J0IHsgSGRyUGFyc2VyIH0gZnJvbSAnLi4vcGFyc2Vycy90ZXh0dXJlL2hkci5qcyc7XG5cbmltcG9ydCB7IFJlc291cmNlSGFuZGxlciB9IGZyb20gJy4vaGFuZGxlci5qcyc7XG5cbmNvbnN0IEpTT05fQUREUkVTU19NT0RFID0ge1xuICAgICdyZXBlYXQnOiBBRERSRVNTX1JFUEVBVCxcbiAgICAnY2xhbXAnOiBBRERSRVNTX0NMQU1QX1RPX0VER0UsXG4gICAgJ21pcnJvcic6IEFERFJFU1NfTUlSUk9SRURfUkVQRUFUXG59O1xuXG5jb25zdCBKU09OX0ZJTFRFUl9NT0RFID0ge1xuICAgICduZWFyZXN0JzogRklMVEVSX05FQVJFU1QsXG4gICAgJ2xpbmVhcic6IEZJTFRFUl9MSU5FQVIsXG4gICAgJ25lYXJlc3RfbWlwX25lYXJlc3QnOiBGSUxURVJfTkVBUkVTVF9NSVBNQVBfTkVBUkVTVCxcbiAgICAnbGluZWFyX21pcF9uZWFyZXN0JzogRklMVEVSX0xJTkVBUl9NSVBNQVBfTkVBUkVTVCxcbiAgICAnbmVhcmVzdF9taXBfbGluZWFyJzogRklMVEVSX05FQVJFU1RfTUlQTUFQX0xJTkVBUixcbiAgICAnbGluZWFyX21pcF9saW5lYXInOiBGSUxURVJfTElORUFSX01JUE1BUF9MSU5FQVJcbn07XG5cbmNvbnN0IEpTT05fVEVYVFVSRV9UWVBFID0ge1xuICAgICdkZWZhdWx0JzogVEVYVFVSRVRZUEVfREVGQVVMVCxcbiAgICAncmdibSc6IFRFWFRVUkVUWVBFX1JHQk0sXG4gICAgJ3JnYmUnOiBURVhUVVJFVFlQRV9SR0JFLFxuICAgICdyZ2JwJzogVEVYVFVSRVRZUEVfUkdCUCxcbiAgICAnc3dpenpsZUdHR1InOiBURVhUVVJFVFlQRV9TV0laWkxFR0dHUlxufTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlXG4gKiBAbmFtZSBUZXh0dXJlUGFyc2VyXG4gKiBAZGVzY3JpcHRpb24gSW50ZXJmYWNlIHRvIGEgdGV4dHVyZSBwYXJzZXIuIEltcGxlbWVudGF0aW9ucyBvZiB0aGlzIGludGVyZmFjZSBoYW5kbGUgdGhlIGxvYWRpbmdcbiAqIGFuZCBvcGVuaW5nIG9mIHRleHR1cmUgYXNzZXRzLlxuICpcbiAqIEBjYXRlZ29yeSBHcmFwaGljc1xuICovXG5jbGFzcyBUZXh0dXJlUGFyc2VyIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBqc2RvYy9yZXF1aXJlLXJldHVybnMtY2hlY2sgKi9cbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAbmFtZSBUZXh0dXJlUGFyc2VyI2xvYWRcbiAgICAgKiBAZGVzY3JpcHRpb24gTG9hZCB0aGUgdGV4dHVyZSBmcm9tIHRoZSByZW1vdGUgVVJMLiBXaGVuIGxvYWRlZCAob3IgZmFpbGVkKSxcbiAgICAgKiB1c2UgdGhlIGNhbGxiYWNrIHRvIHJldHVybiBhbiB0aGUgcmF3IHJlc291cmNlIGRhdGEgKG9yIGVycm9yKS5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gdXJsIC0gVGhlIFVSTCBvZiB0aGUgcmVzb3VyY2UgdG8gbG9hZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsLmxvYWQgLSBUaGUgVVJMIHRvIHVzZSBmb3IgbG9hZGluZyB0aGUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybC5vcmlnaW5hbCAtIFRoZSBvcmlnaW5hbCBVUkwgdXNlZnVsIGZvciBpZGVudGlmeWluZyB0aGUgcmVzb3VyY2UgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi9oYW5kbGVyLmpzJykuUmVzb3VyY2VIYW5kbGVyQ2FsbGJhY2t9IGNhbGxiYWNrIC0gVGhlIGNhbGxiYWNrIHVzZWQgd2hlblxuICAgICAqIHRoZSByZXNvdXJjZSBpcyBsb2FkZWQgb3IgYW4gZXJyb3Igb2NjdXJzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9hc3NldC9hc3NldC5qcycpLkFzc2V0fSBbYXNzZXRdIC0gT3B0aW9uYWwgYXNzZXQgdGhhdCBpcyBwYXNzZWQgYnlcbiAgICAgKiBSZXNvdXJjZUxvYWRlci5cbiAgICAgKi9cbiAgICBsb2FkKHVybCwgY2FsbGJhY2ssIGFzc2V0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQG5hbWUgVGV4dHVyZVBhcnNlciNvcGVuXG4gICAgICogQGRlc2NyaXB0aW9uIENvbnZlcnQgcmF3IHJlc291cmNlIGRhdGEgaW50byBhIHJlc291cmNlIGluc3RhbmNlLiBFLmcuIFRha2UgM0QgbW9kZWwgZm9ybWF0XG4gICAgICogSlNPTiBhbmQgcmV0dXJuIGEge0BsaW5rIE1vZGVsfS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVGhlIFVSTCBvZiB0aGUgcmVzb3VyY2UgdG8gb3Blbi5cbiAgICAgKiBAcGFyYW0geyp9IGRhdGEgLSBUaGUgcmF3IHJlc291cmNlIGRhdGEgcGFzc2VkIGJ5IGNhbGxiYWNrIGZyb20ge0BsaW5rIFJlc291cmNlSGFuZGxlciNsb2FkfS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvZ3JhcGhpY3MtZGV2aWNlLmpzJykuR3JhcGhpY3NEZXZpY2V9IGRldmljZSAtIFRoZVxuICAgICAqIGdyYXBoaWNzIGRldmljZS5cbiAgICAgKiBAcmV0dXJucyB7VGV4dHVyZX0gVGhlIHBhcnNlZCByZXNvdXJjZSBkYXRhLlxuICAgICAqL1xuICAgIG9wZW4odXJsLCBkYXRhLCBkZXZpY2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKTtcbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSBqc2RvYy9yZXF1aXJlLXJldHVybnMtY2hlY2sgKi9cbn1cblxuLy8gSW4gdGhlIGNhc2Ugd2hlcmUgYSB0ZXh0dXJlIGhhcyBtb3JlIHRoYW4gMSBsZXZlbCBvZiBtaXAgZGF0YSBzcGVjaWZpZWQsIGJ1dCBub3QgdGhlIGZ1bGxcbi8vIG1pcCBjaGFpbiwgd2UgZ2VuZXJhdGUgdGhlIG1pc3NpbmcgbGV2ZWxzIGhlcmUuXG4vLyBUaGlzIGlzIHRvIG92ZXJjb21lIGFuIGlzc3VlIHdoZXJlIGlwaG9uZSB4ciBhbmQgeHMgaWdub3JlcyBmdXJ0aGVyIHVwZGF0ZXMgdG8gdGhlIG1pcCBkYXRhXG4vLyBhZnRlciBpbnZva2luZyBnbC5nZW5lcmF0ZU1pcG1hcCBvbiB0aGUgdGV4dHVyZSAod2hpY2ggd2FzIHRoZSBwcmV2aW91cyBtZXRob2Qgb2YgZW5zdXJpbmdcbi8vIHRoZSB0ZXh0dXJlJ3MgZnVsbCBtaXAgY2hhaW4gd2FzIGNvbXBsZXRlKS5cbi8vIE5PVEU6IHRoaXMgZnVuY3Rpb24gb25seSByZXNhbXBsZXMgUkdCQTggYW5kIFJHQkFGbG9hdDMyIGRhdGEuXG5jb25zdCBfY29tcGxldGVQYXJ0aWFsTWlwbWFwQ2hhaW4gPSBmdW5jdGlvbiAodGV4dHVyZSkge1xuXG4gICAgY29uc3QgcmVxdWlyZWRNaXBMZXZlbHMgPSBUZXh0dXJlVXRpbHMuY2FsY01pcExldmVsc0NvdW50KHRleHR1cmUuX3dpZHRoLCB0ZXh0dXJlLl9oZWlnaHQpO1xuXG4gICAgY29uc3QgaXNIdG1sRWxlbWVudCA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIChvYmplY3QgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkgfHxcbiAgICAgICAgICAgICAgIChvYmplY3QgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KSB8fFxuICAgICAgICAgICAgICAgKG9iamVjdCBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpO1xuICAgIH07XG5cbiAgICBpZiAoISh0ZXh0dXJlLl9mb3JtYXQgPT09IFBJWEVMRk9STUFUX1JHQkE4IHx8XG4gICAgICAgICAgdGV4dHVyZS5fZm9ybWF0ID09PSBQSVhFTEZPUk1BVF9SR0JBMzJGKSB8fFxuICAgICAgICAgIHRleHR1cmUuX3ZvbHVtZSB8fFxuICAgICAgICAgIHRleHR1cmUuX2NvbXByZXNzZWQgfHxcbiAgICAgICAgICB0ZXh0dXJlLl9sZXZlbHMubGVuZ3RoID09PSAxIHx8XG4gICAgICAgICAgdGV4dHVyZS5fbGV2ZWxzLmxlbmd0aCA9PT0gcmVxdWlyZWRNaXBMZXZlbHMgfHxcbiAgICAgICAgICBpc0h0bWxFbGVtZW50KHRleHR1cmUuX2N1YmVtYXAgPyB0ZXh0dXJlLl9sZXZlbHNbMF1bMF0gOiB0ZXh0dXJlLl9sZXZlbHNbMF0pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkb3duc2FtcGxlID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQsIGRhdGEpIHtcbiAgICAgICAgY29uc3Qgc2FtcGxlZFdpZHRoID0gTWF0aC5tYXgoMSwgd2lkdGggPj4gMSk7XG4gICAgICAgIGNvbnN0IHNhbXBsZWRIZWlnaHQgPSBNYXRoLm1heCgxLCBoZWlnaHQgPj4gMSk7XG4gICAgICAgIGNvbnN0IHNhbXBsZWREYXRhID0gbmV3IGRhdGEuY29uc3RydWN0b3Ioc2FtcGxlZFdpZHRoICogc2FtcGxlZEhlaWdodCAqIDQpO1xuXG4gICAgICAgIGNvbnN0IHhzID0gTWF0aC5mbG9vcih3aWR0aCAvIHNhbXBsZWRXaWR0aCk7XG4gICAgICAgIGNvbnN0IHlzID0gTWF0aC5mbG9vcihoZWlnaHQgLyBzYW1wbGVkSGVpZ2h0KTtcbiAgICAgICAgY29uc3QgeHN5cyA9IHhzICogeXM7XG5cbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBzYW1wbGVkSGVpZ2h0OyArK3kpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgc2FtcGxlZFdpZHRoOyArK3gpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IDQ7ICsrZSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3VtID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgc3kgPSAwOyBzeSA8IHlzOyArK3N5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzeCA9IDA7IHN4IDwgeHM7ICsrc3gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdW0gKz0gZGF0YVsoeCAqIHhzICsgc3ggKyAoeSAqIHlzICsgc3kpICogd2lkdGgpICogNCArIGVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZWREYXRhWyh4ICsgeSAqIHNhbXBsZWRXaWR0aCkgKiA0ICsgZV0gPSBzdW0gLyB4c3lzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzYW1wbGVkRGF0YTtcbiAgICB9O1xuXG4gICAgLy8gc3RlcCB0aHJvdWdoIGxldmVsc1xuICAgIGZvciAobGV0IGxldmVsID0gdGV4dHVyZS5fbGV2ZWxzLmxlbmd0aDsgbGV2ZWwgPCByZXF1aXJlZE1pcExldmVsczsgKytsZXZlbCkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGgubWF4KDEsIHRleHR1cmUuX3dpZHRoID4+IChsZXZlbCAtIDEpKTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5tYXgoMSwgdGV4dHVyZS5faGVpZ2h0ID4+IChsZXZlbCAtIDEpKTtcbiAgICAgICAgaWYgKHRleHR1cmUuX2N1YmVtYXApIHtcbiAgICAgICAgICAgIGNvbnN0IG1pcHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgNjsgKytmYWNlKSB7XG4gICAgICAgICAgICAgICAgbWlwcy5wdXNoKGRvd25zYW1wbGUod2lkdGgsIGhlaWdodCwgdGV4dHVyZS5fbGV2ZWxzW2xldmVsIC0gMV1bZmFjZV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRleHR1cmUuX2xldmVscy5wdXNoKG1pcHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dHVyZS5fbGV2ZWxzLnB1c2goZG93bnNhbXBsZSh3aWR0aCwgaGVpZ2h0LCB0ZXh0dXJlLl9sZXZlbHNbbGV2ZWwgLSAxXSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGV4dHVyZS5fbGV2ZWxzVXBkYXRlZCA9IHRleHR1cmUuX2N1YmVtYXAgPyBbW3RydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWVdXSA6IFt0cnVlXTtcbn07XG5cbi8qKlxuICogUmVzb3VyY2UgaGFuZGxlciB1c2VkIGZvciBsb2FkaW5nIDJEIGFuZCAzRCB7QGxpbmsgVGV4dHVyZX0gcmVzb3VyY2VzLlxuICpcbiAqIEBjYXRlZ29yeSBHcmFwaGljc1xuICovXG5jbGFzcyBUZXh0dXJlSGFuZGxlciBleHRlbmRzIFJlc291cmNlSGFuZGxlciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IFRleHR1cmVIYW5kbGVyIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL2FwcC1iYXNlLmpzJykuQXBwQmFzZX0gYXBwIC0gVGhlIHJ1bm5pbmcge0BsaW5rIEFwcEJhc2V9LlxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgc3VwZXIoYXBwLCAndGV4dHVyZScpO1xuXG4gICAgICAgIGNvbnN0IGFzc2V0cyA9IGFwcC5hc3NldHM7XG4gICAgICAgIGNvbnN0IGRldmljZSA9IGFwcC5ncmFwaGljc0RldmljZTtcblxuICAgICAgICB0aGlzLl9kZXZpY2UgPSBkZXZpY2U7XG4gICAgICAgIHRoaXMuX2Fzc2V0cyA9IGFzc2V0cztcblxuICAgICAgICAvLyBpbWcgcGFyc2VyIGhhbmRsZXMgYWxsIGJyb3dzZXItc3VwcG9ydGVkIGltYWdlIGZvcm1hdHMsIHRoaXNcbiAgICAgICAgLy8gcGFyc2VyIHdpbGwgYmUgdXNlZCB3aGVuIG90aGVyIG1vcmUgc3BlY2lmaWMgcGFyc2VycyBhcmUgbm90IGZvdW5kLlxuICAgICAgICB0aGlzLmltZ1BhcnNlciA9IG5ldyBJbWdQYXJzZXIoYXNzZXRzLCBkZXZpY2UpO1xuXG4gICAgICAgIHRoaXMucGFyc2VycyA9IHtcbiAgICAgICAgICAgIGRkczogbmV3IERkc1BhcnNlcihhc3NldHMpLFxuICAgICAgICAgICAga3R4OiBuZXcgS3R4UGFyc2VyKGFzc2V0cyksXG4gICAgICAgICAgICBrdHgyOiBuZXcgS3R4MlBhcnNlcihhc3NldHMsIGRldmljZSksXG4gICAgICAgICAgICBiYXNpczogbmV3IEJhc2lzUGFyc2VyKGFzc2V0cywgZGV2aWNlKSxcbiAgICAgICAgICAgIGhkcjogbmV3IEhkclBhcnNlcihhc3NldHMpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc2V0IGNyb3NzT3JpZ2luKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaW1nUGFyc2VyLmNyb3NzT3JpZ2luID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGNyb3NzT3JpZ2luKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbWdQYXJzZXIuY3Jvc3NPcmlnaW47XG4gICAgfVxuXG4gICAgc2V0IG1heFJldHJpZXModmFsdWUpIHtcbiAgICAgICAgdGhpcy5pbWdQYXJzZXIubWF4UmV0cmllcyA9IHZhbHVlO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnNlciBpbiB0aGlzLnBhcnNlcnMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcnNlcnMuaGFzT3duUHJvcGVydHkocGFyc2VyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyc2Vyc1twYXJzZXJdLm1heFJldHJpZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBtYXhSZXRyaWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbWdQYXJzZXIubWF4UmV0cmllcztcbiAgICB9XG5cbiAgICBfZ2V0VXJsV2l0aG91dFBhcmFtcyh1cmwpIHtcbiAgICAgICAgcmV0dXJuIHVybC5pbmRleE9mKCc/JykgPj0gMCA/IHVybC5zcGxpdCgnPycpWzBdIDogdXJsO1xuICAgIH1cblxuICAgIF9nZXRQYXJzZXIodXJsKSB7XG4gICAgICAgIGNvbnN0IGV4dCA9IHBhdGguZ2V0RXh0ZW5zaW9uKHRoaXMuX2dldFVybFdpdGhvdXRQYXJhbXModXJsKSkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCcuJywgJycpO1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZXJzW2V4dF0gfHwgdGhpcy5pbWdQYXJzZXI7XG4gICAgfVxuXG4gICAgX2dldFRleHR1cmVPcHRpb25zKGFzc2V0KSB7XG5cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC8vICNpZiBfUFJPRklMRVJcbiAgICAgICAgICAgIHByb2ZpbGVySGludDogVEVYSElOVF9BU1NFVFxuICAgICAgICAgICAgLy8gI2VuZGlmXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGFzc2V0KSB7XG4gICAgICAgICAgICBpZiAoYXNzZXQubmFtZT8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubmFtZSA9IGFzc2V0Lm5hbWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGFzc2V0RGF0YSA9IGFzc2V0LmRhdGE7XG5cbiAgICAgICAgICAgIGlmIChhc3NldERhdGEuaGFzT3duUHJvcGVydHkoJ21pbmZpbHRlcicpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5taW5GaWx0ZXIgPSBKU09OX0ZJTFRFUl9NT0RFW2Fzc2V0RGF0YS5taW5maWx0ZXJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYXNzZXREYXRhLmhhc093blByb3BlcnR5KCdtYWdmaWx0ZXInKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubWFnRmlsdGVyID0gSlNPTl9GSUxURVJfTU9ERVthc3NldERhdGEubWFnZmlsdGVyXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFzc2V0RGF0YS5oYXNPd25Qcm9wZXJ0eSgnYWRkcmVzc3UnKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuYWRkcmVzc1UgPSBKU09OX0FERFJFU1NfTU9ERVthc3NldERhdGEuYWRkcmVzc3VdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYXNzZXREYXRhLmhhc093blByb3BlcnR5KCdhZGRyZXNzdicpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5hZGRyZXNzViA9IEpTT05fQUREUkVTU19NT0RFW2Fzc2V0RGF0YS5hZGRyZXNzdl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhc3NldERhdGEuaGFzT3duUHJvcGVydHkoJ21pcG1hcHMnKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubWlwbWFwcyA9IGFzc2V0RGF0YS5taXBtYXBzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYXNzZXREYXRhLmhhc093blByb3BlcnR5KCdhbmlzb3Ryb3B5JykpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFuaXNvdHJvcHkgPSBhc3NldERhdGEuYW5pc290cm9weTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFzc2V0RGF0YS5oYXNPd25Qcm9wZXJ0eSgnZmxpcFknKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmxpcFkgPSAhIWFzc2V0RGF0YS5mbGlwWTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZXh0cmFjdCBhc3NldCB0eXBlICh0aGlzIGlzIGJpdCBvZiBhIG1lc3MpXG4gICAgICAgICAgICBpZiAoYXNzZXREYXRhLmhhc093blByb3BlcnR5KCd0eXBlJykpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnR5cGUgPSBKU09OX1RFWFRVUkVfVFlQRVthc3NldERhdGEudHlwZV07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFzc2V0RGF0YS5oYXNPd25Qcm9wZXJ0eSgncmdibScpICYmIGFzc2V0RGF0YS5yZ2JtKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy50eXBlID0gVEVYVFVSRVRZUEVfUkdCTTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNzZXQuZmlsZSAmJiAoYXNzZXQuZmlsZS5vcHQgJiA4KSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIGJhc2lzIG5vcm1hbG1hcHMgZmxhZyB0aGUgdmFyaWFudCBhcyBzd2l6emxlZFxuICAgICAgICAgICAgICAgIG9wdGlvbnMudHlwZSA9IFRFWFRVUkVUWVBFX1NXSVpaTEVHR0dSO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuXG4gICAgbG9hZCh1cmwsIGNhbGxiYWNrLCBhc3NldCkge1xuICAgICAgICBpZiAodHlwZW9mIHVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHVybCA9IHtcbiAgICAgICAgICAgICAgICBsb2FkOiB1cmwsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWw6IHVybFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2dldFBhcnNlcih1cmwub3JpZ2luYWwpLmxvYWQodXJsLCBjYWxsYmFjaywgYXNzZXQpO1xuICAgIH1cblxuICAgIG9wZW4odXJsLCBkYXRhLCBhc3NldCkge1xuICAgICAgICBpZiAoIXVybClcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG5cbiAgICAgICAgY29uc3QgdGV4dHVyZU9wdGlvbnMgPSB0aGlzLl9nZXRUZXh0dXJlT3B0aW9ucyhhc3NldCk7XG4gICAgICAgIGxldCB0ZXh0dXJlID0gdGhpcy5fZ2V0UGFyc2VyKHVybCkub3Blbih1cmwsIGRhdGEsIHRoaXMuX2RldmljZSwgdGV4dHVyZU9wdGlvbnMpO1xuXG4gICAgICAgIGlmICh0ZXh0dXJlID09PSBudWxsKSB7XG4gICAgICAgICAgICB0ZXh0dXJlID0gbmV3IFRleHR1cmUodGhpcy5fZGV2aWNlLCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDQsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA0LFxuICAgICAgICAgICAgICAgIGZvcm1hdDogUElYRUxGT1JNQVRfUkdCOFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgdGV4dHVyZSBoYXMgb25seSBhIHBhcnRpYWwgbWlwbWFwIGNoYWluIHNwZWNpZmllZCBhbmQgZ2VuZXJhdGUgdGhlXG4gICAgICAgICAgICAvLyBtaXNzaW5nIGxldmVscyBpZiBwb3NzaWJsZS5cbiAgICAgICAgICAgIF9jb21wbGV0ZVBhcnRpYWxNaXBtYXBDaGFpbih0ZXh0dXJlKTtcblxuICAgICAgICAgICAgLy8gaWYgdGhlIGJhc2lzIHRyYW5zY29kZXIgdW5zd2l6emxlZCBhIEdHR1IgdGV4dHVyZSwgcmVtb3ZlIHRoZSBmbGFnIGZyb20gdGhlIGFzc2V0XG4gICAgICAgICAgICBpZiAoZGF0YS51bnN3aXp6bGVkR0dHUikge1xuICAgICAgICAgICAgICAgIGFzc2V0LmZpbGUudmFyaWFudHMuYmFzaXMub3B0ICY9IH44O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgfVxuXG4gICAgcGF0Y2goYXNzZXQsIGFzc2V0cykge1xuICAgICAgICBjb25zdCB0ZXh0dXJlID0gYXNzZXQucmVzb3VyY2U7XG4gICAgICAgIGlmICghdGV4dHVyZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYXBwbHkgYXNzZXQgb3B0aW9ucywgYmFzZWQgb24gYXNzZXQuZGF0YVxuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fZ2V0VGV4dHVyZU9wdGlvbnMoYXNzZXQpO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvcHRpb25zKSkge1xuICAgICAgICAgICAgdGV4dHVyZVtrZXldID0gb3B0aW9uc1trZXldO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgeyBUZXh0dXJlSGFuZGxlciwgVGV4dHVyZVBhcnNlciB9O1xuIl0sIm5hbWVzIjpbIkpTT05fQUREUkVTU19NT0RFIiwiQUREUkVTU19SRVBFQVQiLCJBRERSRVNTX0NMQU1QX1RPX0VER0UiLCJBRERSRVNTX01JUlJPUkVEX1JFUEVBVCIsIkpTT05fRklMVEVSX01PREUiLCJGSUxURVJfTkVBUkVTVCIsIkZJTFRFUl9MSU5FQVIiLCJGSUxURVJfTkVBUkVTVF9NSVBNQVBfTkVBUkVTVCIsIkZJTFRFUl9MSU5FQVJfTUlQTUFQX05FQVJFU1QiLCJGSUxURVJfTkVBUkVTVF9NSVBNQVBfTElORUFSIiwiRklMVEVSX0xJTkVBUl9NSVBNQVBfTElORUFSIiwiSlNPTl9URVhUVVJFX1RZUEUiLCJURVhUVVJFVFlQRV9ERUZBVUxUIiwiVEVYVFVSRVRZUEVfUkdCTSIsIlRFWFRVUkVUWVBFX1JHQkUiLCJURVhUVVJFVFlQRV9SR0JQIiwiVEVYVFVSRVRZUEVfU1dJWlpMRUdHR1IiLCJUZXh0dXJlUGFyc2VyIiwibG9hZCIsInVybCIsImNhbGxiYWNrIiwiYXNzZXQiLCJFcnJvciIsIm9wZW4iLCJkYXRhIiwiZGV2aWNlIiwiX2NvbXBsZXRlUGFydGlhbE1pcG1hcENoYWluIiwidGV4dHVyZSIsInJlcXVpcmVkTWlwTGV2ZWxzIiwiVGV4dHVyZVV0aWxzIiwiY2FsY01pcExldmVsc0NvdW50IiwiX3dpZHRoIiwiX2hlaWdodCIsImlzSHRtbEVsZW1lbnQiLCJvYmplY3QiLCJIVE1MQ2FudmFzRWxlbWVudCIsIkhUTUxJbWFnZUVsZW1lbnQiLCJIVE1MVmlkZW9FbGVtZW50IiwiX2Zvcm1hdCIsIlBJWEVMRk9STUFUX1JHQkE4IiwiUElYRUxGT1JNQVRfUkdCQTMyRiIsIl92b2x1bWUiLCJfY29tcHJlc3NlZCIsIl9sZXZlbHMiLCJsZW5ndGgiLCJfY3ViZW1hcCIsImRvd25zYW1wbGUiLCJ3aWR0aCIsImhlaWdodCIsInNhbXBsZWRXaWR0aCIsIk1hdGgiLCJtYXgiLCJzYW1wbGVkSGVpZ2h0Iiwic2FtcGxlZERhdGEiLCJjb25zdHJ1Y3RvciIsInhzIiwiZmxvb3IiLCJ5cyIsInhzeXMiLCJ5IiwieCIsImUiLCJzdW0iLCJzeSIsInN4IiwibGV2ZWwiLCJtaXBzIiwiZmFjZSIsInB1c2giLCJfbGV2ZWxzVXBkYXRlZCIsIlRleHR1cmVIYW5kbGVyIiwiUmVzb3VyY2VIYW5kbGVyIiwiYXBwIiwiYXNzZXRzIiwiZ3JhcGhpY3NEZXZpY2UiLCJfZGV2aWNlIiwiX2Fzc2V0cyIsImltZ1BhcnNlciIsIkltZ1BhcnNlciIsInBhcnNlcnMiLCJkZHMiLCJEZHNQYXJzZXIiLCJrdHgiLCJLdHhQYXJzZXIiLCJrdHgyIiwiS3R4MlBhcnNlciIsImJhc2lzIiwiQmFzaXNQYXJzZXIiLCJoZHIiLCJIZHJQYXJzZXIiLCJjcm9zc09yaWdpbiIsInZhbHVlIiwibWF4UmV0cmllcyIsInBhcnNlciIsImhhc093blByb3BlcnR5IiwiX2dldFVybFdpdGhvdXRQYXJhbXMiLCJpbmRleE9mIiwic3BsaXQiLCJfZ2V0UGFyc2VyIiwiZXh0IiwicGF0aCIsImdldEV4dGVuc2lvbiIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsIl9nZXRUZXh0dXJlT3B0aW9ucyIsIm9wdGlvbnMiLCJwcm9maWxlckhpbnQiLCJURVhISU5UX0FTU0VUIiwiX2Fzc2V0JG5hbWUiLCJuYW1lIiwiYXNzZXREYXRhIiwibWluRmlsdGVyIiwibWluZmlsdGVyIiwibWFnRmlsdGVyIiwibWFnZmlsdGVyIiwiYWRkcmVzc1UiLCJhZGRyZXNzdSIsImFkZHJlc3NWIiwiYWRkcmVzc3YiLCJtaXBtYXBzIiwiYW5pc290cm9weSIsImZsaXBZIiwidHlwZSIsInJnYm0iLCJmaWxlIiwib3B0Iiwib3JpZ2luYWwiLCJ1bmRlZmluZWQiLCJ0ZXh0dXJlT3B0aW9ucyIsIlRleHR1cmUiLCJmb3JtYXQiLCJQSVhFTEZPUk1BVF9SR0I4IiwidW5zd2l6emxlZEdHR1IiLCJ2YXJpYW50cyIsInBhdGNoIiwicmVzb3VyY2UiLCJrZXkiLCJPYmplY3QiLCJrZXlzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFxQkEsTUFBTUEsaUJBQWlCLEdBQUc7QUFDdEIsRUFBQSxRQUFRLEVBQUVDLGNBQWM7QUFDeEIsRUFBQSxPQUFPLEVBQUVDLHFCQUFxQjtBQUM5QixFQUFBLFFBQVEsRUFBRUMsdUJBQUFBO0FBQ2QsQ0FBQyxDQUFBO0FBRUQsTUFBTUMsZ0JBQWdCLEdBQUc7QUFDckIsRUFBQSxTQUFTLEVBQUVDLGNBQWM7QUFDekIsRUFBQSxRQUFRLEVBQUVDLGFBQWE7QUFDdkIsRUFBQSxxQkFBcUIsRUFBRUMsNkJBQTZCO0FBQ3BELEVBQUEsb0JBQW9CLEVBQUVDLDRCQUE0QjtBQUNsRCxFQUFBLG9CQUFvQixFQUFFQyw0QkFBNEI7QUFDbEQsRUFBQSxtQkFBbUIsRUFBRUMsMkJBQUFBO0FBQ3pCLENBQUMsQ0FBQTtBQUVELE1BQU1DLGlCQUFpQixHQUFHO0FBQ3RCLEVBQUEsU0FBUyxFQUFFQyxtQkFBbUI7QUFDOUIsRUFBQSxNQUFNLEVBQUVDLGdCQUFnQjtBQUN4QixFQUFBLE1BQU0sRUFBRUMsZ0JBQWdCO0FBQ3hCLEVBQUEsTUFBTSxFQUFFQyxnQkFBZ0I7QUFDeEIsRUFBQSxhQUFhLEVBQUVDLHVCQUFBQTtBQUNuQixDQUFDLENBQUE7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1DLGFBQWEsQ0FBQztBQUNoQjtBQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0lDLEVBQUFBLElBQUlBLENBQUNDLEdBQUcsRUFBRUMsUUFBUSxFQUFFQyxLQUFLLEVBQUU7QUFDdkIsSUFBQSxNQUFNLElBQUlDLEtB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
