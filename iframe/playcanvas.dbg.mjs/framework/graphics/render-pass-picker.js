import { DebugGraphics } from '../../platform/graphics/debug-graphics.js';
import { BlendState } from '../../platform/graphics/blend-state.js';
import { RenderPass } from '../../platform/graphics/render-pass.js';
import { SHADER_PICK } from '../../scene/constants.js';

const tempMeshInstances = [];
const lights = [[], [], []];

/**
 * A render pass implementing rendering of mesh instances into a pick buffer.
 *
 * @ignore
 */
class RenderPassPicker extends RenderPass {
  constructor(device, renderer) {
    super(device);
    // uniform for the mesh index encoded into rgba
    this.pickColor = new Float32Array(4);
    this.renderer = renderer;
  }
  update(camera, scene, layers, mapping) {
    this.camera = camera;
    this.scene = scene;
    this.layers = layers;
    this.mapping = mapping;
  }
  execute() {
    const device = this.device;
    DebugGraphics.pushGpuMarker(device, 'PICKER');
    const {
      renderer,
      camera,
      scene,
      layers,
      mapping,
      renderTarget
    } = this;
    const srcLayers = scene.layers.layerList;
    const subLayerEnabled = scene.layers.subLayerEnabled;
    const isTransparent = scene.layers.subLayerList;
    const pickColorId = device.scope.resolve('uColor');
    const pickColor = this.pickColor;
    for (let i = 0; i < srcLayers.length; i++) {
      const srcLayer = srcLayers[i];

      // skip the layer if it does not match the provided ones
      if (layers && layers.indexOf(srcLayer) < 0) {
        continue;
      }
      if (srcLayer.enabled && subLayerEnabled[i]) {
        // if the layer is rendered by the camera
        if (srcLayer.camerasSet.has(camera.camera)) {
          const transparent = isTransparent[i];
          DebugGraphics.pushGpuMarker(device, `${srcLayer.name}(${transparent ? 'TRANSP' : 'OPAQUE'})`);

          // if the layer clears the depth
          if (srcLayer._clearDepthBuffer) {
            renderer.clear(camera.camera, false, true, false);
          }

          // Use mesh instances from the layer. Ideally we'd just pick culled instances for the camera,
          // but we have no way of knowing if culling has been performed since changes to the layer.
          // Disadvantage here is that we render all mesh instances, even those not visible by the camera.
          const meshInstances = srcLayer.meshInstances;

          // only need mesh instances with a pick flag
          for (let j = 0; j < meshInstances.length; j++) {
            const meshInstance = meshInstances[j];
            if (meshInstance.pick && meshInstance.transparent === transparent) {
              tempMeshInstances.push(meshInstance);

              // keep the index -> meshInstance index mapping
              mapping.set(meshInstance.id, meshInstance);
            }
          }
          if (tempMeshInstances.length > 0) {
            renderer.setCameraUniforms(camera.camera, renderTarget);
            renderer.renderForward(camera.camera, tempMeshInstances, lights, SHADER_PICK, meshInstance => {
              const miId = meshInstance.id;
              pickColor[0] = (miId >> 16 & 0xff) / 255;
              pickColor[1] = (miId >> 8 & 0xff) / 255;
              pickColor[2] = (miId & 0xff) / 255;
              pickColor[3] = (miId >> 24 & 0xff) / 255;
              pickColorId.setValue(pickColor);
              device.setBlendState(BlendState.NOBLEND);
            });
            tempMeshInstances.length = 0;
          }
          DebugGraphics.popGpuMarker(device);
        }
      }
    }
    DebugGraphics.popGpuMarker(device);
  }
}

export { RenderPassPicker };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyLXBhc3MtcGlja2VyLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlci1wYXNzLXBpY2tlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWJ1Z0dyYXBoaWNzIH0gZnJvbSAnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvZGVidWctZ3JhcGhpY3MuanMnO1xuaW1wb3J0IHsgQmxlbmRTdGF0ZSB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL2JsZW5kLXN0YXRlLmpzJztcbmltcG9ydCB7IFJlbmRlclBhc3MgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9yZW5kZXItcGFzcy5qcyc7XG5cbmltcG9ydCB7IFNIQURFUl9QSUNLIH0gZnJvbSAnLi4vLi4vc2NlbmUvY29uc3RhbnRzLmpzJztcblxuY29uc3QgdGVtcE1lc2hJbnN0YW5jZXMgPSBbXTtcbmNvbnN0IGxpZ2h0cyA9IFtbXSwgW10sIFtdXTtcblxuLyoqXG4gKiBBIHJlbmRlciBwYXNzIGltcGxlbWVudGluZyByZW5kZXJpbmcgb2YgbWVzaCBpbnN0YW5jZXMgaW50byBhIHBpY2sgYnVmZmVyLlxuICpcbiAqIEBpZ25vcmVcbiAqL1xuY2xhc3MgUmVuZGVyUGFzc1BpY2tlciBleHRlbmRzIFJlbmRlclBhc3Mge1xuICAgIC8vIHVuaWZvcm0gZm9yIHRoZSBtZXNoIGluZGV4IGVuY29kZWQgaW50byByZ2JhXG4gICAgcGlja0NvbG9yID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcblxuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgcmVuZGVyZXIpIHtcbiAgICAgICAgc3VwZXIoZGV2aWNlKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIH1cblxuICAgIHVwZGF0ZShjYW1lcmEsIHNjZW5lLCBsYXllcnMsIG1hcHBpbmcpIHtcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgdGhpcy5sYXllcnMgPSBsYXllcnM7XG4gICAgICAgIHRoaXMubWFwcGluZyA9IG1hcHBpbmc7XG4gICAgfVxuXG4gICAgZXhlY3V0ZSgpIHtcbiAgICAgICAgY29uc3QgZGV2aWNlID0gdGhpcy5kZXZpY2U7XG4gICAgICAgIERlYnVnR3JhcGhpY3MucHVzaEdwdU1hcmtlcihkZXZpY2UsICdQSUNLRVInKTtcblxuICAgICAgICBjb25zdCB7IHJlbmRlcmVyLCBjYW1lcmEsIHNjZW5lLCBsYXllcnMsIG1hcHBpbmcsIHJlbmRlclRhcmdldCB9ID0gdGhpcztcbiAgICAgICAgY29uc3Qgc3JjTGF5ZXJzID0gc2NlbmUubGF5ZXJzLmxheWVyTGlzdDtcbiAgICAgICAgY29uc3Qgc3ViTGF5ZXJFbmFibGVkID0gc2NlbmUubGF5ZXJzLnN1YkxheWVyRW5hYmxlZDtcbiAgICAgICAgY29uc3QgaXNUcmFuc3BhcmVudCA9IHNjZW5lLmxheWVycy5zdWJMYXllckxpc3Q7XG5cbiAgICAgICAgY29uc3QgcGlja0NvbG9ySWQgPSBkZXZpY2Uuc2NvcGUucmVzb2x2ZSgndUNvbG9yJyk7XG4gICAgICAgIGNvbnN0IHBpY2tDb2xvciA9IHRoaXMucGlja0NvbG9yO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3JjTGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzcmNMYXllciA9IHNyY0xheWVyc1tpXTtcblxuICAgICAgICAgICAgLy8gc2tpcCB0aGUgbGF5ZXIgaWYgaXQgZG9lcyBub3QgbWF0Y2ggdGhlIHByb3ZpZGVkIG9uZXNcbiAgICAgICAgICAgIGlmIChsYXllcnMgJiYgbGF5ZXJzLmluZGV4T2Yoc3JjTGF5ZXIpIDwgMCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3JjTGF5ZXIuZW5hYmxlZCAmJiBzdWJMYXllckVuYWJsZWRbaV0pIHtcblxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBsYXllciBpcyByZW5kZXJlZCBieSB0aGUgY2FtZXJhXG4gICAgICAgICAgICAgICAgaWYgKHNyY0xheWVyLmNhbWVyYXNTZXQuaGFzKGNhbWVyYS5jYW1lcmEpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhbnNwYXJlbnQgPSBpc1RyYW5zcGFyZW50W2ldO1xuICAgICAgICAgICAgICAgICAgICBEZWJ1Z0dyYXBoaWNzLnB1c2hHcHVNYXJrZXIoZGV2aWNlLCBgJHtzcmNMYXllci5uYW1lfSgke3RyYW5zcGFyZW50ID8gJ1RSQU5TUCcgOiAnT1BBUVVFJ30pYCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGxheWVyIGNsZWFycyB0aGUgZGVwdGhcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNyY0xheWVyLl9jbGVhckRlcHRoQnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5jbGVhcihjYW1lcmEuY2FtZXJhLCBmYWxzZSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIG1lc2ggaW5zdGFuY2VzIGZyb20gdGhlIGxheWVyLiBJZGVhbGx5IHdlJ2QganVzdCBwaWNrIGN1bGxlZCBpbnN0YW5jZXMgZm9yIHRoZSBjYW1lcmEsXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCB3ZSBoYXZlIG5vIHdheSBvZiBrbm93aW5nIGlmIGN1bGxpbmcgaGFzIGJlZW4gcGVyZm9ybWVkIHNpbmNlIGNoYW5nZXMgdG8gdGhlIGxheWVyLlxuICAgICAgICAgICAgICAgICAgICAvLyBEaXNhZHZhbnRhZ2UgaGVyZSBpcyB0aGF0IHdlIHJlbmRlciBhbGwgbWVzaCBpbnN0YW5jZXMsIGV2ZW4gdGhvc2Ugbm90IHZpc2libGUgYnkgdGhlIGNhbWVyYS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzaEluc3RhbmNlcyA9IHNyY0xheWVyLm1lc2hJbnN0YW5jZXM7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gb25seSBuZWVkIG1lc2ggaW5zdGFuY2VzIHdpdGggYSBwaWNrIGZsYWdcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZXNoSW5zdGFuY2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNoSW5zdGFuY2UgPSBtZXNoSW5zdGFuY2VzW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc2hJbnN0YW5jZS5waWNrICYmIG1lc2hJbnN0YW5jZS50cmFuc3BhcmVudCA9PT0gdHJhbnNwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wTWVzaEluc3RhbmNlcy5wdXNoKG1lc2hJbnN0YW5jZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBrZWVwIHRoZSBpbmRleCAtPiBtZXNoSW5zdGFuY2UgaW5kZXggbWFwcGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBpbmcuc2V0KG1lc2hJbnN0YW5jZS5pZCwgbWVzaEluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wTWVzaEluc3RhbmNlcy5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnNldENhbWVyYVVuaWZvcm1zKGNhbWVyYS5jYW1lcmEsIHJlbmRlclRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5yZW5kZXJGb3J3YXJkKGNhbWVyYS5jYW1lcmEsIHRlbXBNZXNoSW5zdGFuY2VzLCBsaWdodHMsIFNIQURFUl9QSUNLLCAobWVzaEluc3RhbmNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWlJZCA9IG1lc2hJbnN0YW5jZS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaWNrQ29sb3JbMF0gPSAoKG1pSWQgPj4gMTYpICYgMHhmZikgLyAyNTU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlja0NvbG9yWzFdID0gKChtaUlkID4+IDgpICYgMHhmZikgLyAyNTU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlja0NvbG9yWzJdID0gKG1pSWQgJiAweGZmKSAvIDI1NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaWNrQ29sb3JbM10gPSAoKG1pSWQgPj4gMjQpICYgMHhmZikgLyAyNTU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlja0NvbG9ySWQuc2V0VmFsdWUocGlja0NvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2Uuc2V0QmxlbmRTdGF0ZShCbGVuZFN0YXRlLk5PQkxFTkQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBNZXNoSW5zdGFuY2VzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBEZWJ1Z0dyYXBoaWNzLnBvcEdwdU1hcmtlcihkZXZpY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIERlYnVnR3JhcGhpY3MucG9wR3B1TWFya2VyKGRldmljZSk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBSZW5kZXJQYXNzUGlja2VyIH07XG4iXSwibmFtZXMiOlsidGVtcE1lc2hJbnN0YW5jZXMiLCJsaWdodHMiLCJSZW5kZXJQYXNzUGlja2VyIiwiUmVuZGVyUGFzcyIsImNvbnN0cnVjdG9yIiwiZGV2aWNlIiwicmVuZGVyZXIiLCJwaWNrQ29sb3IiLCJGbG9hdDMyQXJyYXkiLCJ1cGRhdGUiLCJjYW1lcmEiLCJzY2VuZSIsImxheWVycyIsIm1hcHBpbmciLCJleGVjdXRlIiwiRGVidWdHcmFwaGljcyIsInB1c2hHcHVNYXJrZXIiLCJyZW5kZXJUYXJnZXQiLCJzcmNMYXllcnMiLCJsYXllckxpc3QiLCJzdWJMYXllckVuYWJsZWQiLCJpc1RyYW5zcGFyZW50Iiwic3ViTGF5ZXJMaXN0IiwicGlja0NvbG9ySWQiLCJzY29wZSIsInJlc29sdmUiLCJpIiwibGVuZ3RoIiwic3JjTGF5ZXIiLCJpbmRleE9mIiwiZW5hYmxlZCIsImNhbWVyYXNTZXQiLCJoYXMiLCJ0cmFuc3BhcmVudCIsIm5hbWUiLCJfY2xlYXJEZXB0aEJ1ZmZlciIsImNsZWFyIiwibWVzaEluc3RhbmNlcyIsImoiLCJtZXNoSW5zdGFuY2UiLCJwaWNrIiwicHVzaCIsInNldCIsImlkIiwic2V0Q2FtZXJhVW5pZm9ybXMiLCJyZW5kZXJGb3J3YXJkIiwiU0hBREVSX1BJQ0siLCJtaUlkIiwic2V0VmFsdWUiLCJzZXRCbGVuZFN0YXRlIiwiQmxlbmRTdGF0ZSIsIk5PQkxFTkQiLCJwb3BHcHVNYXJrZXIiXSwibWFwcGluZ3MiOiI7Ozs7O0FBTUEsTUFBTUEsaUJBQWlCLEdBQUcsRUFBRSxDQUFBO0FBQzVCLE1BQU1DLE1BQU0sR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUE7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyxnQkFBZ0IsU0FBU0MsVUFBVSxDQUFDO0FBSXRDQyxFQUFBQSxXQUFXQSxDQUFDQyxNQUFNLEVBQUVDLFFBQVEsRUFBRTtJQUMxQixLQUFLLENBQUNELE1BQU0sQ0FBQyxDQUFBO0FBSmpCO0FBQUEsSUFBQSxJQUFBLENBQ0FFLFNBQVMsR0FBRyxJQUFJQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFJM0IsSUFBSSxDQUFDRixRQUFRLEdBQUdBLFFBQVEsQ0FBQTtBQUM1QixHQUFBO0VBRUFHLE1BQU1BLENBQUNDLE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxNQUFNLEVBQUVD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
