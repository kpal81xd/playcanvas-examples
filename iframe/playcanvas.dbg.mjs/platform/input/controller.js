import { type } from '../../core/core.js';
import { ACTION_KEYBOARD, ACTION_MOUSE, ACTION_GAMEPAD, PAD_1, PAD_L_STICK_Y, PAD_L_STICK_X, PAD_R_STICK_Y, PAD_R_STICK_X, EVENT_MOUSEMOVE } from './constants.js';
import { Keyboard } from './keyboard.js';
import { Mouse } from './mouse.js';

/**
 * A general input handler which handles both mouse and keyboard input assigned to named actions.
 * This allows you to define input handlers separately to defining keyboard/mouse configurations.
 *
 * @category Input
 */
class Controller {
  /**
   * Create a new instance of a Controller.
   *
   * @param {Element} [element] - Element to attach Controller to.
   * @param {object} [options] - Optional arguments.
   * @param {Keyboard} [options.keyboard] - A Keyboard object to use.
   * @param {Mouse} [options.mouse] - A Mouse object to use.
   * @param {import('./game-pads.js').GamePads} [options.gamepads] - A Gamepads object to use.
   * @example
   * const c = new pc.Controller(document);
   *
   * // Register the "fire" action and assign it to both the Enter key and the space bar.
   * c.registerKeys("fire", [pc.KEY_ENTER, pc.KEY_SPACE]);
   */
  constructor(element, options = {}) {
    this._keyboard = options.keyboard || null;
    this._mouse = options.mouse || null;
    this._gamepads = options.gamepads || null;
    this._element = null;
    this._actions = {};
    this._axes = {};
    this._axesValues = {};
    if (element) {
      this.attach(element);
    }
  }

  /**
   * Attach Controller to an Element. This is required before you can monitor for key/mouse
   * inputs.
   *
   * @param {Element} element - The element to attach mouse and keyboard event handler too.
   */
  attach(element) {
    this._element = element;
    if (this._keyboard) {
      this._keyboard.attach(element);
    }
    if (this._mouse) {
      this._mouse.attach(element);
    }
  }

  /**
   * Detach Controller from an Element. This should be done before the Controller is destroyed.
   */
  detach() {
    if (this._keyboard) {
      this._keyboard.detach();
    }
    if (this._mouse) {
      this._mouse.detach();
    }
    this._element = null;
  }

  /**
   * Disable the context menu usually activated with the right mouse button.
   */
  disableContextMenu() {
    if (!this._mouse) {
      this._enableMouse();
    }
    this._mouse.disableContextMenu();
  }

  /**
   * Enable the context menu usually activated with the right mouse button. This is enabled by
   * default.
   */
  enableContextMenu() {
    if (!this._mouse) {
      this._enableMouse();
    }
    this._mouse.enableContextMenu();
  }

  /**
   * Update the Keyboard and Mouse handlers.
   *
   * @param {object} dt - The time since the last frame.
   */
  update(dt) {
    if (this._keyboard) {
      this._keyboard.update();
    }
    if (this._mouse) {
      this._mouse.update();
    }
    if (this._gamepads) {
      this._gamepads.update();
    }

    // clear axes values
    this._axesValues = {};
    for (const key in this._axes) {
      this._axesValues[key] = [];
    }
  }

  /**
   * Helper function to append an action.
   *
   * @param {string} action_name - The name of the action.
   * @param {object} action - An action object to add.
   * @param {ACTION_KEYBOARD | ACTION_MOUSE | ACTION_GAMEPAD} action.type - The name of the action.
   * @param {number[]} [action.keys] - Keyboard: A list of keycodes e.g. `[pc.KEY_A, pc.KEY_ENTER]`.
   * @param {number} [action.button] - Mouse: e.g. `pc.MOUSEBUTTON_LEFT` - Gamepad: e.g. `pc.PAD_FACE_1`
   * @param {number} [action.pad] - Gamepad: An index of the pad to register (use {@link PAD_1}, etc).
   */
  appendAction(action_name, action) {
    this._actions[action_name] = this._actions[action_name] || [];
    this._actions[action_name].push(action);
  }

  /**
   * Create or update a action which is enabled when the supplied keys are pressed.
   *
   * @param {string} action - The name of the action.
   * @param {number[]} keys - A list of keycodes.
   */
  registerKeys(action, keys) {
    if (!this._keyboard) {
      this._enableKeyboard();
    }
    if (this._actions[action]) {
      throw new Error(`Action: ${action} already registered`);
    }
    if (keys === undefined) {
      throw new Error('Invalid button');
    }

    // convert to an array
    if (!keys.length) {
      keys = [keys];
    }

    // add keys to actions
    this.appendAction(action, {
      type: ACTION_KEYBOARD,
      keys
    });
  }

  /**
   * Create or update an action which is enabled when the supplied mouse button is pressed.
   *
   * @param {string} action - The name of the action.
   * @param {number} button - The mouse button.
   */
  registerMouse(action, button) {
    if (!this._mouse) {
      this._enableMouse();
    }
    if (button === undefined) {
      throw new Error('Invalid button');
    }

    // add mouse button to actions
    this.appendAction(action, {
      type: ACTION_MOUSE,
      button
    });
  }

  /**
   * Create or update an action which is enabled when the gamepad button is pressed.
   *
   * @param {string} action - The name of the action.
   * @param {number} pad - The index of the pad to register (use {@link PAD_1}, etc).
   * @param {number} button - The pad button.
   */
  registerPadButton(action, pad, button) {
    if (button === undefined) {
      throw new Error('Invalid button');
    }
    // add gamepad button and pad to actions
    this.appendAction(action, {
      type: ACTION_GAMEPAD,
      button,
      pad
    });
  }

  /**
   * Register an action against a controller axis.
   *
   * @param {object} [options] - Optional options object.
   * @param {number} [options.pad] - The index of the game pad to register for (use {@link PAD_1}, etc).
   */
  registerAxis(options) {
    const name = options.name;
    if (!this._axes[name]) {
      this._axes[name] = [];
    }
    const i = this._axes[name].push(name);
    options = options || {};
    options.pad = options.pad || PAD_1;
    const bind = function bind(controller, source, value, key) {
      switch (source) {
        case 'mousex':
          controller._mouse.on(EVENT_MOUSEMOVE, function (e) {
            controller._axesValues[name][i] = e.dx / 10;
          });
          break;
        case 'mousey':
          controller._mouse.on(EVENT_MOUSEMOVE, function (e) {
            controller._axesValues[name][i] = e.dy / 10;
          });
          break;
        case 'key':
          controller._axes[name].push(function () {
            return controller._keyboard.isPressed(key) ? value : 0;
          });
          break;
        case 'padrx':
          controller._axes[name].push(function () {
            return controller._gamepads.getAxis(options.pad, PAD_R_STICK_X);
          });
          break;
        case 'padry':
          controller._axes[name].push(function () {
            return controller._gamepads.getAxis(options.pad, PAD_R_STICK_Y);
          });
          break;
        case 'padlx':
          controller._axes[name].push(function () {
            return controller._gamepads.getAxis(options.pad, PAD_L_STICK_X);
          });
          break;
        case 'padly':
          controller._axes[name].push(function () {
            return controller._gamepads.getAxis(options.pad, PAD_L_STICK_Y);
          });
          break;
        default:
          throw new Error('Unknown axis');
      }
    };
    bind(this, options.positive, 1, options.positiveKey);
    if (options.negativeKey || options.negative !== options.positive) {
      bind(this, options.negative, -1, options.negativeKey);
    }
  }

  /**
   * Returns true if the current action is enabled.
   *
   * @param {string} actionName - The name of the action.
   * @returns {boolean} True if the action is enabled.
   */
  isPressed(actionName) {
    if (!this._actions[actionName]) {
      return false;
    }
    const length = this._actions[actionName].length;
    for (let index = 0; index < length; ++index) {
      const action = this._actions[actionName][index];
      switch (action.type) {
        case ACTION_KEYBOARD:
          if (this._keyboard) {
            const len = action.keys.length;
            for (let i = 0; i < len; i++) {
              if (this._keyboard.isPressed(action.keys[i])) {
                return true;
              }
            }
          }
          break;
        case ACTION_MOUSE:
          if (this._mouse && this._mouse.isPressed(action.button)) {
            return true;
          }
          break;
        case ACTION_GAMEPAD:
          if (this._gamepads && this._gamepads.isPressed(action.pad, action.button)) {
            return true;
          }
          break;
      }
    }
    return false;
  }

  /**
   * Returns true if the action was enabled this since the last update.
   *
   * @param {string} actionName - The name of the action.
   * @returns {boolean} True if the action was enabled this since the last update.
   */
  wasPressed(actionName) {
    if (!this._actions[actionName]) {
      return false;
    }
    const length = this._actions[actionName].length;
    for (let index = 0; index < length; ++index) {
      const action = this._actions[actionName][index];
      switch (action.type) {
        case ACTION_KEYBOARD:
          if (this._keyboard) {
            const len = action.keys.length;
            for (let i = 0; i < len; i++) {
              if (this._keyboard.wasPressed(action.keys[i])) {
                return true;
              }
            }
          }
          break;
        case ACTION_MOUSE:
          if (this._mouse && this._mouse.wasPressed(action.button)) {
            return true;
          }
          break;
        case ACTION_GAMEPAD:
          if (this._gamepads && this._gamepads.wasPressed(action.pad, action.button)) {
            return true;
          }
          break;
      }
    }
    return false;
  }
  getAxis(name) {
    let value = 0;
    if (this._axes[name]) {
      const len = this._axes[name].length;
      for (let i = 0; i < len; i++) {
        if (type(this._axes[name][i]) === 'function') {
          const v = this._axes[name][i]();
          if (Math.abs(v) > Math.abs(value)) {
            value = v;
          }
        } else if (this._axesValues[name]) {
          if (Math.abs(this._axesValues[name][i]) > Math.abs(value)) {
            value = this._axesValues[name][i];
          }
        }
      }
    }
    return value;
  }
  _enableMouse() {
    this._mouse = new Mouse();
    if (!this._element) {
      throw new Error('Controller must be attached to an Element');
    }
    this._mouse.attach(this._element);
  }
  _enableKeyboard() {
    this._keyboard = new Keyboard();
    if (!this._element) {
      throw new Error('Controller must be attached to an Element');
    }
    this._keyboard.attach(this._element);
  }
}

export { Controller };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udHJvbGxlci5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3BsYXRmb3JtL2lucHV0L2NvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSB9IGZyb20gJy4uLy4uL2NvcmUvY29yZS5qcyc7XG5cbmltcG9ydCB7XG4gICAgQUNUSU9OX0dBTUVQQUQsIEFDVElPTl9LRVlCT0FSRCwgQUNUSU9OX01PVVNFLFxuICAgIEVWRU5UX01PVVNFTU9WRSxcbiAgICBQQURfMSxcbiAgICBQQURfTF9TVElDS19YLCBQQURfTF9TVElDS19ZLCBQQURfUl9TVElDS19YLCBQQURfUl9TVElDS19ZXG59IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IEtleWJvYXJkIH0gZnJvbSAnLi9rZXlib2FyZC5qcyc7XG5pbXBvcnQgeyBNb3VzZSB9IGZyb20gJy4vbW91c2UuanMnO1xuXG4vKipcbiAqIEEgZ2VuZXJhbCBpbnB1dCBoYW5kbGVyIHdoaWNoIGhhbmRsZXMgYm90aCBtb3VzZSBhbmQga2V5Ym9hcmQgaW5wdXQgYXNzaWduZWQgdG8gbmFtZWQgYWN0aW9ucy5cbiAqIFRoaXMgYWxsb3dzIHlvdSB0byBkZWZpbmUgaW5wdXQgaGFuZGxlcnMgc2VwYXJhdGVseSB0byBkZWZpbmluZyBrZXlib2FyZC9tb3VzZSBjb25maWd1cmF0aW9ucy5cbiAqXG4gKiBAY2F0ZWdvcnkgSW5wdXRcbiAqL1xuY2xhc3MgQ29udHJvbGxlciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIGEgQ29udHJvbGxlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gW2VsZW1lbnRdIC0gRWxlbWVudCB0byBhdHRhY2ggQ29udHJvbGxlciB0by5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9uYWwgYXJndW1lbnRzLlxuICAgICAqIEBwYXJhbSB7S2V5Ym9hcmR9IFtvcHRpb25zLmtleWJvYXJkXSAtIEEgS2V5Ym9hcmQgb2JqZWN0IHRvIHVzZS5cbiAgICAgKiBAcGFyYW0ge01vdXNlfSBbb3B0aW9ucy5tb3VzZV0gLSBBIE1vdXNlIG9iamVjdCB0byB1c2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4vZ2FtZS1wYWRzLmpzJykuR2FtZVBhZHN9IFtvcHRpb25zLmdhbWVwYWRzXSAtIEEgR2FtZXBhZHMgb2JqZWN0IHRvIHVzZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IGMgPSBuZXcgcGMuQ29udHJvbGxlcihkb2N1bWVudCk7XG4gICAgICpcbiAgICAgKiAvLyBSZWdpc3RlciB0aGUgXCJmaXJlXCIgYWN0aW9uIGFuZCBhc3NpZ24gaXQgdG8gYm90aCB0aGUgRW50ZXIga2V5IGFuZCB0aGUgc3BhY2UgYmFyLlxuICAgICAqIGMucmVnaXN0ZXJLZXlzKFwiZmlyZVwiLCBbcGMuS0VZX0VOVEVSLCBwYy5LRVlfU1BBQ0VdKTtcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy5fa2V5Ym9hcmQgPSBvcHRpb25zLmtleWJvYXJkIHx8IG51bGw7XG4gICAgICAgIHRoaXMuX21vdXNlID0gb3B0aW9ucy5tb3VzZSB8fCBudWxsO1xuICAgICAgICB0aGlzLl9nYW1lcGFkcyA9IG9wdGlvbnMuZ2FtZXBhZHMgfHwgbnVsbDtcblxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcblxuICAgICAgICB0aGlzLl9hY3Rpb25zID0ge307XG4gICAgICAgIHRoaXMuX2F4ZXMgPSB7fTtcbiAgICAgICAgdGhpcy5fYXhlc1ZhbHVlcyA9IHt9O1xuXG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEF0dGFjaCBDb250cm9sbGVyIHRvIGFuIEVsZW1lbnQuIFRoaXMgaXMgcmVxdWlyZWQgYmVmb3JlIHlvdSBjYW4gbW9uaXRvciBmb3Iga2V5L21vdXNlXG4gICAgICogaW5wdXRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgdG8gYXR0YWNoIG1vdXNlIGFuZCBrZXlib2FyZCBldmVudCBoYW5kbGVyIHRvby5cbiAgICAgKi9cbiAgICBhdHRhY2goZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgaWYgKHRoaXMuX2tleWJvYXJkKSB7XG4gICAgICAgICAgICB0aGlzLl9rZXlib2FyZC5hdHRhY2goZWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fbW91c2UpIHtcbiAgICAgICAgICAgIHRoaXMuX21vdXNlLmF0dGFjaChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGFjaCBDb250cm9sbGVyIGZyb20gYW4gRWxlbWVudC4gVGhpcyBzaG91bGQgYmUgZG9uZSBiZWZvcmUgdGhlIENvbnRyb2xsZXIgaXMgZGVzdHJveWVkLlxuICAgICAqL1xuICAgIGRldGFjaCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2tleWJvYXJkKSB7XG4gICAgICAgICAgICB0aGlzLl9rZXlib2FyZC5kZXRhY2goKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fbW91c2UpIHtcbiAgICAgICAgICAgIHRoaXMuX21vdXNlLmRldGFjaCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc2FibGUgdGhlIGNvbnRleHQgbWVudSB1c3VhbGx5IGFjdGl2YXRlZCB3aXRoIHRoZSByaWdodCBtb3VzZSBidXR0b24uXG4gICAgICovXG4gICAgZGlzYWJsZUNvbnRleHRNZW51KCkge1xuICAgICAgICBpZiAoIXRoaXMuX21vdXNlKSB7XG4gICAgICAgICAgICB0aGlzLl9lbmFibGVNb3VzZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fbW91c2UuZGlzYWJsZUNvbnRleHRNZW51KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5hYmxlIHRoZSBjb250ZXh0IG1lbnUgdXN1YWxseSBhY3RpdmF0ZWQgd2l0aCB0aGUgcmlnaHQgbW91c2UgYnV0dG9uLiBUaGlzIGlzIGVuYWJsZWQgYnlcbiAgICAgKiBkZWZhdWx0LlxuICAgICAqL1xuICAgIGVuYWJsZUNvbnRleHRNZW51KCkge1xuICAgICAgICBpZiAoIXRoaXMuX21vdXNlKSB7XG4gICAgICAgICAgICB0aGlzLl9lbmFibGVNb3VzZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fbW91c2UuZW5hYmxlQ29udGV4dE1lbnUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIEtleWJvYXJkIGFuZCBNb3VzZSBoYW5kbGVycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBkdCAtIFRoZSB0aW1lIHNpbmNlIHRoZSBsYXN0IGZyYW1lLlxuICAgICAqL1xuICAgIHVwZGF0ZShkdCkge1xuICAgICAgICBpZiAodGhpcy5fa2V5Ym9hcmQpIHtcbiAgICAgICAgICAgIHRoaXMuX2tleWJvYXJkLnVwZGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX21vdXNlKSB7XG4gICAgICAgICAgICB0aGlzLl9tb3VzZS51cGRhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9nYW1lcGFkcykge1xuICAgICAgICAgICAgdGhpcy5fZ2FtZXBhZHMudXBkYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjbGVhciBheGVzIHZhbHVlc1xuICAgICAgICB0aGlzLl9heGVzVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuX2F4ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuX2F4ZXNWYWx1ZXNba2V5XSA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGFwcGVuZCBhbiBhY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uX25hbWUgLSBUaGUgbmFtZSBvZiB0aGUgYWN0aW9uLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhY3Rpb24gLSBBbiBhY3Rpb24gb2JqZWN0IHRvIGFkZC5cbiAgICAgKiBAcGFyYW0ge0FDVElPTl9LRVlCT0FSRCB8IEFDVElPTl9NT1VTRSB8IEFDVElPTl9HQU1FUEFEfSBhY3Rpb24udHlwZSAtIFRoZSBuYW1lIG9mIHRoZSBhY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJbXX0gW2FjdGlvbi5rZXlzXSAtIEtleWJvYXJkOiBBIGxpc3Qgb2Yga2V5Y29kZXMgZS5nLiBgW3BjLktFWV9BLCBwYy5LRVlfRU5URVJdYC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FjdGlvbi5idXR0b25dIC0gTW91c2U6IGUuZy4gYHBjLk1PVVNFQlVUVE9OX0xFRlRgIC0gR2FtZXBhZDogZS5nLiBgcGMuUEFEX0ZBQ0VfMWBcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FjdGlvbi5wYWRdIC0gR2FtZXBhZDogQW4gaW5kZXggb2YgdGhlIHBhZCB0byByZWdpc3RlciAodXNlIHtAbGluayBQQURfMX0sIGV0YykuXG4gICAgICovXG4gICAgYXBwZW5kQWN0aW9uKGFjdGlvbl9uYW1lLCBhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5fYWN0aW9uc1thY3Rpb25fbmFtZV0gPSB0aGlzLl9hY3Rpb25zW2FjdGlvbl9uYW1lXSB8fCBbXTtcbiAgICAgICAgdGhpcy5fYWN0aW9uc1thY3Rpb25fbmFtZV0ucHVzaChhY3Rpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBvciB1cGRhdGUgYSBhY3Rpb24gd2hpY2ggaXMgZW5hYmxlZCB3aGVuIHRoZSBzdXBwbGllZCBrZXlzIGFyZSBwcmVzc2VkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvbiAtIFRoZSBuYW1lIG9mIHRoZSBhY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJbXX0ga2V5cyAtIEEgbGlzdCBvZiBrZXljb2Rlcy5cbiAgICAgKi9cbiAgICByZWdpc3RlcktleXMoYWN0aW9uLCBrZXlzKSB7XG4gICAgICAgIGlmICghdGhpcy5fa2V5Ym9hcmQpIHtcbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZUtleWJvYXJkKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2FjdGlvbnNbYWN0aW9uXSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBY3Rpb246ICR7YWN0aW9ufSBhbHJlYWR5IHJlZ2lzdGVyZWRgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChrZXlzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBidXR0b24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnZlcnQgdG8gYW4gYXJyYXlcbiAgICAgICAgaWYgKCFrZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAga2V5cyA9IFtrZXlzXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCBrZXlzIHRvIGFjdGlvbnNcbiAgICAgICAgdGhpcy5hcHBlbmRBY3Rpb24oYWN0aW9uLCB7XG4gICAgICAgICAgICB0eXBlOiBBQ1RJT05fS0VZQk9BUkQsXG4gICAgICAgICAgICBrZXlzXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBvciB1cGRhdGUgYW4gYWN0aW9uIHdoaWNoIGlzIGVuYWJsZWQgd2hlbiB0aGUgc3VwcGxpZWQgbW91c2UgYnV0dG9uIGlzIHByZXNzZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uIC0gVGhlIG5hbWUgb2YgdGhlIGFjdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYnV0dG9uIC0gVGhlIG1vdXNlIGJ1dHRvbi5cbiAgICAgKi9cbiAgICByZWdpc3Rlck1vdXNlKGFjdGlvbiwgYnV0dG9uKSB7XG4gICAgICAgIGlmICghdGhpcy5fbW91c2UpIHtcbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZU1vdXNlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYnV0dG9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBidXR0b24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCBtb3VzZSBidXR0b24gdG8gYWN0aW9uc1xuICAgICAgICB0aGlzLmFwcGVuZEFjdGlvbihhY3Rpb24sIHtcbiAgICAgICAgICAgIHR5cGU6IEFDVElPTl9NT1VTRSxcbiAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgb3IgdXBkYXRlIGFuIGFjdGlvbiB3aGljaCBpcyBlbmFibGVkIHdoZW4gdGhlIGdhbWVwYWQgYnV0dG9uIGlzIHByZXNzZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uIC0gVGhlIG5hbWUgb2YgdGhlIGFjdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGFkIC0gVGhlIGluZGV4IG9mIHRoZSBwYWQgdG8gcmVnaXN0ZXIgKHVzZSB7QGxpbmsgUEFEXzF9LCBldGMpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBidXR0b24gLSBUaGUgcGFkIGJ1dHRvbi5cbiAgICAgKi9cbiAgICByZWdpc3RlclBhZEJ1dHRvbihhY3Rpb24sIHBhZCwgYnV0dG9uKSB7XG4gICAgICAgIGlmIChidXR0b24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGJ1dHRvbicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCBnYW1lcGFkIGJ1dHRvbiBhbmQgcGFkIHRvIGFjdGlvbnNcbiAgICAgICAgdGhpcy5hcHBlbmRBY3Rpb24oYWN0aW9uLCB7XG4gICAgICAgICAgICB0eXBlOiBBQ1RJT05fR0FNRVBBRCxcbiAgICAgICAgICAgIGJ1dHRvbixcbiAgICAgICAgICAgIHBhZFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhbiBhY3Rpb24gYWdhaW5zdCBhIGNvbnRyb2xsZXIgYXhpcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25hbCBvcHRpb25zIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucGFkXSAtIFRoZSBpbmRleCBvZiB0aGUgZ2FtZSBwYWQgdG8gcmVnaXN0ZXIgZm9yICh1c2Uge0BsaW5rIFBBRF8xfSwgZXRjKS5cbiAgICAgKi9cbiAgICByZWdpc3RlckF4aXMob3B0aW9ucykge1xuICAgICAgICBjb25zdCBuYW1lID0gb3B0aW9ucy5uYW1lO1xuICAgICAgICBpZiAoIXRoaXMuX2F4ZXNbbmFtZV0pIHtcbiAgICAgICAgICAgIHRoaXMuX2F4ZXNbbmFtZV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpID0gdGhpcy5fYXhlc1tuYW1lXS5wdXNoKG5hbWUpO1xuXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLnBhZCA9IG9wdGlvbnMucGFkIHx8IFBBRF8xO1xuXG4gICAgICAgIGNvbnN0IGJpbmQgPSBmdW5jdGlvbiAoY29udHJvbGxlciwgc291cmNlLCB2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ21vdXNleCc6XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuX21vdXNlLm9uKEVWRU5UX01PVVNFTU9WRSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuX2F4ZXNWYWx1ZXNbbmFtZV1baV0gPSBlLmR4IC8gMTA7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtb3VzZXknOlxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLl9tb3VzZS5vbihFVkVOVF9NT1VTRU1PVkUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLl9heGVzVmFsdWVzW25hbWVdW2ldID0gZS5keSAvIDEwO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAna2V5JzpcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5fYXhlc1tuYW1lXS5wdXNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250cm9sbGVyLl9rZXlib2FyZC5pc1ByZXNzZWQoa2V5KSA/IHZhbHVlIDogMDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3BhZHJ4JzpcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5fYXhlc1tuYW1lXS5wdXNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250cm9sbGVyLl9nYW1lcGFkcy5nZXRBeGlzKG9wdGlvbnMucGFkLCBQQURfUl9TVElDS19YKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3BhZHJ5JzpcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5fYXhlc1tuYW1lXS5wdXNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250cm9sbGVyLl9nYW1lcGFkcy5nZXRBeGlzKG9wdGlvbnMucGFkLCBQQURfUl9TVElDS19ZKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3BhZGx4JzpcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5fYXhlc1tuYW1lXS5wdXNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250cm9sbGVyLl9nYW1lcGFkcy5nZXRBeGlzKG9wdGlvbnMucGFkLCBQQURfTF9TVElDS19YKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3BhZGx5JzpcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5fYXhlc1tuYW1lXS5wdXNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250cm9sbGVyLl9nYW1lcGFkcy5nZXRBeGlzKG9wdGlvbnMucGFkLCBQQURfTF9TVElDS19ZKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBheGlzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgYmluZCh0aGlzLCBvcHRpb25zLnBvc2l0aXZlLCAxLCBvcHRpb25zLnBvc2l0aXZlS2V5KTtcbiAgICAgICAgaWYgKG9wdGlvbnMubmVnYXRpdmVLZXkgfHwgb3B0aW9ucy5uZWdhdGl2ZSAhPT0gb3B0aW9ucy5wb3NpdGl2ZSkge1xuICAgICAgICAgICAgYmluZCh0aGlzLCBvcHRpb25zLm5lZ2F0aXZlLCAtMSwgb3B0aW9ucy5uZWdhdGl2ZUtleSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGN1cnJlbnQgYWN0aW9uIGlzIGVuYWJsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBhY3Rpb24uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIGFjdGlvbiBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIGlzUHJlc3NlZChhY3Rpb25OYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy5fYWN0aW9uc1thY3Rpb25OYW1lXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5fYWN0aW9uc1thY3Rpb25OYW1lXS5sZW5ndGg7XG5cbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgKytpbmRleCkge1xuICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5fYWN0aW9uc1thY3Rpb25OYW1lXVtpbmRleF07XG4gICAgICAgICAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBBQ1RJT05fS0VZQk9BUkQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9rZXlib2FyZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuID0gYWN0aW9uLmtleXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9rZXlib2FyZC5pc1ByZXNzZWQoYWN0aW9uLmtleXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEFDVElPTl9NT1VTRTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX21vdXNlICYmIHRoaXMuX21vdXNlLmlzUHJlc3NlZChhY3Rpb24uYnV0dG9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBBQ1RJT05fR0FNRVBBRDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2dhbWVwYWRzICYmIHRoaXMuX2dhbWVwYWRzLmlzUHJlc3NlZChhY3Rpb24ucGFkLCBhY3Rpb24uYnV0dG9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYWN0aW9uIHdhcyBlbmFibGVkIHRoaXMgc2luY2UgdGhlIGxhc3QgdXBkYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvbk5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgYWN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBhY3Rpb24gd2FzIGVuYWJsZWQgdGhpcyBzaW5jZSB0aGUgbGFzdCB1cGRhdGUuXG4gICAgICovXG4gICAgd2FzUHJlc3NlZChhY3Rpb25OYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy5fYWN0aW9uc1thY3Rpb25OYW1lXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5fYWN0aW9uc1thY3Rpb25OYW1lXS5sZW5ndGg7XG5cbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgKytpbmRleCkge1xuICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5fYWN0aW9uc1thY3Rpb25OYW1lXVtpbmRleF07XG4gICAgICAgICAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBBQ1RJT05fS0VZQk9BUkQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9rZXlib2FyZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuID0gYWN0aW9uLmtleXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9rZXlib2FyZC53YXNQcmVzc2VkKGFjdGlvbi5rZXlzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBBQ1RJT05fTU9VU0U6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tb3VzZSAmJiB0aGlzLl9tb3VzZS53YXNQcmVzc2VkKGFjdGlvbi5idXR0b24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEFDVElPTl9HQU1FUEFEOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fZ2FtZXBhZHMgJiYgdGhpcy5fZ2FtZXBhZHMud2FzUHJlc3NlZChhY3Rpb24ucGFkLCBhY3Rpb24uYnV0dG9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGdldEF4aXMobmFtZSkge1xuICAgICAgICBsZXQgdmFsdWUgPSAwO1xuXG4gICAgICAgIGlmICh0aGlzLl9heGVzW25hbWVdKSB7XG4gICAgICAgICAgICBjb25zdCBsZW4gPSB0aGlzLl9heGVzW25hbWVdLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZSh0aGlzLl9heGVzW25hbWVdW2ldKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2ID0gdGhpcy5fYXhlc1tuYW1lXVtpXSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModikgPiBNYXRoLmFicyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYXhlc1ZhbHVlc1tuYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5fYXhlc1ZhbHVlc1tuYW1lXVtpXSkgPiBNYXRoLmFicyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5fYXhlc1ZhbHVlc1tuYW1lXVtpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBfZW5hYmxlTW91c2UoKSB7XG4gICAgICAgIHRoaXMuX21vdXNlID0gbmV3IE1vdXNlKCk7XG4gICAgICAgIGlmICghdGhpcy5fZWxlbWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb250cm9sbGVyIG11c3QgYmUgYXR0YWNoZWQgdG8gYW4gRWxlbWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21vdXNlLmF0dGFjaCh0aGlzLl9lbGVtZW50KTtcbiAgICB9XG5cbiAgICBfZW5hYmxlS2V5Ym9hcmQoKSB7XG4gICAgICAgIHRoaXMuX2tleWJvYXJkID0gbmV3IEtleWJvYXJkKCk7XG4gICAgICAgIGlmICghdGhpcy5fZWxlbWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb250cm9sbGVyIG11c3QgYmUgYXR0YWNoZWQgdG8gYW4gRWxlbWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2tleWJvYXJkLmF0dGFjaCh0aGlzLl9lbGVtZW50KTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IENvbnRyb2xsZXIgfTtcbiJdLCJuYW1lcyI6WyJDb250cm9sbGVyIiwiY29uc3RydWN0b3IiLCJlbGVtZW50Iiwib3B0aW9ucyIsIl9rZXlib2FyZCIsImtleWJvYXJkIiwiX21vdXNlIiwibW91c2UiLCJfZ2FtZXBhZHMiLCJnYW1lcGFkcyIsIl9lbGVtZW50IiwiX2FjdGlvbnMiLCJfYXhlcyIsIl9heGVzVmFsdWVzIiwiYXR0YWNoIiwiZGV0YWNoIiwiZGlzYWJsZUNvbnRleHRNZW51IiwiX2VuYWJsZU1vdXNlIiwiZW5hYmxlQ29udGV4dE1lbnUiLCJ1cGRhdGUiLCJkdCIsImtleSIsImFwcGVuZEFjdGlvbiIsImFjdGlvbl9uYW1lIiwiYWN0aW9uIiwicHVzaCIsInJlZ2lzdGVyS2V5cyIsImtleXMiLCJfZW5hYmxlS2V5Ym9hcmQiLCJFcnJvciIsInVuZGVmaW5lZCIsImxlbmd0aCIsInR5cGUiLCJBQ1RJT05fS0VZQk9BUkQiLCJyZWdpc3Rlck1vdXNlIiwiYnV0dG9uIiwiQUNUSU9OX01PVVNFIiwicmVnaXN0ZXJQYWRCdXR0b24iLCJwYWQiLCJBQ1RJT05fR0FNRVBBRCIsInJlZ2lzdGVyQXhpcyIsIm5hbWUiLCJpIiwiUEFEXzEiLCJiaW5kIiwiY29udHJvbGxlciIsInNvdXJjZSIsInZhbHVlIiwib24iLCJFVkVOVF9NT1VTRU1PVkUiLCJlIiwiZHgiLCJkeSIsImlzUHJlc3NlZCIsImdldEF4aXMiLCJQQURfUl9TVElDS19YIiwiUEFEX1JfU1RJQ0tfWSIsIlBBRF9MX1NUSUNLX1giLCJQQURfTF9TVElDS19ZIiwicG9zaXRpdmUiLCJwb3NpdGl2ZUtleSIsIm5lZ2F0aXZlS2V5IiwibmVnYXRpdmUiLCJhY3Rpb25OYW1lIiwiaW5kZXgiLCJsZW4iLCJ3YXNQcmVzc2VkIiwidiIsIk1hdGgiLCJhYnMiLCJNb3VzZSIsIktleWJvYXJkIl0sIm1hcHBpbmdzIjoiOzs7OztBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1BLFVBQVUsQ0FBQztBQUNiO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSUMsRUFBQUEsV0FBV0EsQ0FBQ0MsT0FBTyxFQUFFQyxPQUFPLEdBQUcsRUFBRSxFQUFFO0FBQy9CLElBQUEsSUFBSSxDQUFDQyxTQUFTLEdBQUdELE9BQU8sQ0FBQ0UsUUFBUSxJQUFJLElBQUksQ0FBQTtBQUN6QyxJQUFBLElBQUksQ0FBQ0MsTUFBTSxHQUFHSCxPQUFPLENBQUNJLEtBQUssSUFBSSxJQUFJLENBQUE7QUFDbkMsSUFBQSxJQUFJLENBQUNDLFNBQVMsR0FBR0wsT0FBTyxDQUFDTSxRQUFRLElBQUksSUFBSSxDQUFBO0lBRXpDLElBQUksQ0FBQ0MsUUFBUSxHQUFHLElBQUks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
