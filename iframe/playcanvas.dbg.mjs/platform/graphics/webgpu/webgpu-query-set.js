import { DebugHelper } from '../../../core/debug.js';

/**
 * A wrapper over the GpuQuerySet object, allowing timestamp and occlusion queries. The results
 * are copied back using staging buffers to avoid blocking.
 *
 * @ignore
 */
class WebgpuQuerySet {
  constructor(device, isTimestamp, capacity) {
    /**
     * @type {GPUQuerySet}
     */
    this.querySet = void 0;
    this.stagingBuffers = [];
    this.activeStagingBuffer = null;
    /** @type {number} */
    this.bytesPerSlot = void 0;
    this.device = device;
    this.capacity = capacity;
    this.bytesPerSlot = isTimestamp ? 8 : 4;

    // query set
    const wgpu = device.wgpu;
    this.querySet = wgpu.createQuerySet({
      type: isTimestamp ? 'timestamp' : 'occlusion',
      count: capacity
    });
    DebugHelper.setLabel(this.querySet, `QuerySet-${isTimestamp ? 'Timestamp' : 'Occlusion'}`);

    // gpu buffer for query results GPU writes to
    this.queryBuffer = wgpu.createBuffer({
      size: this.bytesPerSlot * capacity,
      usage: GPUBufferUsage.QUERY_RESOLVE | GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST
    });
    DebugHelper.setLabel(this.queryBuffer, 'QueryGpuBuffer');
  }
  destroy() {
    var _this$querySet, _this$queryBuffer;
    (_this$querySet = this.querySet) == null || _this$querySet.destroy();
    this.querySet = null;
    (_this$queryBuffer = this.queryBuffer) == null || _this$queryBuffer.destroy();
    this.queryBuffer = null;
    this.activeStagingBuffer = null;
    this.stagingBuffers.forEach(stagingBuffer => {
      stagingBuffer.destroy();
    });
    this.stagingBuffers = null;
  }
  getStagingBuffer() {
    let stagingBuffer = this.stagingBuffers.pop();
    if (!stagingBuffer) {
      stagingBuffer = this.device.wgpu.createBuffer({
        size: this.queryBuffer.size,
        usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ
      });
      DebugHelper.setLabel(this.queryBuffer, 'QueryStagingBuffer');
    }
    return stagingBuffer;
  }
  resolve(count) {
    const device = this.device;
    const commandEncoder = device.wgpu.createCommandEncoder();
    DebugHelper.setLabel(commandEncoder, 'ResolveQuerySet-Encoder');

    // copy times to the gpu buffer
    commandEncoder.resolveQuerySet(this.querySet, 0, count, this.queryBuffer, 0);

    // copy the gpu buffer to the staging buffer
    const activeStagingBuffer = this.getStagingBuffer();
    this.activeStagingBuffer = activeStagingBuffer;
    commandEncoder.copyBufferToBuffer(this.queryBuffer, 0, activeStagingBuffer, 0, this.bytesPerSlot * count);
    const cb = commandEncoder.finish();
    DebugHelper.setLabel(cb, 'ResolveQuerySet');
    device.addCommandBuffer(cb);
  }
  request(count, renderVersion) {
    const stagingBuffer = this.activeStagingBuffer;
    this.activeStagingBuffer = null;
    return stagingBuffer.mapAsync(GPUMapMode.READ).then(() => {
      var _this$stagingBuffers;
      // timestamps in nanoseconds. Note that this array is valid only till we unmap the staging buffer.
      const srcTimings = new BigInt64Array(stagingBuffer.getMappedRange());

      // convert to ms per sample pair
      const timings = [];
      for (let i = 0; i < count; i++) {
        timings.push(Number(srcTimings[i * 2 + 1] - srcTimings[i * 2]) * 0.000001);
      }
      stagingBuffer.unmap();
      (_this$stagingBuffers = this.stagingBuffers) == null || _this$stagingBuffers.push(stagingBuffer);
      return {
        renderVersion,
        timings
      };
    });
  }
}

export { WebgpuQuerySet };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViZ3B1LXF1ZXJ5LXNldC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3BsYXRmb3JtL2dyYXBoaWNzL3dlYmdwdS93ZWJncHUtcXVlcnktc2V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERlYnVnSGVscGVyIH0gZnJvbSBcIi4uLy4uLy4uL2NvcmUvZGVidWcuanNcIjtcblxuLyoqXG4gKiBBIHdyYXBwZXIgb3ZlciB0aGUgR3B1UXVlcnlTZXQgb2JqZWN0LCBhbGxvd2luZyB0aW1lc3RhbXAgYW5kIG9jY2x1c2lvbiBxdWVyaWVzLiBUaGUgcmVzdWx0c1xuICogYXJlIGNvcGllZCBiYWNrIHVzaW5nIHN0YWdpbmcgYnVmZmVycyB0byBhdm9pZCBibG9ja2luZy5cbiAqXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIFdlYmdwdVF1ZXJ5U2V0IHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7R1BVUXVlcnlTZXR9XG4gICAgICovXG4gICAgcXVlcnlTZXQ7XG5cbiAgICBzdGFnaW5nQnVmZmVycyA9IFtdO1xuXG4gICAgYWN0aXZlU3RhZ2luZ0J1ZmZlciA9IG51bGw7XG5cbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICBieXRlc1BlclNsb3Q7XG5cbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGlzVGltZXN0YW1wLCBjYXBhY2l0eSkge1xuICAgICAgICB0aGlzLmRldmljZSA9IGRldmljZTtcbiAgICAgICAgdGhpcy5jYXBhY2l0eSA9IGNhcGFjaXR5O1xuICAgICAgICB0aGlzLmJ5dGVzUGVyU2xvdCA9IGlzVGltZXN0YW1wID8gOCA6IDQ7XG5cbiAgICAgICAgLy8gcXVlcnkgc2V0XG4gICAgICAgIGNvbnN0IHdncHUgPSBkZXZpY2Uud2dwdTtcbiAgICAgICAgdGhpcy5xdWVyeVNldCA9IHdncHUuY3JlYXRlUXVlcnlTZXQoe1xuICAgICAgICAgICAgdHlwZTogaXNUaW1lc3RhbXAgPyAndGltZXN0YW1wJyA6ICdvY2NsdXNpb24nLFxuICAgICAgICAgICAgY291bnQ6IGNhcGFjaXR5XG4gICAgICAgIH0pO1xuICAgICAgICBEZWJ1Z0hlbHBlci5zZXRMYWJlbCh0aGlzLnF1ZXJ5U2V0LCBgUXVlcnlTZXQtJHtpc1RpbWVzdGFtcCA/ICdUaW1lc3RhbXAnIDogJ09jY2x1c2lvbid9YCk7XG5cbiAgICAgICAgLy8gZ3B1IGJ1ZmZlciBmb3IgcXVlcnkgcmVzdWx0cyBHUFUgd3JpdGVzIHRvXG4gICAgICAgIHRoaXMucXVlcnlCdWZmZXIgPSB3Z3B1LmNyZWF0ZUJ1ZmZlcih7XG4gICAgICAgICAgICBzaXplOiB0aGlzLmJ5dGVzUGVyU2xvdCAqIGNhcGFjaXR5LFxuICAgICAgICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlFVRVJZX1JFU09MVkUgfCBHUFVCdWZmZXJVc2FnZS5TVE9SQUdFIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9TUkMgfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVFxuICAgICAgICB9KTtcbiAgICAgICAgRGVidWdIZWxwZXIuc2V0TGFiZWwodGhpcy5xdWVyeUJ1ZmZlciwgJ1F1ZXJ5R3B1QnVmZmVyJyk7XG4gICAgfVxuXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5xdWVyeVNldD8uZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnF1ZXJ5U2V0ID0gbnVsbDtcblxuICAgICAgICB0aGlzLnF1ZXJ5QnVmZmVyPy5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMucXVlcnlCdWZmZXIgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuYWN0aXZlU3RhZ2luZ0J1ZmZlciA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5zdGFnaW5nQnVmZmVycy5mb3JFYWNoKChzdGFnaW5nQnVmZmVyKSA9PiB7XG4gICAgICAgICAgICBzdGFnaW5nQnVmZmVyLmRlc3Ryb3koKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RhZ2luZ0J1ZmZlcnMgPSBudWxsO1xuICAgIH1cblxuICAgIGdldFN0YWdpbmdCdWZmZXIoKSB7XG4gICAgICAgIGxldCBzdGFnaW5nQnVmZmVyID0gdGhpcy5zdGFnaW5nQnVmZmVycy5wb3AoKTtcbiAgICAgICAgaWYgKCFzdGFnaW5nQnVmZmVyKSB7XG4gICAgICAgICAgICBzdGFnaW5nQnVmZmVyID0gdGhpcy5kZXZpY2Uud2dwdS5jcmVhdGVCdWZmZXIoe1xuICAgICAgICAgICAgICAgIHNpemU6IHRoaXMucXVlcnlCdWZmZXIuc2l6ZSxcbiAgICAgICAgICAgICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QgfCBHUFVCdWZmZXJVc2FnZS5NQVBfUkVBRFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBEZWJ1Z0hlbHBlci5zZXRMYWJlbCh0aGlzLnF1ZXJ5QnVmZmVyLCAnUXVlcnlTdGFnaW5nQnVmZmVyJyk7XG5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhZ2luZ0J1ZmZlcjtcbiAgICB9XG5cbiAgICByZXNvbHZlKGNvdW50KSB7XG4gICAgICAgIGNvbnN0IGRldmljZSA9IHRoaXMuZGV2aWNlO1xuICAgICAgICBjb25zdCBjb21tYW5kRW5jb2RlciA9IGRldmljZS53Z3B1LmNyZWF0ZUNvbW1hbmRFbmNvZGVyKCk7XG4gICAgICAgIERlYnVnSGVscGVyLnNldExhYmVsKGNvbW1hbmRFbmNvZGVyLCAnUmVzb2x2ZVF1ZXJ5U2V0LUVuY29kZXInKTtcblxuICAgICAgICAvLyBjb3B5IHRpbWVzIHRvIHRoZSBncHUgYnVmZmVyXG4gICAgICAgIGNvbW1hbmRFbmNvZGVyLnJlc29sdmVRdWVyeVNldCh0aGlzLnF1ZXJ5U2V0LCAwLCBjb3VudCwgdGhpcy5xdWVyeUJ1ZmZlciwgMCk7XG5cbiAgICAgICAgLy8gY29weSB0aGUgZ3B1IGJ1ZmZlciB0byB0aGUgc3RhZ2luZyBidWZmZXJcbiAgICAgICAgY29uc3QgYWN0aXZlU3RhZ2luZ0J1ZmZlciA9IHRoaXMuZ2V0U3RhZ2luZ0J1ZmZlcigpO1xuICAgICAgICB0aGlzLmFjdGl2ZVN0YWdpbmdCdWZmZXIgPSBhY3RpdmVTdGFnaW5nQnVmZmVyO1xuXG4gICAgICAgIGNvbW1hbmRFbmNvZGVyLmNvcHlCdWZmZXJUb0J1ZmZlcih0aGlzLnF1ZXJ5QnVmZmVyLCAwLCBhY3RpdmVTdGFnaW5nQnVmZmVyLCAwLCB0aGlzLmJ5dGVzUGVyU2xvdCAqIGNvdW50KTtcblxuICAgICAgICBjb25zdCBjYiA9IGNvbW1hbmRFbmNvZGVyLmZpbmlzaCgpO1xuICAgICAgICBEZWJ1Z0hlbHBlci5zZXRMYWJlbChjYiwgJ1Jlc29sdmVRdWVyeVNldCcpO1xuICAgICAgICBkZXZpY2UuYWRkQ29tbWFuZEJ1ZmZlcihjYik7XG4gICAgfVxuXG4gICAgcmVxdWVzdChjb3VudCwgcmVuZGVyVmVyc2lvbikge1xuICAgICAgICBjb25zdCBzdGFnaW5nQnVmZmVyID0gdGhpcy5hY3RpdmVTdGFnaW5nQnVmZmVyO1xuICAgICAgICB0aGlzLmFjdGl2ZVN0YWdpbmdCdWZmZXIgPSBudWxsO1xuXG4gICAgICAgIHJldHVybiBzdGFnaW5nQnVmZmVyLm1hcEFzeW5jKEdQVU1hcE1vZGUuUkVBRCkudGhlbigoKSA9PiB7XG5cbiAgICAgICAgICAgIC8vIHRpbWVzdGFtcHMgaW4gbmFub3NlY29uZHMuIE5vdGUgdGhhdCB0aGlzIGFycmF5IGlzIHZhbGlkIG9ubHkgdGlsbCB3ZSB1bm1hcCB0aGUgc3RhZ2luZyBidWZmZXIuXG4gICAgICAgICAgICBjb25zdCBzcmNUaW1pbmdzID0gbmV3IEJpZ0ludDY0QXJyYXkoc3RhZ2luZ0J1ZmZlci5nZXRNYXBwZWRSYW5nZSgpKTtcblxuICAgICAgICAgICAgLy8gY29udmVydCB0byBtcyBwZXIgc2FtcGxlIHBhaXJcbiAgICAgICAgICAgIGNvbnN0IHRpbWluZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHRpbWluZ3MucHVzaChOdW1iZXIoc3JjVGltaW5nc1tpICogMiArIDFdIC0gc3JjVGltaW5nc1tpICogMl0pICogMC4wMDAwMDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGFnaW5nQnVmZmVyLnVubWFwKCk7XG4gICAgICAgICAgICB0aGlzLnN0YWdpbmdCdWZmZXJzPy5wdXNoKHN0YWdpbmdCdWZmZXIpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlbmRlclZlcnNpb24sXG4gICAgICAgICAgICAgICAgdGltaW5nc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBXZWJncHVRdWVyeVNldCB9O1xuIl0sIm5hbWVzIjpbIldlYmdwdVF1ZXJ5U2V0IiwiY29uc3RydWN0b3IiLCJkZXZpY2UiLCJpc1RpbWVzdGFtcCIsImNhcGFjaXR5IiwicXVlcnlTZXQiLCJzdGFnaW5nQnVmZmVycyIsImFjdGl2ZVN0YWdpbmdCdWZmZXIiLCJieXRlc1BlclNsb3QiLCJ3Z3B1IiwiY3JlYXRlUXVlcnlTZXQiLCJ0eXBlIiwiY291bnQiLCJEZWJ1Z0hlbHBlciIsInNldExhYmVsIiwicXVlcnlCdWZmZXIiLCJjcmVhdGVCdWZmZXIiLCJzaXplIiwidXNhZ2UiLCJHUFVCdWZmZXJVc2FnZSIsIlFVRVJZX1JFU09MVkUiLCJTVE9SQUdFIiwiQ09QWV9TUkMiLCJDT1BZX0RTVCIsImRlc3Ryb3kiLCJfdGhpcyRxdWVyeVNldCIsIl90aGlzJHF1ZXJ5QnVmZmVyIiwiZm9yRWFjaCIsInN0YWdpbmdCdWZmZXIiLCJnZXRTdGFnaW5nQnVmZmVyIiwicG9wIiwiTUFQX1JFQUQiLCJyZXNvbHZlIiwiY29tbWFuZEVuY29kZXIiLCJjcmVhdGVDb21tYW5kRW5jb2RlciIsInJlc29sdmVRdWVyeVNldCIsImNvcHlCdWZmZXJUb0J1ZmZlciIsImNiIiwiZmluaXNoIiwiYWRkQ29tbWFuZEJ1ZmZlciIsInJlcXVlc3QiLCJyZW5kZXJWZXJzaW9uIiwibWFwQXN5bmMiLCJHUFVNYXBNb2RlIiwiUkVBRCIsInRoZW4iLCJfdGhpcyRzdGFnaW5nQnVmZmVycyIsInNyY1RpbWluZ3MiLCJCaWdJbnQ2NEFycmF5IiwiZ2V0TWFwcGVkUmFuZ2UiLCJ0aW1pbmdzIiwiaSIsInB1c2giLCJOdW1iZXIiLCJ1bm1hcCJdLCJtYXBwaW5ncyI6Ijs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxjQUFjLENBQUM7QUFhakJDLEVBQUFBLFdBQVdBLENBQUNDLE1BQU0sRUFBRUMsV0FBVyxFQUFFQyxRQUFRLEVBQUU7QUFaM0M7QUFDSjtBQUNBO0FBRkksSUFBQSxJQUFBLENBR0FDLFFBQVEsR0FBQSxLQUFBLENBQUEsQ0FBQTtJQUFBLElBRVJDLENBQUFBLGNBQWMsR0FBRyxFQUFFLENBQUE7SUFBQSxJQUVuQkMsQ0FBQUEsbUJBQW1CLEdBQUcsSUFBSSxDQUFBO0FBRTFCO0FBQUEsSUFBQSxJQUFBLENBQ0FDLFlBQVksR0FBQSxLQUFBLENBQUEsQ0FBQTtJQUdSLElBQUksQ0FBQ04sTUFBTSxHQUFHQSxNQUFNLENBQUE7SUFDcEIsSUFBSSxDQUFDRSxRQUFRLEdBQUdBLFFBQVEsQ0FBQTtBQUN4QixJQUFBLElBQUksQ0FBQ0ksWUFBWSxHQUFHTCxXQUFXLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTs7QUFFdkM7QUFDQSxJQUFBLE1BQU1NLElBQUksR0FBR1AsTUFBTSxDQUFDTyxJQUFJLENBQUE7QUFDeEIsSUFBQSxJQUFJLENBQUNKLFFBQVEsR0FBR0ksSUFBSSxDQUFDQyxjQUFjLENBQUM7QUFDaENDLE1BQUFBLElBQUksRUFBRVIsV0FBVyxHQUFHLFdBQVcsR0FBRyxXQUFXO0FBQzdDUyxNQUFBQSxLQUFLLEVBQUVSLFFBQUFBO0FBQ1gsS0FBQyxDQUFDLENBQUE7QUFDRlMsSUFBQUEsV0FBVyxDQUFDQyxRQUFRLENBQUMsSUFBSSxDQUFDVCxRQUFRLEVBQUcsQ0FBV0YsU0FBQUEsRUFBQUEsV0FBVyxHQUFHLFdBQVcsR0FBRyxXQUFZLEVBQUMsQ0FBQyxDQUFBOztBQUUxRjtBQUNBLElBQUEsSUFBSSxDQUFDWSxX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
