import { DebugHelper, Debug } from '../../../core/debug.js';
import { BindGroupFormat, BindBufferFormat } from '../bind-group-format.js';
import { UniformBufferFormat, UniformFormat } from '../uniform-buffer-format.js';
import { BlendState } from '../blend-state.js';
import { SHADERLANGUAGE_WGSL, UNIFORMTYPE_VEC4, UNIFORMTYPE_FLOAT, UNIFORM_BUFFER_DEFAULT_SLOT_NAME, SHADERSTAGE_VERTEX, SHADERSTAGE_FRAGMENT, CLEARFLAG_COLOR, CLEARFLAG_DEPTH, CLEARFLAG_STENCIL, CULLFACE_NONE, BINDGROUP_MESH, PRIMITIVE_TRISTRIP } from '../constants.js';
import { Shader } from '../shader.js';
import { BindGroup } from '../bind-group.js';
import { UniformBuffer } from '../uniform-buffer.js';
import { DebugGraphics } from '../debug-graphics.js';
import { DepthState } from '../depth-state.js';

const primitive = {
  type: PRIMITIVE_TRISTRIP,
  base: 0,
  count: 4,
  indexed: false
};

/**
 * A WebGPU helper class implementing a viewport clear operation. When rendering to a texture,
 * the whole surface can be cleared using loadOp, but if only a viewport needs to be cleared, or if
 * it needs to be cleared later during the rendering, this need to be archieved by rendering a quad.
 * This class renders a full-screen quad, and expects the viewport / scissor to be set up to clip
 * it to only required area.
 *
 * @ignore
 */
class WebgpuClearRenderer {
  constructor(device) {
    // shader that can write out color and depth values
    const code = `

            struct ub_mesh {
                color : vec4f,
                depth: f32
            }

            @group(0) @binding(0) var<uniform> ubMesh : ub_mesh;

            var<private> pos : array<vec2f, 4> = array<vec2f, 4>(
                vec2(-1.0, 1.0), vec2(1.0, 1.0),
                vec2(-1.0, -1.0), vec2(1.0, -1.0)
            );

            struct VertexOutput {
                @builtin(position) position : vec4f
            }

            @vertex
            fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                var output : VertexOutput;
                output.position = vec4(pos[vertexIndex], ubMesh.depth, 1.0);
                return output;
            }

            @fragment
            fn fragmentMain() -> @location(0) vec4f {
                return ubMesh.color;
            }
        `;
    this.shader = new Shader(device, {
      name: 'WebGPUClearRendererShader',
      shaderLanguage: SHADERLANGUAGE_WGSL,
      vshader: code,
      fshader: code
    });

    // uniforms
    this.uniformBuffer = new UniformBuffer(device, new UniformBufferFormat(device, [new UniformFormat('color', UNIFORMTYPE_VEC4), new UniformFormat('depth', UNIFORMTYPE_FLOAT)]), false);

    // format of the bind group
    const bindGroupFormat = new BindGroupFormat(device, [new BindBufferFormat(UNIFORM_BUFFER_DEFAULT_SLOT_NAME, SHADERSTAGE_VERTEX | SHADERSTAGE_FRAGMENT)]);

    // bind group
    this.bindGroup = new BindGroup(device, bindGroupFormat, this.uniformBuffer);
    DebugHelper.setName(this.bindGroup, `ClearRenderer-BindGroup_${this.bindGroup.id}`);

    // uniform data
    this.colorData = new Float32Array(4);
    this.colorId = device.scope.resolve('color');
    this.depthId = device.scope.resolve('depth');
  }
  destroy() {
    this.shader.destroy();
    this.shader = null;
    this.uniformBuffer.destroy();
    this.uniformBuffer = null;
    this.bindGroup.destroy();
    this.bindGroup = null;
  }
  clear(device, renderTarget, options, defaultOptions) {
    var _options$flags;
    options = options || defaultOptions;
    const flags = (_options$flags = options.flags) != null ? _options$flags : defaultOptions.flags;
    if (flags !== 0) {
      DebugGraphics.pushGpuMarker(device, 'CLEAR-RENDERER');

      // setup clear color
      if (flags & CLEARFLAG_COLOR && renderTarget.colorBuffer) {
        var _options$color;
        const color = (_options$color = options.color) != null ? _options$color : defaultOptions.color;
        this.colorData.set(color);
        device.setBlendState(BlendState.NOBLEND);
      } else {
        device.setBlendState(BlendState.NOWRITE);
      }
      this.colorId.setValue(this.colorData);

      // setup depth clear
      if (flags & CLEARFLAG_DEPTH && renderTarget.depth) {
        var _options$depth;
        const depth = (_options$depth = options.depth) != null ? _options$depth : defaultOptions.depth;
        this.depthId.setValue(depth);
        device.setDepthState(DepthState.WRITEDEPTH);
      } else {
        this.depthId.setValue(1);
        device.setDepthState(DepthState.NODEPTH);
      }

      // setup stencil clear
      if (flags & CLEARFLAG_STENCIL && renderTarget.stencil) {
        Debug.warnOnce("ClearRenderer does not support stencil clear at the moment");
      }
      device.setCullMode(CULLFACE_NONE);

      // render 4 vertices without vertex buffer
      device.setShader(this.shader);
      const bindGroup = this.bindGroup;
      bindGroup.defaultUniformBuffer.update();
      bindGroup.update();
      device.setBindGroup(BINDGROUP_MESH, bindGroup);
      device.draw(primitive);
      DebugGraphics.popGpuMarker(device);
    }
  }
}

export { WebgpuClearRenderer };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViZ3B1LWNsZWFyLXJlbmRlcmVyLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvcGxhdGZvcm0vZ3JhcGhpY3Mvd2ViZ3B1L3dlYmdwdS1jbGVhci1yZW5kZXJlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWJ1ZywgRGVidWdIZWxwZXIgfSBmcm9tIFwiLi4vLi4vLi4vY29yZS9kZWJ1Zy5qc1wiO1xuaW1wb3J0IHsgQmluZEJ1ZmZlckZvcm1hdCwgQmluZEdyb3VwRm9ybWF0IH0gZnJvbSBcIi4uL2JpbmQtZ3JvdXAtZm9ybWF0LmpzXCI7XG5pbXBvcnQgeyBVbmlmb3JtQnVmZmVyRm9ybWF0LCBVbmlmb3JtRm9ybWF0IH0gZnJvbSBcIi4uL3VuaWZvcm0tYnVmZmVyLWZvcm1hdC5qc1wiO1xuaW1wb3J0IHsgQmxlbmRTdGF0ZSB9IGZyb20gXCIuLi9ibGVuZC1zdGF0ZS5qc1wiO1xuaW1wb3J0IHtcbiAgICBDVUxMRkFDRV9OT05FLFxuICAgIFBSSU1JVElWRV9UUklTVFJJUCwgU0hBREVSTEFOR1VBR0VfV0dTTCwgU0hBREVSU1RBR0VfRlJBR01FTlQsIFNIQURFUlNUQUdFX1ZFUlRFWCxcbiAgICBVTklGT1JNVFlQRV9GTE9BVCwgVU5JRk9STVRZUEVfVkVDNCwgVU5JRk9STV9CVUZGRVJfREVGQVVMVF9TTE9UX05BTUUsIEJJTkRHUk9VUF9NRVNILCBDTEVBUkZMQUdfQ09MT1IsIENMRUFSRkxBR19ERVBUSCwgQ0xFQVJGTEFHX1NURU5DSUxcbn0gZnJvbSBcIi4uL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgU2hhZGVyIH0gZnJvbSBcIi4uL3NoYWRlci5qc1wiO1xuaW1wb3J0IHsgQmluZEdyb3VwIH0gZnJvbSBcIi4uL2JpbmQtZ3JvdXAuanNcIjtcbmltcG9ydCB7IFVuaWZvcm1CdWZmZXIgfSBmcm9tIFwiLi4vdW5pZm9ybS1idWZmZXIuanNcIjtcbmltcG9ydCB7IERlYnVnR3JhcGhpY3MgfSBmcm9tIFwiLi4vZGVidWctZ3JhcGhpY3MuanNcIjtcbmltcG9ydCB7IERlcHRoU3RhdGUgfSBmcm9tIFwiLi4vZGVwdGgtc3RhdGUuanNcIjtcblxuY29uc3QgcHJpbWl0aXZlID0ge1xuICAgIHR5cGU6IFBSSU1JVElWRV9UUklTVFJJUCxcbiAgICBiYXNlOiAwLFxuICAgIGNvdW50OiA0LFxuICAgIGluZGV4ZWQ6IGZhbHNlXG59O1xuXG4vKipcbiAqIEEgV2ViR1BVIGhlbHBlciBjbGFzcyBpbXBsZW1lbnRpbmcgYSB2aWV3cG9ydCBjbGVhciBvcGVyYXRpb24uIFdoZW4gcmVuZGVyaW5nIHRvIGEgdGV4dHVyZSxcbiAqIHRoZSB3aG9sZSBzdXJmYWNlIGNhbiBiZSBjbGVhcmVkIHVzaW5nIGxvYWRPcCwgYnV0IGlmIG9ubHkgYSB2aWV3cG9ydCBuZWVkcyB0byBiZSBjbGVhcmVkLCBvciBpZlxuICogaXQgbmVlZHMgdG8gYmUgY2xlYXJlZCBsYXRlciBkdXJpbmcgdGhlIHJlbmRlcmluZywgdGhpcyBuZWVkIHRvIGJlIGFyY2hpZXZlZCBieSByZW5kZXJpbmcgYSBxdWFkLlxuICogVGhpcyBjbGFzcyByZW5kZXJzIGEgZnVsbC1zY3JlZW4gcXVhZCwgYW5kIGV4cGVjdHMgdGhlIHZpZXdwb3J0IC8gc2Npc3NvciB0byBiZSBzZXQgdXAgdG8gY2xpcFxuICogaXQgdG8gb25seSByZXF1aXJlZCBhcmVhLlxuICpcbiAqIEBpZ25vcmVcbiAqL1xuY2xhc3MgV2ViZ3B1Q2xlYXJSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IoZGV2aWNlKSB7XG5cbiAgICAgICAgLy8gc2hhZGVyIHRoYXQgY2FuIHdyaXRlIG91dCBjb2xvciBhbmQgZGVwdGggdmFsdWVzXG4gICAgICAgIGNvbnN0IGNvZGUgPSBgXG5cbiAgICAgICAgICAgIHN0cnVjdCB1Yl9tZXNoIHtcbiAgICAgICAgICAgICAgICBjb2xvciA6IHZlYzRmLFxuICAgICAgICAgICAgICAgIGRlcHRoOiBmMzJcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgQGdyb3VwKDApIEBiaW5kaW5nKDApIHZhcjx1bmlmb3JtPiB1Yk1lc2ggOiB1Yl9tZXNoO1xuXG4gICAgICAgICAgICB2YXI8cHJpdmF0ZT4gcG9zIDogYXJyYXk8dmVjMmYsIDQ+ID0gYXJyYXk8dmVjMmYsIDQ+KFxuICAgICAgICAgICAgICAgIHZlYzIoLTEuMCwgMS4wKSwgdmVjMigxLjAsIDEuMCksXG4gICAgICAgICAgICAgICAgdmVjMigtMS4wLCAtMS4wKSwgdmVjMigxLjAsIC0xLjApXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBzdHJ1Y3QgVmVydGV4T3V0cHV0IHtcbiAgICAgICAgICAgICAgICBAYnVpbHRpbihwb3NpdGlvbikgcG9zaXRpb24gOiB2ZWM0ZlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBAdmVydGV4XG4gICAgICAgICAgICBmbiB2ZXJ0ZXhNYWluKEBidWlsdGluKHZlcnRleF9pbmRleCkgdmVydGV4SW5kZXggOiB1MzIpIC0+IFZlcnRleE91dHB1dCB7XG4gICAgICAgICAgICAgICAgdmFyIG91dHB1dCA6IFZlcnRleE91dHB1dDtcbiAgICAgICAgICAgICAgICBvdXRwdXQucG9zaXRpb24gPSB2ZWM0KHBvc1t2ZXJ0ZXhJbmRleF0sIHViTWVzaC5kZXB0aCwgMS4wKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBAZnJhZ21lbnRcbiAgICAgICAgICAgIGZuIGZyYWdtZW50TWFpbigpIC0+IEBsb2NhdGlvbigwKSB2ZWM0ZiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHViTWVzaC5jb2xvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcblxuICAgICAgICB0aGlzLnNoYWRlciA9IG5ldyBTaGFkZXIoZGV2aWNlLCB7XG4gICAgICAgICAgICBuYW1lOiAnV2ViR1BVQ2xlYXJSZW5kZXJlclNoYWRlcicsXG4gICAgICAgICAgICBzaGFkZXJMYW5ndWFnZTogU0hBREVSTEFOR1VBR0VfV0dTTCxcbiAgICAgICAgICAgIHZzaGFkZXI6IGNvZGUsXG4gICAgICAgICAgICBmc2hhZGVyOiBjb2RlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHVuaWZvcm1zXG4gICAgICAgIHRoaXMudW5pZm9ybUJ1ZmZlciA9IG5ldyBVbmlmb3JtQnVmZmVyKGRldmljZSwgbmV3IFVuaWZvcm1CdWZmZXJGb3JtYXQoZGV2aWNlLCBbXG4gICAgICAgICAgICBuZXcgVW5pZm9ybUZvcm1hdCgnY29sb3InLCBVTklGT1JNVFlQRV9WRUM0KSxcbiAgICAgICAgICAgIG5ldyBVbmlmb3JtRm9ybWF0KCdkZXB0aCcsIFVOSUZPUk1UWVBFX0ZMT0FUKVxuICAgICAgICBdKSwgZmFsc2UpO1xuXG4gICAgICAgIC8vIGZvcm1hdCBvZiB0aGUgYmluZCBncm91cFxuICAgICAgICBjb25zdCBiaW5kR3JvdXBGb3JtYXQgPSBuZXcgQmluZEdyb3VwRm9ybWF0KGRldmljZSwgW1xuICAgICAgICAgICAgbmV3IEJpbmRCdWZmZXJGb3JtYXQoVU5JRk9STV9CVUZGRVJfREVGQVVMVF9TTE9UX05BTUUsIFNIQURFUlNUQUdFX1ZFUlRFWCB8IFNIQURFUlNUQUdFX0ZSQUdNRU5UKVxuICAgICAgICBdKTtcblxuICAgICAgICAvLyBiaW5kIGdyb3VwXG4gICAgICAgIHRoaXMuYmluZEdyb3VwID0gbmV3IEJpbmRHcm91cChkZXZpY2UsIGJpbmRHcm91cEZvcm1hdCwgdGhpcy51bmlmb3JtQnVmZmVyKTtcbiAgICAgICAgRGVidWdIZWxwZXIuc2V0TmFtZSh0aGlzLmJpbmRHcm91cCwgYENsZWFyUmVuZGVyZXItQmluZEdyb3VwXyR7dGhpcy5iaW5kR3JvdXAuaWR9YCk7XG5cbiAgICAgICAgLy8gdW5pZm9ybSBkYXRhXG4gICAgICAgIHRoaXMuY29sb3JEYXRhID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbiAgICAgICAgdGhpcy5jb2xvcklkID0gZGV2aWNlLnNjb3BlLnJlc29sdmUoJ2NvbG9yJyk7XG4gICAgICAgIHRoaXMuZGVwdGhJZCA9IGRldmljZS5zY29wZS5yZXNvbHZlKCdkZXB0aCcpO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuc2hhZGVyLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5zaGFkZXIgPSBudWxsO1xuXG4gICAgICAgIHRoaXMudW5pZm9ybUJ1ZmZlci5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMudW5pZm9ybUJ1ZmZlciA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5iaW5kR3JvdXAuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmJpbmRHcm91cCA9IG51bGw7XG4gICAgfVxuXG4gICAgY2xlYXIoZGV2aWNlLCByZW5kZXJUYXJnZXQsIG9wdGlvbnMsIGRlZmF1bHRPcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IGRlZmF1bHRPcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IGZsYWdzID0gb3B0aW9ucy5mbGFncyA/PyBkZWZhdWx0T3B0aW9ucy5mbGFncztcbiAgICAgICAgaWYgKGZsYWdzICE9PSAwKSB7XG5cbiAgICAgICAgICAgIERlYnVnR3JhcGhpY3MucHVzaEdwdU1hcmtlcihkZXZpY2UsICdDTEVBUi1SRU5ERVJFUicpO1xuXG4gICAgICAgICAgICAvLyBzZXR1cCBjbGVhciBjb2xvclxuICAgICAgICAgICAgaWYgKChmbGFncyAmIENMRUFSRkxBR19DT0xPUikgJiYgcmVuZGVyVGFyZ2V0LmNvbG9yQnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSBvcHRpb25zLmNvbG9yID8/IGRlZmF1bHRPcHRpb25zLmNvbG9yO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sb3JEYXRhLnNldChjb2xvcik7XG5cbiAgICAgICAgICAgICAgICBkZXZpY2Uuc2V0QmxlbmRTdGF0ZShCbGVuZFN0YXRlLk5PQkxFTkQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZXZpY2Uuc2V0QmxlbmRTdGF0ZShCbGVuZFN0YXRlLk5PV1JJVEUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb2xvcklkLnNldFZhbHVlKHRoaXMuY29sb3JEYXRhKTtcblxuICAgICAgICAgICAgLy8gc2V0dXAgZGVwdGggY2xlYXJcbiAgICAgICAgICAgIGlmICgoZmxhZ3MgJiBDTEVBUkZMQUdfREVQVEgpICYmIHJlbmRlclRhcmdldC5kZXB0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlcHRoID0gb3B0aW9ucy5kZXB0aCA/PyBkZWZhdWx0T3B0aW9ucy5kZXB0aDtcbiAgICAgICAgICAgICAgICB0aGlzLmRlcHRoSWQuc2V0VmFsdWUoZGVwdGgpO1xuICAgICAgICAgICAgICAgIGRldmljZS5zZXREZXB0aFN0YXRlKERlcHRoU3RhdGUuV1JJVEVERVBUSCk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXB0aElkLnNldFZhbHVlKDEpO1xuICAgICAgICAgICAgICAgIGRldmljZS5zZXREZXB0aFN0YXRlKERlcHRoU3RhdGUuTk9ERVBUSCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHNldHVwIHN0ZW5jaWwgY2xlYXJcbiAgICAgICAgICAgIGlmICgoZmxhZ3MgJiBDTEVBUkZMQUdfU1RFTkNJTCkgJiYgcmVuZGVyVGFyZ2V0LnN0ZW5jaWwpIHtcbiAgICAgICAgICAgICAgICBEZWJ1Zy53YXJuT25jZShcIkNsZWFyUmVuZGVyZXIgZG9lcyBub3Qgc3VwcG9ydCBzdGVuY2lsIGNsZWFyIGF0IHRoZSBtb21lbnRcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRldmljZS5zZXRDdWxsTW9kZShDVUxMRkFDRV9OT05FKTtcblxuICAgICAgICAgICAgLy8gcmVuZGVyIDQgdmVydGljZXMgd2l0aG91dCB2ZXJ0ZXggYnVmZmVyXG4gICAgICAgICAgICBkZXZpY2Uuc2V0U2hhZGVyKHRoaXMuc2hhZGVyKTtcblxuICAgICAgICAgICAgY29uc3QgYmluZEdyb3VwID0gdGhpcy5iaW5kR3JvdXA7XG4gICAgICAgICAgICBiaW5kR3JvdXAuZGVmYXVsdFVuaWZvcm1CdWZmZXIudXBkYXRlKCk7XG4gICAgICAgICAgICBiaW5kR3JvdXAudXBkYXRlKCk7XG4gICAgICAgICAgICBkZXZpY2Uuc2V0QmluZEdyb3VwKEJJTkRHUk9VUF9NRVNILCBiaW5kR3JvdXApO1xuXG4gICAgICAgICAgICBkZXZpY2UuZHJhdyhwcmltaXRpdmUpO1xuXG4gICAgICAgICAgICBEZWJ1Z0dyYXBoaWNzLnBvcEdwdU1hcmtlcihkZXZpY2UpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgeyBXZWJncHVDbGVhclJlbmRlcmVyIH07XG4iXSwibmFtZXMiOlsicHJpbWl0aXZlIiwidHlwZSIsIlBSSU1JVElWRV9UUklTVFJJUCIsImJhc2UiLCJjb3VudCIsImluZGV4ZWQiLCJXZWJncHVDbGVhclJlbmRlcmVyIiwiY29uc3RydWN0b3IiLCJkZXZpY2UiLCJjb2RlIiwic2hhZGVyIiwiU2hhZGVyIiwibmFtZSIsInNoYWRlckxhbmd1YWdlIiwiU0hBREVSTEFOR1VBR0VfV0dTTCIsInZzaGFkZXIiLCJmc2hhZGVyIiwidW5pZm9ybUJ1ZmZlciIsIlVuaWZvcm1CdWZmZXIiLCJVbmlmb3JtQnVmZmVyRm9ybWF0IiwiVW5pZm9ybUZvcm1hdCIsIlVOSUZPUk1UWVBFX1ZFQzQiLCJVTklGT1JNVFlQRV9GTE9BVCIsImJpbmRHcm91cEZvcm1hdCIsIkJpbmRHcm91cEZvcm1hdCIsIkJpbmRCdWZmZXJGb3JtYXQiLCJVTklGT1JNX0JVRkZFUl9ERUZBVUxUX1NMT1RfTkFNRSIsIlNIQURFUlNUQUdFX1ZFUlRFWCIsIlNIQURFUlNUQUdFX0ZSQUdNRU5UIiwiYmluZEdyb3VwIiwiQmluZEdyb3VwIiwiRGVidWdIZWxwZXIiLCJzZXROYW1lIiwiaWQiLCJjb2xvckRhdGEiLCJGbG9hdDMyQXJyYXkiLCJjb2xvcklkIiwic2NvcGUiLCJyZXNvbHZlIiwiZGVwdGhJZCIsImRlc3Ryb3kiLCJjbGVhciIsInJlbmRlclRhcmdldCIsIm9wdGlvbnMiLCJkZWZhdWx0T3B0aW9ucyIsIl9vcHRpb25zJGZsYWdzIiwiZmxhZ3MiLCJEZWJ1Z0dyYXBoaWNzIiwicHVzaEdwdU1hcmtlciIsIkNMRUFSRkxBR19DT0xPUiIsImNvbG9yQnVmZmVyIiwiX29wdGlvbnMkY29sb3IiLCJjb2xvciIsInNldCIsInNldEJsZW5kU3RhdGUiLCJCbGVuZFN0YXRlIiwiTk9CTEVORCIsIk5PV1JJVEUiLCJzZXRWYWx1ZSIsIkNMRUFSRkxBR19ERVBUSCIsImRlcHRoIiwiX29wdGlvbnMkZGVwdGgiLCJzZXREZXB0aFN0YXRlIiwiRGVwdGhTdGF0ZSIsIldSSVRFREVQVEgiLCJOT0RFUFRIIiwiQ0xFQVJGTEFHX1NURU5DSUwiLCJzdGVuY2lsIiwiRGVidWciLCJ3YXJuT25jZSIsInNldEN1bGxNb2RlIiwiQ1VMTEZBQ0VfTk9ORSIsInNldFNoYWRlciIsImRlZmF1bHRVbmlmb3JtQnVmZmVyIiwidXBkYXRlIiwic2V0QmluZEdyb3VwIiwiQklOREdST1VQX01FU0giLCJkcmF3IiwicG9wR3B1TWFya2VyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQWVBLE1BQU1BLFNBQVMsR0FBRztBQUNkQyxFQUFBQSxJQUFJLEVBQUVDLGtCQUFrQjtBQUN4QkMsRUFBQUEsSUFBSSxFQUFFLENBQUM7QUFDUEMsRUFBQUEsS0FBSyxFQUFFLENBQUM7QUFDUkMsRUFBQUEsT0FBTyxFQUFFLEtBQUE7QUFDYixDQUFDLENBQUE7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsbUJBQW1CLENBQUM7RUFDdEJDLFdBQVdBLENBQUNDLE1BQU0sRUFBRTtBQUVoQjtBQUNBLElBQUEsTUFBTUMsSUFBSSxHQUFJLENBQUE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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
