import { WebglBuffer } from './webgl-buffer.js';

/**
 * A WebGL implementation of the VertexBuffer.
 *
 * @ignore
 */
class WebglVertexBuffer extends WebglBuffer {
  constructor(...args) {
    super(...args);
    // vertex array object
    this.vao = null;
  }
  destroy(device) {
    super.destroy(device);

    // clear up bound vertex buffers
    device.unbindVertexArray();
  }
  loseContext() {
    super.loseContext();
    this.vao = null;
  }
  unlock(vertexBuffer) {
    const device = vertexBuffer.device;
    super.unlock(device, vertexBuffer.usage, device.gl.ARRAY_BUFFER, vertexBuffer.storage);
  }
}

export { WebglVertexBuffer };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViZ2wtdmVydGV4LWJ1ZmZlci5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3BsYXRmb3JtL2dyYXBoaWNzL3dlYmdsL3dlYmdsLXZlcnRleC1idWZmZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgV2ViZ2xCdWZmZXIgfSBmcm9tIFwiLi93ZWJnbC1idWZmZXIuanNcIjtcblxuLyoqXG4gKiBBIFdlYkdMIGltcGxlbWVudGF0aW9uIG9mIHRoZSBWZXJ0ZXhCdWZmZXIuXG4gKlxuICogQGlnbm9yZVxuICovXG5jbGFzcyBXZWJnbFZlcnRleEJ1ZmZlciBleHRlbmRzIFdlYmdsQnVmZmVyIHtcbiAgICAvLyB2ZXJ0ZXggYXJyYXkgb2JqZWN0XG4gICAgdmFvID0gbnVsbDtcblxuICAgIGRlc3Ryb3koZGV2aWNlKSB7XG5cbiAgICAgICAgc3VwZXIuZGVzdHJveShkZXZpY2UpO1xuXG4gICAgICAgIC8vIGNsZWFyIHVwIGJvdW5kIHZlcnRleCBidWZmZXJzXG4gICAgICAgIGRldmljZS51bmJpbmRWZXJ0ZXhBcnJheSgpO1xuICAgIH1cblxuICAgIGxvc2VDb250ZXh0KCkge1xuICAgICAgICBzdXBlci5sb3NlQ29udGV4dCgpO1xuICAgICAgICB0aGlzLnZhbyA9IG51bGw7XG4gICAgfVxuXG4gICAgdW5sb2NrKHZlcnRleEJ1ZmZlcikge1xuXG4gICAgICAgIGNvbnN0IGRldmljZSA9IHZlcnRleEJ1ZmZlci5kZXZpY2U7XG4gICAgICAgIHN1cGVyLnVubG9jayhkZXZpY2UsIHZlcnRleEJ1ZmZlci51c2FnZSwgZGV2aWNlLmdsLkFSUkFZX0JVRkZFUiwgdmVydGV4QnVmZmVyLnN0b3JhZ2UpO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgV2ViZ2xWZXJ0ZXhCdWZmZXIgfTtcbiJdLCJuYW1lcyI6WyJXZWJnbFZlcnRleEJ1ZmZlciIsIldlYmdsQnVmZmVyIiwiY29uc3RydWN0b3IiLCJhcmdzIiwidmFvIiwiZGVzdHJveSIsImRldmljZSIsInVuYmluZFZlcnRleEFycmF5IiwibG9zZUNvbnRleHQiLCJ1bmxvY2siLCJ2ZXJ0ZXhCdWZmZXIiLCJ1c2FnZSIsImdsIiwiQVJSQVlfQlVGRkVSIiwic3RvcmFnZSJdLCJtYXBwaW5ncyI6Ijs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsaUJBQWlCLFNBQVNDLFdBQVcsQ0FBQztBQUFBQyxFQUFBQSxXQUFBQSxDQUFBLEdBQUFDLElBQUEsRUFBQTtBQUFBLElBQUEsS0FBQSxDQUFBLEdBQUFBLElBQUEsQ0FBQSxDQUFBO0FBQ3hDO0lBQUEsSUFDQUMsQ0FBQUEsR0FBRyxHQUFHLElBQUksQ0FBQTtBQUFBLEdBQUE7RUFFVkMsT0FBT0EsQ0FBQ0MsTUFBTSxFQUFFO0FBRVosSUFBQSxLQUFLLENBQUNELE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLENBQUE7O0FBRXJCO0lBQ0FBLE1BQU0sQ0FBQ0MsaUJBQWlCLEVBQUUsQ0FBQTtBQUM5QixHQUFBO0FBRUFDLEVBQUFBLFdBQVdBLEdBQUc7SUFDVixLQUFLLENBQUNBLFdBQVcsRUFBRSxDQUFBO0lBQ25CLElBQUksQ0FBQ0osR0FBRyxHQUFHLElBQUksQ0FBQTtBQUNuQixHQUFBO0VBRUFLLE1BQU1BLENBQUNDLFlBQVksRUFBRTtBQUVqQixJQUFBLE1BQU1KLE1BQU0sR0FBR0ksWUFBWSxDQUFDSixNQUFNLENBQUE7QUFDbEMsSUFBQSxLQUFLLENBQUNHLE1BQU0sQ0FBQ0gsTUFBTSxFQUFFSSxZQUFZLENBQUNDLEtBQUssRUFBRUwsTUFBTSxDQUFDTSxFQUFFLENBQUNDLFlBQVksRUFBRUgsWUFBWSxDQUFDSSxPQUFPLENBQUMsQ0FBQTtBQUMxRixHQUFBO0FBQ0o7Ozs7In0=
